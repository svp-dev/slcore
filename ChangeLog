2009-10-19  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* deploy/versions.mk.defaults: Bump version numbers.

2009-10-19  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix `deploy' rules.

	The `deploy' directory did not allow to customize the source and
	build trees with absolute directory names. This changeset removes
	this limitation. (reported by M. Irfan Uddin)

	Also, the upstream changes in GNUlib cause issues with getopt on
	MacOS X when compiling M4. To work around the GNU implementation
	of getopt is now required on OS X. (reported by M. Irfan Uddin)

	* README: Require GNU getopt.
	
	* deploy/tools.mk.defaults: Merge customizations for MPFR and GMP
	into a single set of CFLAGS/LDFLAGS customizations. Suggest
	defaults for MacPorts and libgnugetopt.
	
	* deploy/rules/gcc.mk,
	* deploy/rules/binutils.mk,
	* deploy/rules/m4.mk,
	* deploy/rules/mggcc.mk,
	* deploy/rules/mgsim.mk,	
	* deploy/rules/sl.mk: Properly set `$SRC' to an absolute path name
	where needed. Use CFLAGS/LDFLAGS customizations where appropriate.

2009-10-15  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* deploy/versions.mk.defaults: Bump version numbers.

2009-10-14  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* deploy/versions.mk.defaults: Bump version numbers.

2009-10-12  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* deploy/versions.mk.defaults: Bump version numbers.

2009-10-01  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* deploy/versions.mk.defaults: Bump version numbers.

2009-09-30  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve `deploy'.
	
	* deploy/rules/binutils.mk,
	* deploy/rules/gcc.mk,
	* deploy/rules/mggcc.mk,
	* deploy/rules/m4.mk,
	* deploy/rules/mgsim.mk,	
	* deploy/rules/sl.mk: Separate "source" and "build" targets.

	* deploy/Makefile: Introduce new rule `fetch' that fetches all
	sources but does not build. Separate `reqs' rules from `all' to
	allow building only dependencies.

2009-09-29  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Minor packaging fix.
	
	* Makefile.am: distribute `deploy/' properly.

2009-09-29  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* deploy/versions.mk.defaults: Bump version numbers. 

2009-09-24  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Modify the stock GCC to better support C99's VLA's.

	The stock GNU compiler uses "stack probing" to allocate VLA's or
	large frames; where a loop is emitted to ensure all pages of the
	allocated space are touched in order, so that the OS can see it
	needs to grow the VM space for the process. We do not need this on
	the Microgrid, so remove it. Also GCC would use fixed register
	names in this loop, which breaks the alternate SL->MT code
	generator.
	
	* deploy/patches/alpha.c.patch: New.
	* deploy/rules/gcc.mk: Use it. 
	
	* deploy/patches/alpha.md.patch: Update.

2009-09-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* deploy/versions.mk.defaults: Bump version numbers. This is
	required to support "setemptyf".

2009-09-21  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* deploy/versions.mk.defaults: Bump version numbers. 

2009-09-21  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Minor fix in `deploy'.
	
	* deploy/Makefile ($(PREFIX)/slenv): Ensure target is removed
	before copying.

2009-09-18  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Increase compatibility with Snow Leopard.
	
	* deploy/rules/binutils.mk: Disable -Werror when building
	binutils, as the newer GCC on Snow Leopard is getting overly
	pedantic.

2009-08-31  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix `deploy' (again).
	
	* deploy/slenv: Remove `~poss/opt/bin' from PATH definition since
	this is now handled through the `slenv_local' helper.

2009-08-28  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix `deploy'.
	
	* deploy/rules/sl.mk ($(SLDIR)/bin/slc): Pick up manpages from
	`tools/bin', not `doc'.

2009-08-27  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Update `deploy'.
	
	* deploy/versions.mk.defaults (SLC_REV): Bump revision number to
	align with the MT-Alpha ISA change that happened in r2728, r2729,
	r2738.

2009-08-27  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix rule `show-vars'.

	* configure.ac: Use `AC_WITH_SLC' to ensure the variables are
	substituted.
	
	* Makefile.am: Explain to aclocal where to find
	`AC_WITH_SLC'. Point `PATH' to the correct location in
	`show-vars'.
	
2009-08-27  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Update the automated installers in `deploy'.

	This changeset bundles the required patch to GNU M4 and installs
	M4 together with the other SL requirements. The configuration is
	also simplified.

	* deploy/Makefile-reqs.orig: Split into...
	* deploy/tools.mk.defaults,
	* deploy/versions.mk.defaults,
	* deploy/layout.mk.defaults: ...this.

	* deploy/reqs.mk: Split into...
	* deploy/Makefile,
	* deploy/rules/binutils.mk,
	* deploy/rules/mgsim.mk,
	* deploy/rules/mggcc.mk,
	* deploy/rules/sl.mk,
	* deploy/rules/gcc.mk: ...this.

	* deploy/alpha.h.patch,
	* deploy/alpha.md.patch,
	* deploy/constraints.md.patch: Rename to...
	* deploy/patches/alpha.h.patch,
	* deploy/patches/alpha.md.patch,
	* deploy/patches/constraints.md.patch: ...here.
	
	* deploy/patches/m4.patch,
	* deploy/rules/m4.mk: New.

	* deploy/README: Update accordingly.
	
2009-08-26  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Minor packaging fix.
	
	* bootstrap: Use the new `sl-init-autoconf' script. Be less
	verbose.

2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Rename the top-level package to `sl'.

	* configure.ac: Change package name.

2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* ChangeLog: Rename to...
	* slc/ChangeLog.1: ...here.
	
	* ChangeLog: initialize, populate (below) with entries from
	`slc/ChangeLog.1'.

2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>
	
	Minor packaging fix.
	
	* slc/configure.ac: Run `AC_PROG_LN_S' since it is needed here.

2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Start to emancipate `slc'.

	* slc: Rename to...
	* slc/tools: ...here.

	* build-aux: Rename to...
	* slc/build-aux: ...here.

	* slc/build-aux/slc.m4,
	* tests/configure.ac,
	* programs/configure.ac: Update paths accordingly.

	* m4,
	* doc,
	* lib: Rename to...
	* slc/m4,
	* slc/doc,
	* slc/lib: ...here.

	* configure.ac,
	* Makefile.am: Move slc-specific rules to...
	* slc/configure.ac,
	* slc/Makefile.am: ...here.
	
	* configure.ac,
	* Makefile.am: Simplify. Add new config subdir `slc'.

	* slc/build-aux/sl.mk: Extract variable definitions into...
	* slc/build-aux/slcvars.mk: ...here.

	* Makefile.am: Use `slcvars.mk' instead of `sl.mk' to avoid a
	dependency on `SLC_CHECK_TARGETS'.
	
	* slc/build-aux/Makefile.am: Distribute the .mk files.

	* slc/boostrap: New.
	
2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Minor packaging fixes.

	* programs/benchmarks/fft/Makefile.am: Clean up generated headers
	on `distclean'. Simplify.

2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Get rid of Automake's "maintainer mode".

	* configure.ac,
	* Makefile.am,
	* tools/bin/Makefile.am: Do not use MAINTAINER_MODE. (Be optimistic
	about the behavior of `missing' when `help2man' does not exist.)

2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Homogeneize use of `build-aux'.

	Each independent part of the source tree should now expect the
	build helper files to be present in its own top-level `build-aux'.

	* tests/mkalltests.sh: Rename to...	
	* tests/build-aux/mkalltests.sh: ...here. Generate `alltests.mk'
	in `build-aux' as well.
	* bootstrap,
	* tests/bootstrap: Update accordingly.

	* tests/sl.mk,
	* tests/tests.mk,
	* programs/sl.mk,	
	* programs/tests.mk: Remove. These should now populated in the
	`build-aux' automatically, separately.

	* build-aux/tests.mk: Rename to...	
	* build-aux/slctests.mk: ...here, since it will be soon installed
	and the name `tests.mk' is a little too generic.

	* Makefile.am,
	* slc/lib/Makefile.am,
	* lib/Makefile.am,
	* programs/Makefile.am,
	* programs/benchmarks/blas/Makefile.am,
	* programs/benchmarks/fft/Makefile.am,
	* programs/benchmarks/livermore/Makefile.am,
	* programs/benchmarks/sha/Makefile.am,
	* programs/demo/Makefile.am,	
	* tests/Makefile.am: Expect .mk files in the local
	`build-aux'. Include `slctests.mk' instead of `tests.mk'.
	
2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Sanitize build options.

	* build-aux/slc.m4: Explicitly indicate that `--with-slc'
	overrides the local sources if it is provided.

	* build-aux/slctests.m4: Enable the testsuite by default.

	* Makefile.am: Use the new option name `--disable-build-programs'.
	
2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Provide `bootstrap' scripts in sub-projects.
	
	* bootstrap: Simplify, and duplicate useful parts to...
	
	* programs/bootstrap: ... here, and...
	* tests/bootstrap: here.

2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Start to emancipate `tests'.

	* tests/configure.ac: New.	
	* tests/Makefile.am: Add `build-aux' to aclocal's search path.

	* tests/sl.mk,	
	* tests/tests.mk: New. Delegate include to top-level files of the
	same name (This is a temporary hack).

	* configure.ac: Update accordingly.
	
2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Start to emancipate `programs'.

	* configure.ac: Move reusable Autoconf code to...
	
	* build-aux/mgbinutils.m4,
	* build-aux/mggcc.m4,
	* build-aux/mgsim.m4,
	* build-aux/slc.m4,	
	* build-aux/slctests.m4: ...here. Rename SLC target conditionals
	to `ENABLE_SLC_...'. Add a new conditional for muTC-ptl as well
	`ENABLE_SLC_PTL'. Handle the definition of SLC_LIBDIR and other
	locations early.

	* sl.mk,
	* tests.mk,
	* slc/lib/mtalpha.mk,
	* slc/lib/ptl.mk,
	* lib/mtalpha.mk,
	* lib/ptl.mk: Use the new conditional names and tool locations.

	* build-aux/Makefile.am: New. Distribute and install the reusable
	macros.

	* programs/configure.ac: New. Use the new macros.	
	* configure.ac: Remove tasks now performed by the
	sub-configure and reusable macros. Use the reusable macros.

	* Makefile.am,	
	* programs/Makefile.am: Add `build-aux' to aclocal's search path.

	* programs/sl.mk,
	* programs/tests.mk: New. Delegate include to top-level files of
	the same name (This is a temporary hack).
	
2009-08-24  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Reorganize source tree.
	
	* tools/tests/mkalltests.sh,
	* lib/tests/mkalltests.sh: Merge into...
	* tests/mkalltests.sh: ...here.

	* tools/tests/Makefile.am,
	* lib/tests/Makefile.am: Merge into...
	* tests/Makefile.am: ...here.
	
	* tools: Rename to...
	* slc: ...here.

	* tools/tests,
	* tools/tests/2_manyglobals,
	* tools/tests/1_slr,
	* lib/tests: Rename to...
	* tests/0_slc,
	* tools/0_slc/2_manyargs,
	* tests/1_slr,
	* tests/2_lib: ...here.

	* tests.mk,
	* sl.mk,
	* configure.ac,
	* Makefile.am,
	* slc/Makefile.am,
	* lib/Makefile.am: Update accordingly.

2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>
	
	Minor packaging fix.
	
	* slc/configure.ac: Run `AC_PROG_LN_S' since it is needed here.

2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Start to emancipate `slc'.

	* slc: Rename to...
	* slc/tools: ...here.

	* build-aux: Rename to...
	* slc/build-aux: ...here.

	* slc/build-aux/slc.m4,
	* tests/configure.ac,
	* programs/configure.ac: Update paths accordingly.

	* m4,
	* doc,
	* lib: Rename to...
	* slc/m4,
	* slc/doc,
	* slc/lib: ...here.

	* configure.ac,
	* Makefile.am: Move slc-specific rules to...
	* slc/configure.ac,
	* slc/Makefile.am: ...here.
	
	* configure.ac,
	* Makefile.am: Simplify. Add new config subdir `slc'.

	* slc/build-aux/sl.mk: Extract variable definitions into...
	* slc/build-aux/slcvars.mk: ...here.

	* Makefile.am: Use `slcvars.mk' instead of `sl.mk' to avoid a
	dependency on `SLC_CHECK_TARGETS'.
	
	* slc/build-aux/Makefile.am: Distribute the .mk files.

	* slc/boostrap: New.
	
2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Minor packaging fixes.

	* programs/benchmarks/fft/Makefile.am: Clean up generated headers
	on `distclean'. Simplify.

2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Get rid of Automake's "maintainer mode".

	* configure.ac,
	* Makefile.am,
	* tools/bin/Makefile.am: Do not use MAINTAINER_MODE. (Be optimistic
	about the behavior of `missing' when `help2man' does not exist.)

2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Homogeneize use of `build-aux'.

	Each independent part of the source tree should now expect the
	build helper files to be present in its own top-level `build-aux'.

	* tests/mkalltests.sh: Rename to...	
	* tests/build-aux/mkalltests.sh: ...here. Generate `alltests.mk'
	in `build-aux' as well.
	* bootstrap,
	* tests/bootstrap: Update accordingly.

	* tests/sl.mk,
	* tests/tests.mk,
	* programs/sl.mk,	
	* programs/tests.mk: Remove. These should now populated in the
	`build-aux' automatically, separately.

	* build-aux/tests.mk: Rename to...	
	* build-aux/slctests.mk: ...here, since it will be soon installed
	and the name `tests.mk' is a little too generic.

	* Makefile.am,
	* slc/lib/Makefile.am,
	* lib/Makefile.am,
	* programs/Makefile.am,
	* programs/benchmarks/blas/Makefile.am,
	* programs/benchmarks/fft/Makefile.am,
	* programs/benchmarks/livermore/Makefile.am,
	* programs/benchmarks/sha/Makefile.am,
	* programs/demo/Makefile.am,	
	* tests/Makefile.am: Expect .mk files in the local
	`build-aux'. Include `slctests.mk' instead of `tests.mk'.
	
2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Sanitize build options.

	* build-aux/slc.m4: Explicitly indicate that `--with-slc'
	overrides the local sources if it is provided.

	* build-aux/slctests.m4: Enable the testsuite by default.

	* Makefile.am: Use the new option name `--disable-build-programs'.
	
2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Provide `bootstrap' scripts in sub-projects.
	
	* bootstrap: Simplify, and duplicate useful parts to...
	
	* programs/bootstrap: ... here, and...
	* tests/bootstrap: here.

2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Start to emancipate `tests'.

	* tests/configure.ac: New.	
	* tests/Makefile.am: Add `build-aux' to aclocal's search path.

	* tests/sl.mk,	
	* tests/tests.mk: New. Delegate include to top-level files of the
	same name (This is a temporary hack).

	* configure.ac: Update accordingly.
	
2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Start to emancipate `programs'.

	* configure.ac: Move reusable Autoconf code to...
	
	* build-aux/mgbinutils.m4,
	* build-aux/mggcc.m4,
	* build-aux/mgsim.m4,
	* build-aux/slc.m4,	
	* build-aux/slctests.m4: ...here. Rename SLC target conditionals
	to `ENABLE_SLC_...'. Add a new conditional for muTC-ptl as well
	`ENABLE_SLC_PTL'. Handle the definition of SLC_LIBDIR and other
	locations early.

	* sl.mk,
	* tests.mk,
	* slc/lib/mtalpha.mk,
	* slc/lib/ptl.mk,
	* lib/mtalpha.mk,
	* lib/ptl.mk: Use the new conditional names and tool locations.

	* build-aux/Makefile.am: New. Distribute and install the reusable
	macros.

	* programs/configure.ac: New. Use the new macros.	
	* configure.ac: Remove tasks now performed by the
	sub-configure and reusable macros. Use the reusable macros.

	* Makefile.am,	
	* programs/Makefile.am: Add `build-aux' to aclocal's search path.

	* programs/sl.mk,
	* programs/tests.mk: New. Delegate include to top-level files of
	the same name (This is a temporary hack).
	
2009-08-24  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Reorganize source tree.
	
	* tools/tests/mkalltests.sh,
	* lib/tests/mkalltests.sh: Merge into...
	* tests/mkalltests.sh: ...here.

	* tools/tests/Makefile.am,
	* lib/tests/Makefile.am: Merge into...
	* tests/Makefile.am: ...here.
	
	* tools: Rename to...
	* slc: ...here.

	* tools/tests,
	* tools/tests/2_manyglobals,
	* tools/tests/1_slr,
	* lib/tests: Rename to...
	* tests/0_slc,
	* tools/0_slc/2_manyargs,
	* tests/1_slr,
	* tests/2_lib: ...here.

	* tests.mk,
	* sl.mk,
	* configure.ac,
	* Makefile.am,
	* slc/Makefile.am,
	* lib/Makefile.am: Update accordingly.

See `slc/ChangeLog.1' for earlier changes.


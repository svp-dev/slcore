2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Provide `bootstrap' scripts in sub-projects.
	
	* bootstrap: Simplify, and duplicate useful parts to...
	
	* programs/bootstrap: ... here, and...
	* tests/bootstrap: here.

2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Start to emancipate `tests'.

	* tests/configure.ac: New.	
	* tests/Makefile.am: Add `build-aux' to aclocal's search path.

	* tests/sl.mk,	
	* tests/tests.mk: New. Delegate include to top-level files of the
	same name (This is a temporary hack).

	* configure.ac: Update accordingly.
	
2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Start to emancipate `programs'.

	* configure.ac: Move reusable Autoconf code to...
	
	* build-aux/mgbinutils.m4,
	* build-aux/mggcc.m4,
	* build-aux/mgsim.m4,
	* build-aux/slc.m4,	
	* build-aux/slctests.m4: ...here. Rename SLC target conditionals
	to `ENABLE_SLC_...'. Add a new conditional for muTC-ptl as well
	`ENABLE_SLC_PTL'. Handle the definition of SLC_LIBDIR and other
	locations early.

	* sl.mk,
	* tests.mk,
	* slc/lib/mtalpha.mk,
	* slc/lib/ptl.mk,
	* lib/mtalpha.mk,
	* lib/ptl.mk: Use the new conditional names and tool locations.

	* build-aux/Makefile.am: New. Distribute and install the reusable
	macros.

	* programs/configure.ac: New. Use the new macros.	
	* configure.ac: Remove tasks now performed by the
	sub-configure and reusable macros. Use the reusable macros.

	* Makefile.am,	
	* programs/Makefile.am: Add `build-aux' to aclocal's search path.

	* programs/sl.mk,
	* programs/tests.mk: New. Delegate include to top-level files of
	the same name (This is a temporary hack).
	
2009-08-24  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Reorganize source tree.
	
	* tools/tests/mkalltests.sh,
	* lib/tests/mkalltests.sh: Merge into...
	* tests/mkalltests.sh: ...here.

	* tools/tests/Makefile.am,
	* lib/tests/Makefile.am: Merge into...
	* tests/Makefile.am: ...here.
	
	* tools: Rename to...
	* slc: ...here.

	* tools/tests,
	* tools/tests/2_manyglobals,
	* tools/tests/1_slr,
	* lib/tests: Rename to...
	* tests/0_slc,
	* tools/0_slc/2_manyargs,
	* tests/1_slr,
	* tests/2_lib: ...here.

	* tests.mk,
	* sl.mk,
	* configure.ac,
	* Makefile.am,
	* slc/Makefile.am,
	* lib/Makefile.am: Update accordingly.

2009-08-24  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve MT Alpha code generation.

	When the compiler runs out of local registers for automatic
	variables it may uses RA and/or FP for them. This causes a spill
	but also a reload before the end of the function. Since the result
	of this reload is not used, it may cause a pipeline stall in the
	next instance of the thread when the register is reused.

	This change attempts to protect this situation by forcing these
	loads to complete before the thread terminates.
	
	* tools/bin/spp: New transforms `detectload' and
	`completeload'. Use them.

2009-08-24  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Reorganize test suite.

	Make the numerical prefixes follow "increasing order of
	difficulty" for the compiler, as was originally intended.

	* tools/tests/0_slr: Rename to...
	* tools/tests/2_slr: ...here.
	
	* tools/tests/2_args: Rename to...
	* tools/tests/1_createargs: ...here.

	* tools/tests/3_mem: Rename to...
	* tools/tests/2_usegp: ...here.

	* tools/tests/4_index: Rename to...
	* tools/tests/3_index: ...here.

	* tools/tests/5_thdecl: Rename to...
	* tools/tests/4_thdecl: ...here.
	
	* tools/tests/6_break: Rename to...
	* tools/tests/3_break: ...here.
	
	* tools/tests/7_args: Rename to...
	* tools/tests/2_manyglobals: ...here.

	* tools/tests/8_funs: Rename to...
	* tools/tests/4_funcalls: ...here.
	
	* tools/tests/9_manyregs: Rename to...
	* tools/tests/2_manylocals: ...here.
	
	* tools/tests/livemore8.c: Rename to...
	* tools/tests/2_manyglobals/livermore8.c: ...here.

	* tools/tests/mkalltests.sh: Update accordingly.
	
2009-08-24  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Make the test environment more user-friendly. 

	(requested by S. Polstra)

	* tests.mk: Add new rule `clean-local' to remove output from
	tests. Do not compile `utc0' test targets with -O2, since this is
	not supported anyways.
	
	* tools/bin/slt.in: Condense the list of left overs (if any) to
	only display the file name extensions.

	* tools/bin/slc.in: Insert spaces in the output of `-v' to make it
	more readable.

2009-08-24  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Make call gate more robust on MT-Alpha.

	When a function using varargs is being called, it will first try
	to push all the argument registers to the stack upon entry. This
	fails if only some where initialized by the caller (in our case,
	the call gate).

	* tools/lib/mtalpha-sim/slrt.s,	
	* tools/lib/mtalpha-sim/callgate.s: Ensure all call argument
	registers are not empty.

	* tools/bin/spp,
	* tools/lib/mtalpha-sim/slrt.s,		
	* tools/lib/mtalpha-sim/callgate.s: Improve readability by using
	`clr' and `fclr' instead of `mov $31' and `cpys $f31'.

2009-08-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Better support for function calls on MT Alpha.

	* tools/bin/spp: Ensure that the registers used to pass function
	arguments are made non-empty early, in case they are pushed to the
	stack in a call before they are actually initialized for another
	call. This is exemplified in test `tools/tests/8_funs/f10.c'.	

2009-08-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Extend test suite.

	* tools/tests/8_funs/f10.c,
	* tools/tests/8_funs/jumps.c: New.

	* tools/tests/9_manyregs/genmany.c: New.
	* tools/tests/mkalltests.sh: Use it.

2009-08-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Homogeneize test suite.

	* tools/tests/1_create/x_extcreate2.sl: Rename to...	
	* tools/tests/1_create/x_extcreate2.c: ... here. Do not forget to
	initialize global arg.

2009-08-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Better support for function calls on MT Alpha.

	* tools/bin/spp: Support more branch forms in `rewritejsr'. Be
	more careful when "eating" instructions before `end'. Force a read
	to RV/FRV after the function call so that the memory load is
	guaranteed to complete before the register is reused.

2009-08-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Minor cosmetics in MT Alpha codegen
	
	* tools/bin/spp: Change messages in comments and assembly
	formatting.

2009-08-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	MT Alpha codegen optimization and fixes.

	* tools/bin/spp: Run `rewritejsr' before renaming specials. This
	requires to re-run `markused' after `rewritejsr' so that the
	renaming of specials can pick up any new use of RA or PV
	introduced by `rewritejsr'.  Also re-run `munchret' after
	`rewritejsr' so that extra loads before `end' can be optimized
	away.
	
2009-08-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	More MT Alpha code optimizations.
	
	* tools/bin/spp: Avoid using the legacy PV to pass thread
	arguments, by aliasing the legacy PV reg number to the top of the
	local register window. Re-enable renaming of PV.

2009-08-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	More tests for function calls.

	* tools/include/svp/compiler.h: Define `noinline'.

	* tools/tests/8_funs/f1.c,
	* tools/tests/8_funs/f2.c,
	* tools/tests/8_funs/f3.c,
	* tools/tests/8_funs/f4.c,
	* tools/tests/8_funs/f5.c,
	* tools/tests/8_funs/f6.c,
	* tools/tests/8_funs/f7.c,
	* tools/tests/8_funs/f8.c,
	* tools/tests/8_funs/f9.c: Simplify.
	* tools/tests/8_funs/bigret.c: New.

	* lib/tests/malloc/m3.c: New.

2009-08-22  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Reduce distribution archive size.

	* programs/benchmarks/fft/Makefile.am: Do not distribute
	sine/cosine table data. Let it be generated at build time.

2009-08-22  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Simplify interface to memory allocation.

	This changeset reinstates `malloc' and others as "regular" C
	functions, implemented as wrappers that delegate a call to
	`dlmalloc' etc via an exclusive place.
	
	* lib/src/callgate.h,		
	* lib/src/malloc_wrappers.c: New. Protect `dlmalloc' and others
	via a mutex place.

	* lib/mtalpha.mk: Update accordingly. Compile `malloc.c' with
	USE_DL_PREFIX.

	* lib/include/cmalloc.h,
	* lib/include/sac_helpers.h,
	* lib/tests/malloc/m1.c,
	* lib/tests/malloc/m2.c: Simplify.

2009-08-21  Simon Polstra <s.polstra@uva.nl>

        Added test for an externally defined thread with a single
	parameter. 

	* tools/tests/1_create/x_extcreate2.sl

2009-08-20  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Extend test suite.
	
	* tools/tests/8_funs/ochar.c: New.

2009-08-20  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Update copyright notices.

	* programs/benchmarks/livermore/k2-alt.c,
	* programs/benchmarks/livermore/k4-alt.c,
	* programs/demo/bitblt.c,
	* programs/demo/keyblit.c,
	* tools/lib/host-host-ptl/slrt.c,
	* tools/lib/host-host-seqc/lib_main.c,
	* tools/lib/host-host-seqc/load.c,
	* tools/lib/host-host-seqc/main.c,
	* tools/lib/host-host-seqc/slrt.c,
	* tools/lib/mtalpha-sim/main.c: Update header.

2009-08-20  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	One more little step towards C: support `main'.
	
	* tools/lib/mtalpha-sim/slrt.s: Print the return value of `main'
	before exiting, if it is not zero.

	* tools/tests/8_funs/main1.c,
	* tools/tests/8_funs/main2.c,	
	* tools/tests/8_funs/x_main.c: New. These check that the compiler
	supports `main' decently.

2009-08-19  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* tools/tests/8_funs/f8.c: Use types correctly.

2009-08-19  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Merge the following changes.

	2009-08-19  Raphael 'kena' Poss  <r.c.poss@uva.nl>
	
	* tools/lib/mtalpha-sim/callgate.s: Simplify. 

	2009-08-19  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	More support for function calls.
	
	* tools/bin/spp: Try hard to avoid spilling "preserved" registers
	to the frame. Try harder to remove frame setup and restore upon
	end of thread.

	* tools/lib/t-pppalpha/slimpl.m4: Pass function calls directly.
	
	2009-08-19  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Reduce support to function calls only.

	The previous changes would also rewrite calls to the divide
	routines; but this is not needed any more since the decision was
	made separately to implement a hardware integer divide instead.
	
	* tools/bin/spp: Reinstate the use of t10 and t11 for parameter
	passing.

	* tools/lib/t-pppalpha/include/sl_support.h: Lower the maximum
	number of locals again.

	2009-08-18  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Preliminary support for rewriting function calls in assembly.
	
	* tools/bin/spp,
	* tools/lib/mtalpha-sim/callgate.s,
	* tools/lib/t-pppalpha/include/sl_support.h: New features.

2009-08-19  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Reinstate the C divide operator.
	
	* tools/bin/cce.in: Enable use of the C divide operator for the
	macros in <svp/div.h> always.

2009-08-19  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Rebase on later toolchain.

	* deploy/alpha.h.patch,
	* deploy/alpha.md.patch,	
	* deploy/constraints.md.patch: New. These were tested on GCC 4.4x;
	they add support for a special "divide" instruction introduced on
	the MT alpha.

	* deploy/reqs.mk: Apply the patches when installing GCC.

	* deploy/Makefile-reqs.orig: Bump version numbers and change GCC
	mirror.

2009-08-17  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix script `slenv'.
	
	* deploy/slenv: Fix shell detection. Allow local configuration to
	add stuff as well.

2009-08-16  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Packaging fix.

	* tools/lib/mtalpha.mk,
	* tools/lib/seqc.mk: Distribute more source files.
	
2009-08-16  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Allow programs to override `main'.

	* tools/lib/mtalpha-sim/slrt.s: Jump to `main', not `t_main'.
	
	* tools/lib/mtalpha-sim/main.c: Implement `main' as a create of a
	family of one thread running `t_main'.

	* tools/lib/host-host-seqc/load.c: Encapsulate data loads in
	function `svp_start'.

	* tools/lib/host-host-seqc/slrt.c: Move `main' function to...	
	* tools/lib/host-host-seqc/main.c: ... here, and implement as a
	call to `svp_start'.
	
	* tools/lib/mtalpha.mk,
	* tools/lib/ptl.mk,	
	* tools/lib/seqc.mk: Update accordingly. Bundle `main.c' in
	`-lslc', so that it gets picked up by the linker unless the
	program overrides main.

	* tools/bin/cce.in: Link with -lslc always.

2009-08-16  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Sanitize the user interface.
	
	Rename the environment variables that override external tool
	locations to names ending with `_OVERRIDE'. This allows working in
	an environment where `CC' and/or `CXX' are defined to call `slc'
	instead of `gcc', such as when using Autoconf's `configure' script
	with CC=slc.

	* tools/bin/cce.in: Rename the environment variables.

	* tools/bin/Makefile.am: Update accordingly.

2009-08-16  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Make assembly optimizations more robust.

	* tools/bin/spp (pppalpha.splitsemi): Separate labels and
	instructions when they appear together.
	
	* tools/bin/spp (pppalpha.addwchll): Treat unconditional branches
	like labels as the register states are unknown upon return.

	* tools/bin/spp (pppalpha.prunenopend): Do not remove `swch' when
	it appears after a branch.

	* tools/bin/spp (pppalpha.protectend): Force a "nop" after a
	branch instruction and before "end".

2009-08-16  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix potential bug in function call gate for MT-alpha.

	* tools/lib/mtalpha-sim/callgate.s: Also initialize $f8 and $f9,
	as they are callee-save registers too.

2009-08-16  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix bug in compilation chain.
	
	* tools/bin/cce.in,	
	* tools/bin/slc.in: Avoid including `sl_support.h' when
	preprocessing assembly source (.S -> .s).
	
2009-08-16  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix bug in command line handling.
	
	* tools/bin/cce.in: Avoid creating an empty argument in
	$slc_debug_flags.

2009-08-16  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix bug in assembly optimizations.
	
	* tools/bin/spp (pppalpha.findlabels): Also look at directives,
	which may contain label uses (e.g. `.gprel').

2009-08-15  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Cleanup command line argument handling.

	* tools/bin/slc.in: Remove `-mutc' entirely. Also support files
	with extension .CPP.

2009-08-15  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Minor interface updates.

	* tools/bin/slc.in: Fixup handling of -t, -save-temps and
	KEEP. Propagate `$verbose' as SLC_VERBOSE so that `spp' can pick
	it up.

2009-08-15  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Update documentation.
	
	* tools/bin/slc.in: Do not document gcc flags which have unchanged
	behavior. Mention explicitly the status of -x and
	-nostdinc. Properly explain stages in the introduction. List input
	file types with behavior in full.

2009-08-15  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Make assembly optimization controllable.

	The following flags are introduced: `-fasmopt' (counterpart
	`-fno-asmopt') enable or disable assembly optimization. Any flags
	of the form `-fasmopt-NAME' (counterpart `-fno-asmopt-NAME')
	enable or disable a specific optimization. `-fasmopt-all' and
	`-fasmopt-none' are also recognized.
 	
	* tools/bin/slc.in: Capture command-line arguments `-fasmopt',
	`-fno-asmopt', `-fasmopt-*' and `-fno-asmopt-*'. Pass them to
	`filter2' accordingly. Document them.

	* tools/bin/spp (filter2): Recognize `asmopt' options from slc and
	run optimization stages conditionnally.

2009-08-15  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	More MT alpha code optimizations.	
	
	* tools/lib/t-utc0/slimpl.m4: Annotate the index register with an
	assembly comment, so that its special role can be picked up later
	by `spp'.

2009-08-15  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* tools/bin/slc.in: `-save-temps' implies `-t .', as for `gcc'.

2009-08-13  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	More MT alpha code optimizations.
	
	* tools/lib/t-utc0/slimpl.m4: Use type `long' for thread indexes.

2009-08-13  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Restore ability to process multiple input files.

	When `slc' was made more robust to special characters, a
	regression was introduced. This is now fixed.

	* tools/bin/slc.in: `"${inputs[@]}"', not `$inputs'.

2009-08-13  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix example.

	* programs/demo/keyblit.c: Place `sl_enddef' properly.

2009-08-13  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	More MT alpha code optimizations.

	* programs/bin/spp: Optimize default family settings away,
	including cases where there is no whitespace before the constant
	value. For every killed instruction, also eliminate the following
	`swch' if it is there.
 
2009-08-13  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	New demo program.

	The `keyblit' programs takes two arrays and one integer as
	input (the key), then applies the 2nd array (sprite) onto the
	1st (background) for every item of the sprite that is not equal to
	the key.
	
	* programs/demo/keyblit.c.d,
	* programs/demo/keyblit.c: New.

	* programs/demo/blitz.c.d,
	* programs/demo/blitz.c: Rename to...
	
	* programs/demo/bitblt.c.d,
	* programs/demo/bitblt.c: ... here.

	* programs/demo/Makefile.am: Update accordingly.

2009-08-13  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	New demo program.

	The `blitz' programs takes three arrays as input, then applies the
	3rd (sprite) onto the 1st (image) using the 2nd (mask), using the
	`bitblt' operation.
	
	* programs/demo/blitz.c.d,
	* programs/demo/blitz.c: New.

	* programs/demo/Makefile.am: Update accordingly.

2009-08-13  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Code optimizations for MT alpha.

	Assembly optimizations common to all MT targets are moved
	to the separate slc phase `E', so that they apply to all
	assembly sources regardless of origin. 

	This allows plugging `spp' transforms to assembly generated by the
	muTC core compiler, and "optimizing" handwritten assembly code,
	mostly to add missing `swch' annotations.
	
	* tools/bin/spp (pppalpha.filter): Recognize instructions
	separated by semicolons (new transform `splitsemi'). Move
	transforms `remdefaults', `addswchll', `addswchbr', `rmdupswch',
	`protectend' from stage `filter' to `filter2'. 

	* tools/bin/spp (pppalpha.filter2): Implement new transforms
	`findlabels', `killunusedlabels', `prunenopend' to clean up code
	generated by the muTC core compiler. 

	* tools/bin/cce.in: Enable use of `filter2' for both `ppp-*' and
	`utc0-*' targets.

	* tools/bin/spp (utc0): alias `pppalpha' since the code is now
	reused.
	
2009-08-13  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Protect against uses of `-g' and the like when they are unsupported.
	
	* tools/bin/cce.in,	
	* tools/bin/slc.in: Catch uses of `-g', `-p' and `-pg'; eat them
	away an print a message when they are not supported by the target.

2009-08-12  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Make shell scripts more robust. 

	This allows for example to run `slc -DPACKAGE_NAME=\"foo bar\"',
	as Automake does. Previously the spaces and quoted quotes would
	confuse command line construction in `slc'.
	
	* tools/bin/slr.in,
	* tools/bin/slc.in,
	* tools/bin/slt.in,
	* tools/bin/cce.in,
	* tools/bin/slt-many.in: Use array variables where appropriate.

	* tools/lib/r-host.sh,
	* tools/lib/r-mtsparc-sim.sh.in, 	
	* tools/lib/r-mtalpha-sim.sh.in: Properly handle the case where
	there are no remaining command-line parameters.

2009-08-12  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Reinstate preprocessor flags for dependency tracking.
	
	* tools/bin/slc.in: Reinstate the `-M' flags. Pass `-A'. Simplify.

2009-08-11  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Support new compilation stage `E'.

	This stage transforms `.s' files to `.t.s' before passing them to
	the assembler. This is groundwork to add generic assembly
	optimizations valid across compilers, such as adding 'swch' on MT
	asembly.
	
	* tools/bin/cce.in: Set `slc_filter1' and `slc_filter2' instead of `slc_filter'. 

	* tools/bin/slc.in: Use them. Support new flag `-S1'.

	* tools/bin/slt.in: Support the new exit code. Document accordingly.
	
2009-08-11  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Rename thread symbols in SL->mtalpha compilation.

	This makes it more obvious when looking at the generated assembly
	where the mangled names come from.
	
	* tools/bin/spp,	
	* tools/lib/t-pppalpha/include/sl_support.h: Change the prefix of
	renamed thread functions to `__slf_' instead of `_x_'.

2009-08-10  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Extend test suite.

	* lib/tests/assert.c: New.

2009-08-10  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Update copyright notices.
	
	* reheader.pl: Drop support for `sl_begin_header' and
	`sl_end_header'. Simplify.
	
	* Makefile.am: Adapt target `rehead', but avoid changing
	the (imported) source for `dlmalloc'.
	
	* lib/host-host-ptl/include/svp_os.h,
	* lib/host-host-seqc/include/svp_os.h,
	* lib/include/climits.h,
	* lib/include/cmalloc.h,
	* lib/include/cstdbool.h,
	* lib/include/cstddef.h,
	* lib/include/cstdint.h,
	* lib/include/sac_helpers.h,
	* lib/include/svp/argslot.h,
	* lib/include/svp/assert.h,
	* lib/include/svp/div.h,
	* lib/include/svp/io.h,
	* lib/include/svp/iomacros.h,
	* lib/include/svp/minimath.h,
	* lib/include/svp/perf.h,
	* lib/include/svp/roman.h,
	* lib/mtalpha-sim/include/svp_asmdiv.h,
	* lib/mtalpha-sim/include/svp_os.h,
	* lib/src/div.c,
	* lib/src/io.c,
	* lib/src/malloc_intrinsics.c,
	* lib/src/malloc_intrinsics.h,
	* lib/src/roman.c,
	* lib/src/strlib.c,
	* lib/tests/div/div.c,
	* lib/tests/div/div2.c,
	* lib/tests/div/div3.c,
	* lib/tests/malloc/m1.c,
	* lib/tests/malloc/m2.c,
	* lib/tests/sac1.c,
	* programs/benchmarks/blas/blas-test-saxpy.c,
	* programs/benchmarks/blas/blas_complex.h,
	* programs/benchmarks/blas/caxpy.c,
	* programs/benchmarks/blas/cdotc.c,
	* programs/benchmarks/blas/cdotu.c,
	* programs/benchmarks/blas/daxpy.c,
	* programs/benchmarks/blas/ddot.c,
	* programs/benchmarks/blas/saxpy.c,
	* programs/benchmarks/blas/sdot.c,
	* programs/benchmarks/blas/templates/xaxpy.c,
	* programs/benchmarks/blas/templates/xaxpyc.c,
	* programs/benchmarks/blas/templates/xdot.c,
	* programs/benchmarks/blas/templates/xdotc.c,
	* programs/benchmarks/blas/zaxpy.c,
	* programs/benchmarks/blas/zdotc.c,
	* programs/benchmarks/blas/zdotu.c,
	* programs/benchmarks/fft/fft.h,
	* programs/benchmarks/fft/fft_bench.c,
	* programs/benchmarks/fft/fft_bench1.c,
	* programs/benchmarks/fft/fft_bench2.c,
	* programs/benchmarks/fft/fft_extra.c,
	* programs/benchmarks/fft/fft_impl1.c,
	* programs/benchmarks/fft/fft_impl2.c,
	* programs/benchmarks/fft/fft_test.c,
	* programs/benchmarks/fft/fft_test1.c,
	* programs/benchmarks/fft/fft_test2.c,
	* programs/benchmarks/fft/gen_table_1.c,
	* programs/benchmarks/livermore/arrays.h,
	* programs/benchmarks/livermore/k1.c,
	* programs/benchmarks/livermore/k10.c,
	* programs/benchmarks/livermore/k11.c,
	* programs/benchmarks/livermore/k12.c,
	* programs/benchmarks/livermore/k13.c,
	* programs/benchmarks/livermore/k14.c,
	* programs/benchmarks/livermore/k2-alt.c,
	* programs/benchmarks/livermore/k2.c,
	* programs/benchmarks/livermore/k3.c,
	* programs/benchmarks/livermore/k4-alt.c,
	* programs/benchmarks/livermore/k4.c,
	* programs/benchmarks/livermore/k5.c,
	* programs/benchmarks/livermore/k6.c,
	* programs/benchmarks/livermore/k7.c,
	* programs/benchmarks/livermore/k8.c,
	* programs/benchmarks/livermore/k9.c,
	* programs/benchmarks/livermore/ll.h,
	* programs/benchmarks/livermore/main_bench.c,
	* programs/benchmarks/livermore/main_simple.c,
	* programs/benchmarks/livermore/main_test.c,
	* programs/benchmarks/nas/is/IS.c,
	* programs/benchmarks/nas/is/random.c,
	* programs/benchmarks/quicksort/am-quicksort-iterative.c,
	* programs/benchmarks/quicksort/am-quicksort.c,
	* programs/benchmarks/quicksort/sah-quicksort.c,
	* programs/benchmarks/sha/sha1.c,
	* programs/demo/10threads.c,
	* programs/demo/answer.c,
	* programs/demo/fibonacci.c,
	* programs/demo/fibre.c,
	* programs/demo/helloworld.c,
	* programs/demo/roman.c,
	* tools/include/svp/abort.h,
	* tools/include/svp/compiler.h,
	* tools/include/svp/fibre.h,
	* tools/include/svp/slr.h,
	* tools/include/svp/testoutput.h,
	* tools/lib/arggen.c,
	* tools/lib/host-host-ptl/include/ptl_config.h,
	* tools/lib/host-host-ptl/include/ptl_debug.h,
	* tools/lib/host-host-ptl/include/ptl_deps.h,
	* tools/lib/host-host-ptl/include/ptl_svp.h,
	* tools/lib/host-host-ptl/include/ptl_vars.h,
	* tools/lib/host-host-ptl/ptl_debug.cc,
	* tools/lib/host-host-ptl/ptl_svp.cc,
	* tools/lib/host-host-ptl/ptl_vars.cc,
	* tools/lib/host-host-ptl/slrt.c,
	* tools/lib/host-host-seqc/load.c,
	* tools/lib/host-host-seqc/slrt.c,
	* tools/lib/t-pppalpha/include/sl_support.h,
	* tools/lib/t-ptl/include/sl_support.h,
	* tools/lib/t-seqc/include/sl_support.h,
	* tools/lib/t-utc0/include/sl_support.h,
	* tools/tests/0_slr/args.c,
	* tools/tests/0_slr/fibre.c,
	* tools/tests/0_trivial/emptymain.c,
	* tools/tests/0_trivial/if.c,
	* tools/tests/0_trivial/if2.c,
	* tools/tests/0_trivial/if3.c,
	* tools/tests/0_trivial/nop.c,
	* tools/tests/0_trivial/x_abort.c,
	* tools/tests/0_trivial/x_empty.c,
	* tools/tests/0_trivial/x_illinsn.c,
	* tools/tests/0_trivial/x_infloop.c,
	* tools/tests/0_trivial/x_invcpp.c,
	* tools/tests/0_trivial/x_invm4.c,
	* tools/tests/0_trivial/x_invsyntax.c,
	* tools/tests/0_trivial/x_undefsym.c,
	* tools/tests/1_create/cr1.c,
	* tools/tests/1_create/crif.c,
	* tools/tests/1_create/crif2.c,
	* tools/tests/1_create/crif3.c,
	* tools/tests/1_create/crnop.c,
	* tools/tests/1_create/crnop2.c,
	* tools/tests/1_create/crnop3.c,
	* tools/tests/1_create/crnopdefs.c,
	* tools/tests/1_create/endth.c,
	* tools/tests/1_create/fididreuse.c,
	* tools/tests/1_create/x_crnosync.c,
	* tools/tests/1_create/x_crnotstm.c,
	* tools/tests/1_create/x_extcreate.c,
	* tools/tests/1_create/x_extcreatedefs.c,
	* tools/tests/1_create/x_inffamily.c,
	* tools/tests/1_create/x_invsync.c,
	* tools/tests/1_create/x_nested.c,
	* tools/tests/1_create/x_nocreate.c,
	* tools/tests/1_create/x_nothread.c,
	* tools/tests/2_args/args1.c,
	* tools/tests/2_args/argshadow.c,
	* tools/tests/2_args/delayshared.c,
	* tools/tests/2_args/globpass.c,
	* tools/tests/2_args/shareuse.c,
	* tools/tests/2_args/sum.c,
	* tools/tests/2_args/sumunsigned.c,
	* tools/tests/2_args/twoways.c,
	* tools/tests/2_args/useafter.c,
	* tools/tests/2_args/useafter2.c,
	* tools/tests/2_args/useafter3.c,
	* tools/tests/2_args/useafter4.c,
	* tools/tests/2_args/useexit2.c,
	* tools/tests/2_args/x_addrarg.c,
	* tools/tests/2_args/x_addrparm.c,
	* tools/tests/2_args/x_addrparm2.c,
	* tools/tests/2_args/x_argnr.c,
	* tools/tests/2_args/x_argnr2.c,
	* tools/tests/2_args/x_argscope.c,
	* tools/tests/2_args/x_deadlock.c,
	* tools/tests/2_args/x_dupdecl.c,
	* tools/tests/2_args/x_dupdecl2.c,
	* tools/tests/2_args/x_glnoinit.c,
	* tools/tests/2_args/x_invinit.c,
	* tools/tests/2_args/x_invinit2.c,
	* tools/tests/2_args/x_invsh1.c,
	* tools/tests/2_args/x_invsh2.c,
	* tools/tests/2_args/x_invsh3.c,
	* tools/tests/2_args/x_nothread.c,
	* tools/tests/2_args/x_wrglarg.c,
	* tools/tests/2_args/x_wrglparm.c,
	* tools/tests/3_mem/crdefaults.c,
	* tools/tests/3_mem/floatsh.c,
	* tools/tests/3_mem/floatsh1.c,
	* tools/tests/3_mem/floatsh2.c,
	* tools/tests/3_mem/if.c,
	* tools/tests/3_mem/indcreate.c,
	* tools/tests/3_mem/sideeffect.c,
	* tools/tests/8_funs/add.c,
	* tools/tests/8_funs/f1.c,
	* tools/tests/8_funs/f2.c,
	* tools/tests/8_funs/f3.c,
	* tools/tests/8_funs/f4.c,
	* tools/tests/8_funs/f5.c,
	* tools/tests/8_funs/f6.c,
	* tools/tests/8_funs/f7.c,
	* tools/tests/8_funs/f8.c,
	* tools/tests/8_funs/f9.c,
	* tools/tests/livermore8.c: Update copyright notices.

2009-08-10  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Bootstrap new toolchain version.
	
	* configure.ac: Bump version number.
	
	* doc/NEWS.txt: Document major changes.

	* doc/HACKING.txt: Make `.sl' disappear.

2009-08-10  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Remove old files.
	
	* tools/tests/0_slr/args-old.sl,
	* tools/tests/0_trivial/nop-old.sl,
	* tools/tests/0_trivial/x_abort-old.sl,
	* tools/tests/1_create/crnop-old.sl,
	* tools/tests/1_create/crnop2-old.sl,
	* tools/tests/1_create/crnop3-old.sl,
	* tools/tests/1_create/crnopdefs-old.sl,
	* tools/tests/1_create/x_crnosync-old.sl,
	* tools/tests/1_create/x_inffamily-old.sl,
	* tools/tests/2_args/args1-old.sl,
	* tools/tests/2_args/delayshared-old.sl,
	* tools/tests/2_args/globpass-old.sl,
	* tools/tests/2_args/useexit2-old.sl,
	* tools/tests/3_mem/sideeffect-old.sl,
	* tools/tests/8_funs/add-old.sl,
	* tools/tests/8_funs/f1-old.sl,
	* tools/tests/8_funs/f2-old.sl,
	* tools/tests/8_funs/f3-old.sl,
	* tools/tests/8_funs/f4-old.sl,
	* tools/tests/8_funs/f5-old.sl,
	* tools/tests/8_funs/f6-old.sl,
	* tools/tests/8_funs/f7-old.sl,
	* tools/tests/8_funs/f8-old.sl,	
	* tools/tests/8_funs/f9-old.sl: Remove test code, as is now
	replaced by `.c' files with CPP syntax.

2009-08-10  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Minor packaging fixes. `make distcheck' passes.

	* programs/benchmarks/fft/Makefile.am: Typo: `fft.h'.
	
	* tools/tests/Makefile.am: Distribute `0_slr/fibre.c.d'.

2009-08-10  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	C-ify the Livermore loops code.

	* programs/benchmarks/livermore/k1.sl,
	* programs/benchmarks/livermore/k10.sl,
	* programs/benchmarks/livermore/k11.sl,
	* programs/benchmarks/livermore/k12.sl,
	* programs/benchmarks/livermore/k13.sl,
	* programs/benchmarks/livermore/k14.sl,
	* programs/benchmarks/livermore/k2-alt.sl,
	* programs/benchmarks/livermore/k2.sl,
	* programs/benchmarks/livermore/k3.sl,
	* programs/benchmarks/livermore/k4-alt.sl,
	* programs/benchmarks/livermore/k4.sl,
	* programs/benchmarks/livermore/k5.sl,
	* programs/benchmarks/livermore/k6.sl,
	* programs/benchmarks/livermore/k7.sl,
	* programs/benchmarks/livermore/k8.sl,
	* programs/benchmarks/livermore/k9.sl,
	* programs/benchmarks/livermore/ll.slh,
	* programs/benchmarks/livermore/main_bench.sl,
	* programs/benchmarks/livermore/main_simple.sl,
	* programs/benchmarks/livermore/main_test.sl: Rename to...

	* programs/benchmarks/livermore/k1.c,
	* programs/benchmarks/livermore/k10.c,
	* programs/benchmarks/livermore/k11.c,
	* programs/benchmarks/livermore/k12.c,
	* programs/benchmarks/livermore/k13.c,
	* programs/benchmarks/livermore/k14.c,
	* programs/benchmarks/livermore/k2-alt.c,
	* programs/benchmarks/livermore/k2.c,
	* programs/benchmarks/livermore/k3.c,
	* programs/benchmarks/livermore/k4-alt.c,
	* programs/benchmarks/livermore/k4.c,
	* programs/benchmarks/livermore/k5.c,
	* programs/benchmarks/livermore/k6.c,
	* programs/benchmarks/livermore/k7.c,
	* programs/benchmarks/livermore/k8.c,
	* programs/benchmarks/livermore/k9.c,
	* programs/benchmarks/livermore/ll.h,
	* programs/benchmarks/livermore/main_bench.c,
	* programs/benchmarks/livermore/main_simple.c,
	* programs/benchmarks/livermore/main_test.c: ... here. Use CPP
	syntax where appropriate.

	* programs/benchmarks/livermore/Makefile.am,
	* programs/benchmarks/livermore/genmk.sh: Update accordingly.

2009-08-10  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	C-ify the NAS IS code.
	
	* programs/benchmarks/nas/is/IS.sl,
	* programs/benchmarks/nas/is/random.sl: Rename to...

	* programs/benchmarks/nas/is/IS.c,	
	* programs/benchmarks/nas/is/random.c: ... here. Use CPP syntax
	where appropriate.
	
	* programs/benchmarks/nas/is/Makefile.am: Update accordingly.


2009-08-10  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	C-ify the SHA code.
	
	* programs/benchmarks/sha/sha1.sl: Rename to...
	
	* programs/benchmarks/sha/sha1.c: ... here. Use CPP syntax where
	appropriate.

	* programs/benchmarks/sha/Makefile.am: Update accordingly.

2009-08-10  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	C-ify the quicksort code.
	
	* programs/benchmarks/quicksort/am-quicksort.c, 
	* programs/benchmarks/quicksort/am-quicksort-iterative.c,
	* programs/benchmarks/quicksort/sah-quicksort.c: Rename to...

	* programs/benchmarks/quicksort/am-quicksort.c, 
	* programs/benchmarks/quicksort/am-quicksort-iterative.c,
	* programs/benchmarks/quicksort/sah-quicksort.c: ... here. Use CPP
	syntax where appropriate.

	* programs/benchmarks/quicksort/Makefile.am: Update accordingly.

2009-08-10  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	C-ify the BLAS code.
	
	* programs/benchmarks/blas/blas-test-saxpy.sl,
	* programs/benchmarks/blas/caxpy.sl,
	* programs/benchmarks/blas/cdotc.sl,
	* programs/benchmarks/blas/cdotu.sl,
	* programs/benchmarks/blas/daxpy.sl,
	* programs/benchmarks/blas/ddot.sl,
	* programs/benchmarks/blas/saxpy.sl,
	* programs/benchmarks/blas/sdot.sl,
	* programs/benchmarks/blas/templates/xaxpy.sl,
	* programs/benchmarks/blas/templates/xaxpyc.sl,
	* programs/benchmarks/blas/templates/xdot.sl,
	* programs/benchmarks/blas/templates/xdotc.sl,
	* programs/benchmarks/blas/zaxpy.sl,
	* programs/benchmarks/blas/zdotc.sl,
	* programs/benchmarks/blas/zdotu.sl,
	* programs/benchmarks/blas/complex.slh: Rename to...

	* programs/benchmarks/blas/blas-test-saxpy.c,
	* programs/benchmarks/blas/caxpy.c,
	* programs/benchmarks/blas/cdotc.c,
	* programs/benchmarks/blas/cdotu.c,
	* programs/benchmarks/blas/daxpy.c,
	* programs/benchmarks/blas/ddot.c,
	* programs/benchmarks/blas/saxpy.c,
	* programs/benchmarks/blas/sdot.c,
	* programs/benchmarks/blas/templates/xaxpy.c,
	* programs/benchmarks/blas/templates/xaxpyc.c,
	* programs/benchmarks/blas/templates/xdot.c,
	* programs/benchmarks/blas/templates/xdotc.c,
	* programs/benchmarks/blas/zaxpy.c,
	* programs/benchmarks/blas/zdotc.c,
	* programs/benchmarks/blas/zdotu.c,	
	* programs/benchmarks/blas/blas_complex.h: ... here. Use CPP
	syntax where appropriate.

	* programs/benchmarks/blas/Makefile.am: Update accordingly.
	
2009-08-10  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* lib/include/svp/perf.h: Fix `__attribute__' syntax.

2009-08-10  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Properly search for includes.

	The default search path for includes does *not* contain the
	current directory; only the source file's directory. This implies
	an extra `-I.' when the build directory contains generated headers
	used from the source directory.
	
	* sl.mk,
	* tools/bin/slt.in: Use `-I.' where appropriate.

2009-08-10  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	C-ify the FFT code.
	
	* programs/benchmarks/fft/fft.slh,
	* programs/benchmarks/fft/fft_bench.sl,
	* programs/benchmarks/fft/fft_bench1.sl,
	* programs/benchmarks/fft/fft_bench2.sl,
	* programs/benchmarks/fft/fft_extra.sl,
	* programs/benchmarks/fft/fft_impl1.sl,
	* programs/benchmarks/fft/fft_impl2.sl,
	* programs/benchmarks/fft/fft_test.sl,
	* programs/benchmarks/fft/fft_test1.sl,
	* programs/benchmarks/fft/fft_test2.sl: Rename to...

	* programs/benchmarks/fft/fft.h,
	* programs/benchmarks/fft/fft_bench.c,
	* programs/benchmarks/fft/fft_bench1.c,
	* programs/benchmarks/fft/fft_bench2.c,
	* programs/benchmarks/fft/fft_extra.c,
	* programs/benchmarks/fft/fft_impl1.c,
	* programs/benchmarks/fft/fft_impl2.c,
	* programs/benchmarks/fft/fft_test.c,
	* programs/benchmarks/fft/fft_test1.c,	
	* programs/benchmarks/fft/fft_test2.c: ... here. Use CPP syntax
	where appropriate.

	* programs/benchmarks/fft/Makefile.am: Update accordingly. Drop
	debug flag and allow (some) optimization for the table generators.
	
2009-08-07  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Start C-ifying in `programs/'.
	
	* sl.mk: Build from `.c' instead of `.sl'.
		
	* programs/demo/fibre.sl,
	* programs/demo/fibre.sl.d1,
	* programs/demo/fibre.sl.d2,
	* programs/demo/fibre.sl.d3,
	* programs/demo/answer.sl,
	* programs/demo/helloworld.sl,
	* programs/demo/fibonacci.sl,
	* programs/demo/roman.sl,
	* programs/demo/10threads.sl: Rename to...

	* programs/demo/fibre.c,
	* programs/demo/fibre.c.d1,
	* programs/demo/fibre.c.d2,
	* programs/demo/fibre.c.d3,
	* programs/demo/answer.c,
	* programs/demo/helloworld.c,
	* programs/demo/fibonacci.c,
	* programs/demo/roman.c,	
	* programs/demo/10threads.c: ... here. Use CPP syntax where
	appropriate.
	
	* programs/demo/Makefile.am: Update accordingly.

2009-08-07  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix `svp_assert'.

	Due to the way the `printf' macro works (uses `typeof' internally)
	it is not possible to pass a literal character string as a
	formatted argument without casting it to `const char*'
	explicitly. Since `svp_assert' now uses `printf' this restriction
	applies.
	
	* lib/include/svp/assert.h: Cast the two strings appropriately.

2009-08-07  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Use explicit width integer types more.

	* lib/include/svp/div.h,
	* lib/include/svp/io.h,
	* lib/include/svp/iomacros.h,
	* lib/src/div.c,
	* lib/src/io.c: Use `int64_t' and `uint64_t' where
	appropriate. Use `long' in a few places to avoid unnecessary
	truncation in code generation.

2009-08-07  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Minor fix to automated test suite.

	* tools/tests/mkalltests.sh,
	* lib/tests/mkalltests.sh: Prevent capturing sources that result
	from previous test runs.

2009-08-07  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	C-ify test suite in `lib/'.
	
	* lib/tests/div/div.sl,
	* lib/tests/div/div2.sl,
	* lib/tests/div/div3.sl,
	* lib/tests/malloc/m1.sl,
	* lib/tests/malloc/m2.sl,	
	* lib/tests/sac1.sl: Rename to...

	* lib/tests/div/div.c,
	* lib/tests/div/div2.c,
	* lib/tests/div/div3.c,
	* lib/tests/malloc/m1.c,
	* lib/tests/malloc/m2.c,	
	* lib/tests/sac1.c: ... here. Use CPP syntax where appropriate.

	* lib/tests/div/div.c,
	* lib/tests/div/div2.c,
	* lib/tests/div/div3.c: Use types with specific widths.

2009-08-07  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Make Bash 4 happy.

	* tools/lib/r-host.sh,
	* tools/lib/r-mtalpha-sim.sh.in,	
	* tools/lib/r-mtsparc-sim.sh.in: Protect expansions of `$*' and
	`$@' since Bash 4 complains if there are no positional arguments.

2009-08-07  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Simplify more.
	
	* tools/bin/cce.in: Do not add the default includes to
	`slc_cflags'.

2009-08-07  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Remove support for compiling `.sl' files.

	* tools/bin/slt.in,
	* tools/bin/slt-many.in,
	* tools/bin/slc.in: Simplify.
	
	* tools/tests/mkalltests.sh,
	* lib/tests/mkalltests.sh: Use `.c' files only.
	
2009-08-07  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Use new header names more.
	
	* tools/include/svp/fibre.h,
	* tools/include/svp/slr.h,
	* tools/lib/arggen.c: Use `.h' instead of `.slh'.

2009-08-07  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Rationalize compilation process. This makes µTC-ptl work again.

	* tools/include/slc.m4,	
	* tools/bin/cce.in: Include `sl_support.h' earlier (before M4 is
	run), since the first preprocessor pass should see the C++
	includes for µTC-ptl.

	* tools/lib/t-pppalpha/include/sl_support.h,
	* tools/lib/t-ptl/include/sl_support.h,
	* tools/lib/t-utc0/include/sl_support.h,	
	* tools/lib/t-seqc/include/sl_support.h: Protect the `#define'
	directives that must be visible after M4 is run. 

	* tools/lib/t-ptl/slimpl.m4: Use `0' instead of `NULL' since
	`NULL' is not visible any more when M4 runs.

	* tools/lib/ptl.mk,	
	* tools/lib/seqc.mk: Use `slc' to compile `slrt.c' since it
	requires the contents of `sl_support.h' and this now requires the
	M4 pass.

	* tools/lib/host-host-seqc/slrt.c: Do not include `sl_support.h'
	any more since it is automatically prepended by `slc' now.

	* tools/lib/host-host/ptl/slrt.c: Properly declare `lib_main' with
	C linkage.
	
2009-08-07  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix some minor bugs.

	* tools/include/svp/testoutput.h: `compiler.h' is found in `svp/',
	not `lib/'.
	
	* lib/include/svp/iomacros.h: Move include of `cstddef.h' for
	`size_t' to...	
	* lib/include/svp/io.h: ... here, because it is used to declare
	`svp_io_write'.

2009-08-05  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Minor fix for C++ implementation.

	* tools/include/svp/testoutput.h: Properly cast in C++ version of
	`output_bytes'.

2009-08-05  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	C-ize sources in 'lib/'. Minor interface updates.
	
	* lib/src/div.sl,
	* lib/src/io.sl,
	* lib/src/roman.sl: Rename to...
	
	* lib/src/div.c,
	* lib/src/io.c,	
	* lib/src/roman.c: ... here. Use CPP syntax where appropriate.

	* lib/mtalpha.mk,
	* lib/seqc.mk,
	* lib/ptl.mk: Update accordingly.
	
	* lib/include/cstdint.h: Do not try to include `<cstdint>' in C++
	mode since it is not (yet) defined in ISO C++. Be optimistic and
	assume `<stdint.h>' is always available.

	* lib/include/svp/io.h,	
	* lib/include/svp/iomacros.h,	
	* lib/src/io.c: Use `long' instead of `long long', since `long' is
	the canonical largest integer type that fits in a register and we
	don't support multi-register types yet.

	* tools/include/svp/testoutput.h: Use `likely' and `unlikely'
	where appropriate.
	
2009-08-05  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Kill extension .slh in 'lib/'.
	
	* lib/include/svp/roman.slh, 
	* lib/include/svp/perf.slh, 
	* lib/include/svp/assert.slh, 
	* lib/include/svp/div.slh, 
	* lib/include/svp/io.slh, 
	* lib/include/svp/iomacros.slh, 
	* lib/include/sac_helpers.slh, 
	* lib/include/cstdint.slh, 
	* lib/include/cstddef.slh, 
	* lib/include/cmalloc.slh, 
	* lib/include/cstdbool.slh, 
	* lib/include/climits.slh: Rename to...

	* lib/include/svp/roman.h, 
	* lib/include/svp/perf.h, 
	* lib/include/svp/assert.h, 
	* lib/include/svp/div.h, 
	* lib/include/svp/io.h, 
	* lib/include/svp/iomacros.h, 
	* lib/include/sac_helpers.h, 
	* lib/include/cstdint.h, 
	* lib/include/cstddef.h, 
	* lib/include/cmalloc.h, 
	* lib/include/cstdbool.h, 
	* lib/include/climits.h: ... here. Use CPP syntax where
	applicable.

2009-08-04  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Get rid of extension .sl in `tools/'.
	
	* tools/tests/0_trivial/emptymain.sl,
	* tools/tests/0_trivial/if.sl,
	* tools/tests/0_trivial/if2.sl,
	* tools/tests/0_trivial/if3.sl,
	* tools/tests/0_trivial/x_empty.sl,
	* tools/tests/0_trivial/x_illinsn.sl,
	* tools/tests/0_trivial/x_infloop.sl,
	* tools/tests/0_trivial/x_invcpp.sl,
	* tools/tests/0_trivial/x_invm4.sl,
	* tools/tests/0_trivial/x_invsyntax.sl,
	* tools/tests/0_trivial/x_undefsym.sl,
	* tools/tests/1_create/cr1.sl,
	* tools/tests/1_create/crif.sl,
	* tools/tests/1_create/crif2.sl,
	* tools/tests/1_create/crif3.sl,
	* tools/tests/1_create/endth.sl,
	* tools/tests/1_create/fididreuse.sl,
	* tools/tests/1_create/x_crnotstm.sl,
	* tools/tests/1_create/x_extcreate.sl,
	* tools/tests/1_create/x_extcreatedefs.sl,
	* tools/tests/1_create/x_invsync.sl,
	* tools/tests/1_create/x_nested.sl,
	* tools/tests/1_create/x_nocreate.sl,
	* tools/tests/1_create/x_nothread.sl,
	* tools/tests/2_args/argshadow.sl,
	* tools/tests/2_args/shareuse.sl,
	* tools/tests/2_args/sum.sl,
	* tools/tests/2_args/sumunsigned.sl,
	* tools/tests/2_args/twoways.sl,
	* tools/tests/2_args/useafter.sl,
	* tools/tests/2_args/useafter2.sl,
	* tools/tests/2_args/useafter3.sl,
	* tools/tests/2_args/useafter4.sl,
	* tools/tests/2_args/x_addrarg.sl,
	* tools/tests/2_args/x_addrparm.sl,
	* tools/tests/2_args/x_addrparm2.sl,
	* tools/tests/2_args/x_argnr.sl,
	* tools/tests/2_args/x_argnr2.sl,
	* tools/tests/2_args/x_argscope.sl,
	* tools/tests/2_args/x_deadlock.sl,
	* tools/tests/2_args/x_dupdecl.sl,
	* tools/tests/2_args/x_dupdecl2.sl,
	* tools/tests/2_args/x_glnoinit.sl,
	* tools/tests/2_args/x_invinit.sl,
	* tools/tests/2_args/x_invinit2.sl,
	* tools/tests/2_args/x_invsh1.sl,
	* tools/tests/2_args/x_invsh2.sl,
	* tools/tests/2_args/x_invsh3.sl,
	* tools/tests/2_args/x_nothread.sl,
	* tools/tests/2_args/x_wrglarg.sl,
	* tools/tests/2_args/x_wrglparm.sl,
	* tools/tests/3_mem/crdefaults.sl,
	* tools/tests/3_mem/floatsh.sl,
	* tools/tests/3_mem/floatsh1.sl,
	* tools/tests/3_mem/floatsh2.sl,
	* tools/tests/3_mem/if.sl,
	* tools/tests/3_mem/indcreate.sl,
	* tools/tests/livermore8.sl: Rename to...

	* tools/tests/0_trivial/emptymain.c,
	* tools/tests/0_trivial/if.c,
	* tools/tests/0_trivial/if2.c,
	* tools/tests/0_trivial/if3.c,
	* tools/tests/0_trivial/x_empty.c,
	* tools/tests/0_trivial/x_illinsn.c,
	* tools/tests/0_trivial/x_infloop.c,
	* tools/tests/0_trivial/x_invcpp.c,
	* tools/tests/0_trivial/x_invm4.c,
	* tools/tests/0_trivial/x_invsyntax.c,
	* tools/tests/0_trivial/x_undefsym.c,
	* tools/tests/1_create/cr1.c,
	* tools/tests/1_create/crif.c,
	* tools/tests/1_create/crif2.c,
	* tools/tests/1_create/crif3.c,
	* tools/tests/1_create/endth.c,
	* tools/tests/1_create/fididreuse.c,
	* tools/tests/1_create/x_crnotstm.c,
	* tools/tests/1_create/x_extcreate.c,
	* tools/tests/1_create/x_extcreatedefs.c,
	* tools/tests/1_create/x_invsync.c,
	* tools/tests/1_create/x_nested.c,
	* tools/tests/1_create/x_nocreate.c,
	* tools/tests/1_create/x_nothread.c,
	* tools/tests/2_args/argshadow.c,
	* tools/tests/2_args/shareuse.c,
	* tools/tests/2_args/sum.c,
	* tools/tests/2_args/sumunsigned.c,
	* tools/tests/2_args/twoways.c,
	* tools/tests/2_args/useafter.c,
	* tools/tests/2_args/useafter2.c,
	* tools/tests/2_args/useafter3.c,
	* tools/tests/2_args/useafter4.c,
	* tools/tests/2_args/x_addrarg.c,
	* tools/tests/2_args/x_addrparm.c,
	* tools/tests/2_args/x_addrparm2.c,
	* tools/tests/2_args/x_argnr.c,
	* tools/tests/2_args/x_argnr2.c,
	* tools/tests/2_args/x_argscope.c,
	* tools/tests/2_args/x_deadlock.c,
	* tools/tests/2_args/x_dupdecl.c,
	* tools/tests/2_args/x_dupdecl2.c,
	* tools/tests/2_args/x_glnoinit.c,
	* tools/tests/2_args/x_invinit.c,
	* tools/tests/2_args/x_invinit2.c,
	* tools/tests/2_args/x_invsh1.c,
	* tools/tests/2_args/x_invsh2.c,
	* tools/tests/2_args/x_invsh3.c,
	* tools/tests/2_args/x_nothread.c,
	* tools/tests/2_args/x_wrglarg.c,
	* tools/tests/2_args/x_wrglparm.c,
	* tools/tests/3_mem/crdefaults.c,
	* tools/tests/3_mem/floatsh.c,
	* tools/tests/3_mem/floatsh1.c,
	* tools/tests/3_mem/floatsh2.c,
	* tools/tests/3_mem/if.c,
	* tools/tests/3_mem/indcreate.c,
	* tools/tests/livermore8.c: ... here.

2009-08-04  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Continue removing dependency on `lib/' from `tools/'
	
	* tools/tests/2_args/args1.sl: Rename to...
	* tools/tests/2_args/args1-old.sl: ... here, and copy to...	
	* tools/tests/2_args/args1.c: ...here. Use new header style, drop
	dependency on `svp_assert' and use `svp_abort' from
	`<svp/abort.h>' directly.

2009-08-04  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	More C-ification of SL code in `tools'.
	
	* tools/lib/arggen.sl: Rename to...
	* tools/lib/arggen.c: ... here. Use new output interface.

	* tools/bin/slr.in,
	* tools/lib/Makefile.am: Update accordingly.

	* tools/tests/7_args/gencall.py: Use new test output interface.
	* tools/tests/mkalltests.sh: Generate files with extension .c
	instead of .sl from `gencall.py'.

	* tools/tests/0_slr/args.c,
	* tools/tests/0_slr/fibre.c,	
	* tools/tests/2_args/delayshared.c: Use new test output interface.

	* tools/tests/0_slr/fibre.c.d: New. This data file is required by
	the `SLT_RUN' definition in `fibre.c'.
	
	* tools/tests/1_create/x_crnosync.sl,
	* tools/tests/3_mem/sideeffect.sl,
	* tools/tests/8_funs/add.sl,
	* tools/tests/8_funs/f1.sl,
	* tools/tests/8_funs/f2.sl,
	* tools/tests/8_funs/f3.sl,
	* tools/tests/8_funs/f4.sl,
	* tools/tests/8_funs/f5.sl,
	* tools/tests/8_funs/f6.sl,
	* tools/tests/8_funs/f7.sl,
	* tools/tests/8_funs/f8.sl,
	* tools/tests/8_funs/f9.sl: Rename to...

	* tools/tests/1_create/x_crnosync-old.sl,
	* tools/tests/3_mem/sideeffect-old.sl,
	* tools/tests/8_funs/add-old.sl,
	* tools/tests/8_funs/f1-old.sl,
	* tools/tests/8_funs/f2-old.sl,
	* tools/tests/8_funs/f3-old.sl,
	* tools/tests/8_funs/f4-old.sl,
	* tools/tests/8_funs/f5-old.sl,
	* tools/tests/8_funs/f6-old.sl,
	* tools/tests/8_funs/f7-old.sl,
	* tools/tests/8_funs/f8-old.sl,
	* tools/tests/8_funs/f9-old.sl: ... here, and copy to...
	
	* tools/tests/1_create/x_crnosync.c,
	* tools/tests/3_mem/sideeffect.c,
	* tools/tests/8_funs/add.c,
	* tools/tests/8_funs/f1.c,
	* tools/tests/8_funs/f2.c,
	* tools/tests/8_funs/f3.c,
	* tools/tests/8_funs/f4.c,
	* tools/tests/8_funs/f5.c,
	* tools/tests/8_funs/f6.c,
	* tools/tests/8_funs/f7.c,
	* tools/tests/8_funs/f8.c,	
	* tools/tests/8_funs/f9.c: ... here. Use new header syntax and
	test output interface.

	* tools/tests/m-problem.sl: Remove. Was duplicate of
	`3_mem/sideeffect.sl'.

2009-08-03  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Refactor headers in `tools/include'. Update test suite accordingly.
	
	* tools/include/fibre.h,
	* tools/include/slr.h: Rename to...
	* tools/include/svp/fibre.h,
	* tools/include/svp/slr.h: ... here.
	
	* tools/include/slr.slh,
	* tools/include/fibre.slh: Update accordingly.

	* tools/include/svp/lib.slh: Copy to...	
	* tools/include/svp/compiler.h: here. Use CPP syntax more. Define
	`nop' locally. Move `svp_abort' definition to...

	* tools/include/svp/abort.h: here.

	* tools/include/svp/abort.h,
	* tools/include/svp/compiler.h: Warn if `__GNUC__' is not defined.

	* tools/include/svp/lib.slh: Deprecate.

	* tools/tests/0_trivial/x_abort.sl,
	* tools/tests/0_trivial/nop.sl,
	* tools/tests/1_create/crnop.sl,
	* tools/tests/1_create/crnop2.sl,
	* tools/tests/1_create/crnop3.sl,
	* tools/tests/1_create/crnopdefs.sl,
	* tools/tests/1_create/x_inffamily.sl,
	* tools/tests/2_args/delayshared.sl,
	* tools/tests/2_args/globpass.sl,
	* tools/tests/2_args/useexit2.sl: Rename to...
	
	* tools/tests/0_trivial/x_abort-old.sl,
	* tools/tests/0_trivial/nop-old.sl,
	* tools/tests/1_create/crnop-old.sl,
	* tools/tests/1_create/crnop2-old.sl,
	* tools/tests/1_create/crnop3-old.sl,
	* tools/tests/1_create/crnopdefs-old.sl,
	* tools/tests/1_create/x_inffamily-old.sl,
	* tools/tests/2_args/delayshared-old.sl,
	* tools/tests/2_args/globpass-old.sl,
	* tools/tests/2_args/useexit2-old.sl: ... here, and copy to...

	* tools/tests/0_trivial/x_abort.c,
	* tools/tests/0_trivial/nop.c,
	* tools/tests/1_create/crnop.c,
	* tools/tests/1_create/crnop2.c,
	* tools/tests/1_create/crnop3.c,
	* tools/tests/1_create/crnopdefs.c,
	* tools/tests/1_create/x_inffamily.c,
	* tools/tests/2_args/delayshared.c,
	* tools/tests/2_args/globpass.c,
	* tools/tests/2_args/useexit2.c: ... here. Use new headers.

	* tests.mk: Also recognize .c as a unit test extension. Define
	`C_LOG_COMPILER' the same as `SL_LOG_COMPILER'.

	* tools/tests/mkalltests.sh: Pull .c files into the test suite,
	but exclude `.t.' temporaries.

2009-08-03  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Continue deprecating `.slh' stuff in `tools/'.

	* tools/include/fibre.slh: Copy to...
	* tools/include/fibre.h: here. Use CPP syntax more. Do not include
	`svp/assert.slh' since it is not needed.

	* tools/include/fibre.slh: Deprecate.

	* tools/tests/0_slr_args: Rename to...
	* tools/tests/0_slr: here.
	
	* tools/tests/0_slr/fibre.c: New.

2009-08-03  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Start deprecating `.slh' stuff in `tools/'.
	
	* tools/include/slc.m4: Introduce new macros `sl_cquote' and
	`sl_cdquote' that expands to C's single and double quotes,
	respectively.
	
	* tools/include/slr.slh: Copy to...
	* tools/include/slr.h: here. Use m4 macros instead of CPP macros
	for the `__slr' stuff. Use `sl_cdquote' where appropriate to
	defeat the extra C string quoting performed by `slc' before
	running M4.

	* tools/include/slr.slh: Deprecate.

	* tools/tests/0_slr_args/args.sl: Copy to...
	* tools/tests/0_slr_args/args.c: here. Use new syntax.

2009-08-04  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Minor packaging fix.
	
	* tools/Makefile.am: Distribute and install the new
	`testoutput.h'.

2009-08-04  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Make `slt' yet a little more useful.
	
	* tools/bin/slt.in: Set `KEEP' when running `slr' so that all the
	run files are left around after `slr' completes, in case they are
	needed should the test fail. 

2009-08-04  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Use the new `print' instruction semantics introduced in r2581.

	The `print' instruction now takes stream and formatting bits as
	input, as discussed in notes [mgsim2] and [mgsim5]. Use them.
	
	* lib/mtalpha-sim/include/svp_os.h: Update `__write1' to comply to
	the new print instruction definition.

	* tools/include/svp/testoutput.h: New. Provide basic output
	interface for test programs so that code in `tools' do not require
	the SL library.
	
2009-08-03  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* tools/bin/slt.in: Accept .c as an input file extension.

2009-07-30  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Merge the following changes.

	
        2009-07-30  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Be friendly with existing SL code.

	Current SL code (in .sl files) somehow depend on M4 being run
	before the C preprocessor. More specifically, it requires C
	preprocessor macro definitions (-DXXXX) to be expanded *after*
	processing by M4. This is incompatible with the latest changes
	which cause CPP to be run before M4. To alleviate the issue
	temporarily (until all .sl files are converted to the new
	ordering), the preprocessor macro definitions are added to the 2nd
	preprocessor run (compile, after M4). 

	This may cause issues if the macros at the 1st preprocessor run
	expand to text containing macro names, expecting CPP to not expand
	twice! This "feature" will be removed when the .sl extension is
	phased out entirely.
	
	* tools/bin/slc.in: Append $extra_ppflags to $slc_cflags when some
	.sl files are present in the input.

	
        2009-07-27  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Run M4 after the C preprocessor.
	
	* tools/bin/slc.in: Use `cm4' to run M4 after the C
	preprocessor. Document the feature.

	* tools/bin/cce.in: Set toolchain parameters accordingly.
	
	* tools/bin/slt.in: Update accordingly.


        2009-07-27  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Introduce new tool `cm4'.
	
	* tools/bin/cm4.in: New.
	* tools/bin/Makefile.am: Update accordingly.

2009-07-27  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix handling of extra simulator command-line parameters.
	
	* tools/bin/slr.in: Properly parse `-Ws'. 
	
2009-07-27  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Make tools more human-friendly.
	
	* tools/bin/slr.in,	
	* tools/bin/slc.in: Bark if a command-line parameter that requires
	an argument appears last (without its argument) on the
	command-line.
	
	* tools/bin/cce.in,
	* tools/bin/slc.in,
	* tools/bin/slt.in,
	* tools/bin/slr.in,
	* tools/lib/r-host.sh,
	* tools/lib/r-mtalpha-sim.sh.in,
	* tools/lib/r-mtsparc-sim.sh.in: Print only the short utility name
	in warning and error messages, instead of the full path.	

2009-07-27  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Provide test script for `quicksort' benchmark.

	* programs/benchmarks/quicksort/testqs.sh: New. It was mentioned
	in `Makefile.am' but nonexistent. 

2009-07-27  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Add shell goodies to the `slenv' script.

	* deploy/slenv: Also set `PS1' with bash and zsh to inform which
	version is currently selected.

2009-07-27  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Minor packaging fix.
	
	* tools/bin/Makefile.am (bin_SCRIPTS): Ensure `slt-many' gets
	installed.

2009-07-27  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Use more bashisms to reduce the number of sub-processes spawned by
	tools.

	* tools/bin/slc.in,
	* tools/bin/cce.in,
	* tools/bin/slr.in,
	* tools/bin/slt.in: Use more $((...)) instead of $(expr ...). Use
	more ${foo#...} and ${foo%...} instead of cut and sed. Use "<<<"
	insted of "echo|".
	
2009-07-26  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix emission of `.base'.
	
	* tools/bin/spp: Wait until the register window is compressed and
	GP is renamed to emit `.base'.

2009-07-26  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Code generation improvements for MT-Alpha.

	* tools/bin/spp: Emit directive `.base' in prologue to signal that
	a non-standard GP register is being used. Reset `.base' to
	standard after `.end'. Do not force number of locals to 2 any more
	since the simulator bug this was supposed to work around has been
	fixed long ago.

2009-07-24  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Sanitize test suite. Make `slt' output more human-friendly.

	The tool `slt' would create output directories for log files and
	temporary files as direct sub-directories of the current directory
	always, with directories numbered after the test output
	columns (e.g. `___tests_0'). This would make the test output
	difficult to find when the input test (.sl) was located in a
	relative path. This was changed so that test output directories
	carry the name of the SL implementation being tested, and are
	structured in a hierarchy similar to the input test, possibly the
	same if building from the source tree directly (e.g. `tests/_seqc').

	The tool `slt-many' would pick up `slt' from PATH always, instead
	of the build directory as the other tools, resulting in `make
	check-slt' failing before the tools are installed in PATH or `eval
	$(make show-vars)' is run. This was fixed by handling tool
	locations like the other tools.

	* tools/bin/Makefile.am,
	* sl.mk: Introduce new tool location variable for `slt'.
	
	* tools/bin/slt-many: Rename to...	
	* tools/bin/slt-many.in: here. Handle copyright, bug reporting,
	version handling, tool locations, TRACE and PS4 like the other
	tools.

	* tools/bin/slt.in: Handle $SRCDIR. Document it.

	* tests.mk: Indicate $SRCDIR to `slt'. Set tool locations before
	invoking `slt-many'.

2009-07-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix `make distcheck' after the integration of Livermore loops.
	
	* programs/benchmarks/livermore/arrays.h: Increase size of Du1,
	Du2, Du3 to LARGEST, since they are indexed in `k8.sl' up to the
	problem size.

	* programs/benchmarks/livermore/Makefile.am: Generate constant
	"filling" between the data items picked from array.h, as a
	possible safeguard against out-of-bound errors.

	* programs/benchmarks/livermore/Makefile.am,
	
	* programs/benchmarks/livermore/genmk.sh: Do not distribute the
	test programs as they are properly auto-generated. Remove them on
	`make distclean'. Properly generate the Fibre inputs for the
	`bench' programs. Indicate that the Fibre input should be run with
	SLT_RUN in the `bench' programs.
	
2009-07-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	More developer-friendly SL tests.
	
	* tests.mk (check-slt): Make rule phony. Properly pick up tests
	either in source or build directory. Create dependency on test
	sources and Automake's `check_DATA'.

	* tools/bin/slt-many: Output the list of implementations being
	tested; separate implementation name, compile flags and run flags.

2009-07-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Simplify the Livermore loop sources, optimize some.

	Previously *all* the arrays possibly used by all kernels were
	defined when compiling *each* kernel. Due to the relatively large
	array size selected to support large problem sizes at run-time,
	the resulting offsets in object code and executables would
	overflow linker abilities for weak linkers or on 32-bit systems.
	
	The code was refactored so that for each kernel the demonstration
	programs only include the array definitions actually required.

	Besides the `bench' and `test' programs a new `simple' program is
	provided for the benefit of testing code generation in the muTC
	core compiler.

	As a side change, some kernels were made more efficient through
	additional C99 `restrict' annotations on array pointers, which
	promise nice aliasing properties to the optimizing compilers.

	After this patch, some tests still fail due to either too large
	problem sizes (or too low default TIMEOUT) or offset errors.
	
	* programs/benchmarks/livemore/main_simple.sl: New. This does not
	take parameters, and uses the predefined defaults.

	* programs/benchmarks/livermore/ll.slh: Move array definitions to...
	
	* programs/benchmarks/livermore/arrays.h: here. Get rid of
	preprocessor aliases (`m4_define'), since the objects are now in
	the global namespace and the aliases would fool up SL macro
	expansions for special names (e.g. `ix', `ex').
	
	* programs/benchmarks/livermore/gencode.sh: Move glue code generation into...
	* programs/benchmarks/livermore/Makefile.am: here. Extract array
	definitions from `arrays.h' using a LL_USE annotation to be added in each
	kernel, listing the *names* of the required objects from `arrays.h'.

	* programs/benchmarks/livermore/bench13.bin.mtalpha.psize,
	* programs/benchmarks/livermore/bench14.bin.mtalpha.psize: New.
	
	* programs/benchmarks/livermore/gencode.sh: Rename to...
	* programs/benchmarks/livermore/genmk.sh: here. Simplify some
	more; the .psize file must now exist for every source file.
	* bootstrap: Update accordingly.
	
	* programs/benchmarks/livermore/test.sl,	
	* programs/benchmarks/livermore/bench.sl: Remove, as the glue code
	is now entirely dumped in each generated file by `Makefile.am'.

	* programs/benchmarks/livermore/k1.sl,
	* programs/benchmarks/livermore/k2.sl,
	* programs/benchmarks/livermore/k3.sl,
	* programs/benchmarks/livermore/k4.sl,
	* programs/benchmarks/livermore/k5.sl,
	* programs/benchmarks/livermore/k6.sl,
	* programs/benchmarks/livermore/k7.sl,
	* programs/benchmarks/livermore/k8.sl,
	* programs/benchmarks/livermore/k9.sl,
	* programs/benchmarks/livermore/k10.sl,
	* programs/benchmarks/livermore/k11.sl,
	* programs/benchmarks/livermore/k12.sl,
	* programs/benchmarks/livermore/k13.sl,	
	* programs/benchmarks/livermore/k14.sl: Declare the required
	objects with a LL_USE annotation. Use the real object names not
	aliased names. Clean up whitespace. Use C99's `restrict' where
	appropriate.

2009-07-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	More support for building out of the source tree (2).

	* tests.mk: Append `-I$(srcdir)' to the compile flags used by
	`slt'.	

2009-07-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	More support for building out of the source tree.
	
	Fix compilation of SL programs when the main SL source is in
	$(builddir) and it includes some other files in $(srcdir). This
	appeared while testing auto-generation for SL code.
	
	* sl.mk: Append `-I$(srcdir)' to each invocation of `slc'. 

2009-07-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix tests.

	* tools/tests/2_args/globpass.sl: Use `svp_nop' instead of
	`d_putchar' which was removed long ago.

2009-07-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Import more tests from previous `utcc' tree.
	
	* tools/tests/0_trivial/if3.sl,
	* tools/tests/2_args/globpass.sl,
	* tools/tests/2_args/shareuse.sl,
	* tools/tests/2_args/sumunsigned.sl: Import code from
	S. Polstra. Adapt to use SL macro names.

2009-07-21  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Update deployment makefiles to use latest simulator changes.
	
	* deploy/Makefile-reqs.orig (MGSIM_REV): Bump to r2513 with latest
	bug fixes.

2009-07-21  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Update deployment makefiles to use latest binutils changes.
	
	* deploy/Makefile-reqs.orig (BINUTILS_REV): Bump to r2430 where
	LDFP was introduced.

2009-07-21  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve deployment makefiles.
	
	* deploy/reqs.mk: Copy slenv to $(PREFIX) when needed. Move REPO
	variables to...	
	* deploy/Makefile-reqs.orig: here, so they can be customized.

2009-07-21  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Extend test suite.
	
	* tools/tests/2_args/twoways.sl: New. Inspired from discussion
	with T. Bernard.

2009-07-21  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Move forward with `make check' on LL benchmark code.

	* programs/benchmarks/livermore/ll.slh: Remove structure
	definition (put arrays in global scope) to prevent the compiler
	from complaining the structure is too large. Adjust LARGEST to
	please the linker on MacOS X.
	
	* programs/benchmarks/livermore/bench1.bin.mtalpha.psize,
	* programs/benchmarks/livermore/bench3.bin.mtalpha.psize,
	* programs/benchmarks/livermore/bench4.bin.mtalpha.psize,
	* programs/benchmarks/livermore/bench5.bin.mtalpha.psize,
	* programs/benchmarks/livermore/bench7.bin.mtalpha.psize,
	* programs/benchmarks/livermore/bench9.bin.mtalpha.psize,
	* programs/benchmarks/livermore/bench10.bin.mtalpha.psize,
	* programs/benchmarks/livermore/bench11.bin.mtalpha.psize,	
	* programs/benchmarks/livermore/bench12.bin.mtalpha.psize: Adapt
	problem size to new value of LARGEST.
	
	* programs/benchmarks/livermore/gencode.sh: Indicate to `slt' that
	the `bench' programs take Fibre input. Generate the Fibre data
	from the `.psize' files and distribute it. Indicate to `slt' that
	the output of the `test' programs should not be compared to the
	reference. Cleanup generated files on `make maintainerclean'

	* programs/benchmarks/livermore/Makefile.am (MAINTAINERCLEANFILES):
	Initialize variable so that `ll.mk' can append to it.

2009-07-21  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix distribution of LL benchmark code.	

	* programs/benchmarks/livermore/bench.exp,
	* programs/benchmarks/livermore/bench1.bin.mtalpha.psize,
	* programs/benchmarks/livermore/bench2.bin.mtalpha.psize,
	* programs/benchmarks/livermore/bench3.bin.mtalpha.psize,
	* programs/benchmarks/livermore/bench4.bin.mtalpha.psize,
	* programs/benchmarks/livermore/bench5.bin.mtalpha.psize,
	* programs/benchmarks/livermore/bench6.bin.mtalpha.psize,
	* programs/benchmarks/livermore/bench7.bin.mtalpha.psize,
	* programs/benchmarks/livermore/bench8.bin.mtalpha.psize,
	* programs/benchmarks/livermore/bench9.bin.mtalpha.psize,
	* programs/benchmarks/livermore/bench10.bin.mtalpha.psize,
	* programs/benchmarks/livermore/bench11.bin.mtalpha.psize,	
	* programs/benchmarks/livermore/bench12.bin.mtalpha.psize: Import
	data from M. Hicks.
	
	* programs/benchmarks/livermore/gencode.sh: Generate dist rules
	for the ".psize" files.

	* programs/benchmarks/livermore/Makefile.am (EXTRA_DIST):
	Distribute also `benchmarker.sh', `bench.exp' and the dependencies
	of test programs.

2009-07-21  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Extend the Livermore loop benchmarks, thanks to M. Hicks.

	* programs/benchmarks/ll/ll2.sl,
	* programs/benchmarks/ll/ll4.sl: Rename to...
	* programs/benchmarks/livermore/k2-alt.sl,
	* programs/benchmarks/livermore/k4-alt.sl: here.

	* programs/benchmarks/livermore/k1.sl,
	* programs/benchmarks/livermore/k2.sl,
	* programs/benchmarks/livermore/k3.sl,
	* programs/benchmarks/livermore/k4.sl,
	* programs/benchmarks/livermore/k5.sl,
	* programs/benchmarks/livermore/k6.sl,
	* programs/benchmarks/livermore/k7.sl,
	* programs/benchmarks/livermore/k8.sl,
	* programs/benchmarks/livermore/k9.sl,
	* programs/benchmarks/livermore/k10.sl,
	* programs/benchmarks/livermore/k11.sl,	
	* programs/benchmarks/livermore/k12.sl,	
	* programs/benchmarks/livermore/k13.sl,	
	* programs/benchmarks/livermore/k14.sl: Import implementation from
	M. Hicks. Fix indent. Remove include and KERNEL definition.

	* programs/benchmarks/livermore/livermore.slh: Remove. Before
	deletion, split content into...
	* programs/benchmarks/livermore/ll.slh: Array and parameter declarations,
	* programs/benchmarks/livermore/main_bench.sl: Main program for benchmarking,
	* programs/benchmarks/livermore/main_test.sl: Main program for testing.
	
	* programs/benchmarks/livermore/gencode.sh: Generate benchmark and
	test sources that bind `ll.slh', the main program (`main_*.sl')
	and the specific kernel. Generate `ll.mk' with the list of
	generated sources.

	* programs/benchmarks/livermore/Makefile.am: New. Use
	auto-generated `ll.mk'.

	* programs/benchmarks/livermore/benchmarker.sh: Import
	implementation from M. Hicks. Adapt to new interface of benchmark
	programs.

	* programs/benchmarks/ll/Makefile.am: Remove, as is now obsolete.
	
	* configure.ac,
	* programs/benchmarks/Makefile.am: Remove reference to `ll',
	replace by `livermore'.

	* bootstrap: Run `gencode.sh' in `programs/benchmarks/livermore'.

2009-07-21  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Update FFT benchmark to use the Fibre format.

	* programs/benchmarks/fft/fft_bench.sl: Take input from Fibre, not
	slr variables.

	* programs/benchmarks/fft/README: Document usage.
	
2009-07-21  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Beautify the SL compile process in Automake.

	* sl.mk: Use the '.x' file only a a stub, not as an interactive
	menu to choose the actual program from. Enable the shell's "-x"
	option in the compile function when running `make V=1' (verbose
	mode).

2009-07-21  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Library improvements.
	
	* tools/lib/t-ptl/include/sl_support.h: Define __STDC_LIMIT_MACROS and
	__STDC_CONSTANT_MACROS early. This is required to enable C99 definitions
	in C standard headers when compiling in C++ mode.
	
	* lib/include/cstdint.slh: Add missing UINT*_MAX definitions.
	
	* lib/include/svp/perf.slh: Protect identifiers with underscores.

2009-07-20  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix linking against `mtalpha-sim/libslc.a' after the toolchain is
	installed.
	
	* tools/lib/mtalpha.mk: Pull libslc.a out of pkgdata_LIBRARIES,
	because otherwise Automake causes the host's "ranlib" utility to
	be run on the archive during installation. Use the DATA target
	instead.

2009-07-18  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Sanitize (more).

	* tools/bin/slc.in (TIMEOUT): Set a large default timeout, so that
	commands can have a chance to terminate by default (the timeout
	value is overriden by `slt').

	* Makefile.am (check-slt): Recurse `make all' only into `tools'
	and `lib'.

2009-07-18  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Optimizations in generated code for `ppp' target.
	
	* tools/bin/spp (pppalpha.addswchll): Remove special case for
	`$l1' when adding `swch' at the beginning of a function
	body. Recognize `ldfp' as an instruction that writes to its
	operand.

	* tools/bin/spp (pppalpha.protectend): Do not insert "nop" before
	"end", unless when adding "end" just after a label. This saves a
	cycle in most cases.

2009-07-18  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Minor fix in doc.
	
	* doc/HACKING.txt: Fix indent in last note. 

2009-07-18  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Distribute missing files. Pass `make distcheck' again.
	
	* programs/demo/Makefile.am: Distribute `fibre.sl.d{1,2,3}'.

	* tools/Makefile.am: Distribute `include/fibre.slh'.
	
2009-07-18  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Sanitize the make rules.
	
	* sl.mk: Rename make variable `SLC' to `SLC_RUN', so that rules in
	recursive runs are not confused when $SLC is set (e.g. from `make
	show-vars') in the environment.

	* lib/mtalpha.mk,
	* lib/ptl.mk,
	* lib/seqc.mk,
	* tools/lib/mtalpha.mk,
	* tools/lib/ptl.mk,
	* tools/lib/seqc.mk: Update accordingly.
	
2009-07-18  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Add new rule `check-slt' for the eye candy, since `make check' now
	redirects the ASCII art to parallel log files.

	* Makefile.am: Introduce rule `check-slt' to run `slt' on the
	console (previously documented in `doc/HACKING.txt') for all
	source directories that include `tests.mk'.

	* tests.mk: Support `check-slt' in each directory defining tests.

	* tools/bin/slt-many: Ignore names starting with an underscore, so
	as to avoid itself to pick up remaining temporaries from a
	previous run. Avoid counting extra whitespace in test count.


2009-07-18  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Sanitize scripts. Simplify code, ease debugging.
	
	* tools/bin/timeout.in,
	* tools/bin/slc.in,
	* tools/bin/slr.in,
	* tools/bin/slt.in: Enable shell tracing (`set -x') when
	env. var. TRACE is set (used for debugging).

	* doc/HACKING.txt: Document the feature.

	* tools/bin/timeout.in: Major redesign to simplify and get signal
	management and exit codes right. Processes now killed gracefully
	(SIGTERM) once before SIGKILL.

	* tools/bin/slt.in: Detect SIGTERM in child as timeout.

	* tools/bin/slr.in: Use similar process management as in
	`timeout'. The cleanup now happens in a background process instead
	of a trap. Document the different steps.
	
	* tools/bin/slc.in: Use `timeout' to start compiler sub-processes,
	so that they get terminated eventually when run from `slt' with
	TIMEOUT set. Trap on SIGHUP as well.
	* tools/bin/slt.in: Do not prefix `timeout' to `slc', since `slc'
	takes care of aborting on its own.

	* tools/lib/r-host.sh,
	* tools/lib/r-mtalpha-sim.sh.in,	
	* tools/lib/r-mtsparc-sim.sh.in: Protect with `set -u' against
	bugs. Update variable accesses accordingly.

	* tools/bin/slt.in: Do not dump logs when terminating due to
	signal. List remaining files in all cases. Support .S as a test
	extension.
	
2009-07-17  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Reintroduce the `test-all' script from previous project `utcc',
	rename to `slt-many'. This eases applying `slt' on a batch of test
	files or directories on the command line.
	
	* tools/bin/slt-many: Reinstate `test-all'. Change to use `slt'
	instead of `test1'. Handle signals properly. Credit
	S. Polstra. Update bug report info, copyright.
	
	* tools/bin/Makefile.am: Distribute and install it. Be careful
	when generating man pages, `slt-many' is not a derived file.

2009-07-17  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Minor packaging update.
	
	* tools/bin/Makefile.am: Make the generated scripts depend on
	`ChangeLog', which carries the version information. Generate man
	pages only in maintainer mode.
	
2009-07-17  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Cleanup test code.
	
	* tools/tests/0_trivial/x_empty.sl,
	* tools/tests/0_trivial/x_illinsn.sl,
	* tools/tests/0_trivial/x_infloop.sl,
	* tools/tests/0_trivial/x_invcpp.sl,
	* tools/tests/0_trivial/x_invm4.sl,
	* tools/tests/0_trivial/x_invsyntax.sl,
	* tools/tests/0_trivial/x_undefsym.sl,
	* tools/tests/1_create/x_nocreate.sl,
	* tools/tests/2_args/x_addrparm.sl,
	* tools/tests/2_args/x_addrparm2.sl,
	* tools/tests/2_args/x_deadlock.sl,
	* tools/tests/2_args/x_invsh1.sl,
	* tools/tests/2_args/x_invsh2.sl,
	* tools/tests/2_args/x_invsh3.sl,	
	* tools/tests/2_args/x_wrglparm.sl: Rewrite expected failure
	variables for `slt'.
	
	* tools/tests/2_args/x_invsh4.sl: Duplicate of x_invsh3 -> remove.
	
	* tools/tests/4_index/defaults.sl,
	* tools/tests/4_index/indexdecl.sl,
	* tools/tests/4_index/inf1.sl,
	* tools/tests/4_index/inf2.sl,
	* tools/tests/4_index/inf3.sl,
	* tools/tests/4_index/inf4.sl,
	* tools/tests/4_index/inf5.sl,
	* tools/tests/4_index/neg1.sl,
	* tools/tests/4_index/neg2.sl,
	* tools/tests/4_index/neg3.sl,
	* tools/tests/4_index/neg4.sl,
	* tools/tests/4_index/neg5.sl,
	* tools/tests/4_index/neg6.sl,
	* tools/tests/4_index/neg7.sl,
	* tools/tests/4_index/neg8.sl,
	* tools/tests/4_index/neg9.sl,
	* tools/tests/4_index/pos1.sl,
	* tools/tests/4_index/pos2.sl,
	* tools/tests/4_index/pos3.sl,
	* tools/tests/4_index/pos4.sl,
	* tools/tests/4_index/pos5.sl,
	* tools/tests/4_index/pos6.sl,
	* tools/tests/4_index/pos7.sl,
	* tools/tests/4_index/pos8.sl,
	* tools/tests/4_index/pos9.sl: Rename to...

	* tools/tests/4_index/defaults.sl.disabled,
	* tools/tests/4_index/indexdecl.sl.disabled,
	* tools/tests/4_index/inf1.sl.disabled,
	* tools/tests/4_index/inf2.sl.disabled,
	* tools/tests/4_index/inf3.sl.disabled,
	* tools/tests/4_index/inf4.sl.disabled,
	* tools/tests/4_index/inf5.sl.disabled,
	* tools/tests/4_index/neg1.sl.disabled,
	* tools/tests/4_index/neg2.sl.disabled,
	* tools/tests/4_index/neg3.sl.disabled,
	* tools/tests/4_index/neg4.sl.disabled,
	* tools/tests/4_index/neg5.sl.disabled,
	* tools/tests/4_index/neg6.sl.disabled,
	* tools/tests/4_index/neg7.sl.disabled,
	* tools/tests/4_index/neg8.sl.disabled,
	* tools/tests/4_index/neg9.sl.disabled,
	* tools/tests/4_index/pos1.sl.disabled,
	* tools/tests/4_index/pos2.sl.disabled,
	* tools/tests/4_index/pos3.sl.disabled,
	* tools/tests/4_index/pos4.sl.disabled,
	* tools/tests/4_index/pos5.sl.disabled,
	* tools/tests/4_index/pos6.sl.disabled,
	* tools/tests/4_index/pos7.sl.disabled,
	* tools/tests/4_index/pos8.sl.disabled,
	* tools/tests/4_index/pos9.sl.disabled: ... here.

	* tools/tests/mkalltests.sh: Simplify accordingly.
	
2009-07-17  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	New SHA-1 benchmark/test program.
	
	* programs/benchmarks/sha/sha1.sl,
	* programs/benchmarks/sha/Makefile.am: Add.
	
	* programs/benchmarks/Makefile.am,
	* configure.ac: Update accordingly.

2009-07-17  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Update to the new `ldfp' mechanism in the Microgrid
	simulator. This break compatibility of the generated code with
	older simulator versions.
	
	* tools/bin/spp: Use `ldfp' to initialize the stack pointer when
	needed. Initialize the frame pointer to zero, since there is not
	caller context.

	* tools/lib/mtalpha-sim/callgate.s: Use `ldfp' to initialize $30
	and $15.
	
2009-07-15  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix bugs in Fibre handling, add Fibre tests.
	
	* tools/bin/slt.in: Substitute "TEST" with the test's source file
	name in the SLT_RUN additional argument list.
	
	* programs/demo/fibre.sl,
	* programs/demo/fibre.sl.d1,
	* programs/demo/fibre.sl.d2,
	* programs/demo/fibre.sl.d3: Add Fibre example code.
	
	* programs/demo/Makefile.am (DEMOS): Update accordingly.

	* tools/bin/sag (FibreGenerator.dim): Support empty arrays
	properly.

	* tools/bin/slr.in: Insert tag -1 for Fibre index 0 if no Fibre
	data is provided. Use `mkdir -p' for temporary directories.
	
2009-07-15  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* configure.ac: Do not reference `cm4.in' as it does not yet
	exist.

2009-07-15  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Bug fixes, better support for Fibre input.
	
	* lib/include/svp/iomacros.slh: Handle case where `printf' is used
	with only a format string.

	* tools/bin/slr.in: Support reading Fibre data from standard input. 

	* tools/bin/sag (FibreGenerator),
	* tools/include/fibre.slh: Use the SAC vocabulary: "rank", "shape".

	* tools/bin/sag (SlrVarGenerator),
	* tools/bin/slr.in: Fix handling of "-l".

2009-07-14  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Cosmetic changes.
	
	* deploy/reqs.mk: Use `svn export' instead of `svn co' as
	recommended by M. Irfanuddin.
	* deploy/Makefile-reqs.orig: Bump desired revisions.	

2009-07-14  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Use Automake's new "parallel tests" feature. This uses
	multiple cores more effectively than slt's internal
	parallel process spawning.
	
	* configure.ac: Enable option `parallel-tests'.
	* tests.mk: Use `LOG_COMPILER' instead of `TESTS_ENVIRONMENT'.
	
	* tools/bin/slt.in: Introduce new options `DUMP_LOGS' and
	`SEQUENTIAL'. Document them.
	* tests.mk: Use them.

2009-07-14  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Cosmetic changes.
	
	* tools/lib/r-host/run.sh: Rename to...
	* tools/lib/r-host.sh: here.
	* tools/lib/r-mtalpha-sim/run.sh.in: Rename to...
	* tools/lib/r-mtalpha-sim.sh.in: here.
	* tools/lib/r-mtsparc-sim/run.sh: Rename to...
	* tools/lib/r-mtsparc-sim.sh.in: here.

	* tools/bin/slr.in, 
	* tools/lib/Makefile.am,
	* configure.ac: Update accordingly.

2009-07-06  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Some more benchmark code.
	
	* programs/benchmarks/quicksort/am-quicksort-iterative.sl,
	* programs/benchmarks/quicksort/sah-quicksort.sl,
	* programs/benchmarks/quicksort/am-quicksort.sl,
	* programs/benchmarks/ll/Makefile.am: Add.

	* tools/lib/seqc.mk: Use AM_V_CC for $(CC).

2009-07-06  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Minor `slr' improvement.
	
	* tools/lib/r-host/run.sh,
	* tools/lib/r-mtalpha-sim/run.sh.in,	
	* tools/lib/r-mtsparc-sim/run.sh.in: Prefix $RUNNER_PREFIX to
	command lines, to allow e.g. "time" to be used on programs.
	
	* tools/bin/slr.in: Document it.

2009-07-01  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Make `slc' look more like GCC's front-end.
	
	* tools/bin/slc.in: Run C compiler even if no input files are
	provided; this to allow -dumpversion, etc. Refuse -M and -MM, but
	be graceful with -M[GPDTQF]. Properly handle -include and other -i
	preprocessor flags. Pass -W*, -d*, -pedantic, -ansi, -std* to both
	preprocessor and compiler. Handle input from `-' (standard input).

2009-06-29  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Cosmetic fixes.

	* Makefile.am: Fix rule `show-vars': add `tools/bin/' to PATH, not
	`bin/'.

	* configure.am: Define new conditional ENABLE_DEMOS for building
	SL programs during `make all'.

	* Makefile.am,
	* programs/benchmarks/blas/Makefile.am,
	* programs/benchmarks/fft/Makefile.am,
	* programs/benchmarks/ll/Makefile.am,
	* programs/demo/Makefile.am: Use it.

	* programs/benchmarks/blas/blas-test-saxpy.sl,
	* programs/benchmarks/ll/ll2.sl,
	* programs/benchmarks/ll/ll4.sl: Define some test cases via SLT_RUN.

	* programs/benchmarks/nas/is/Makefile.am,
	* programs/benchmarks/quicksort/Makefile.am: Distribute some more files.

	* programs/benchmarks/Makefile.am: Recurse also into `ll'.

	* doc/NEWS.txt: Mention benchmark programs.
	
2009-06-29  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Small fixes.
	
	* programs/benchmarks/ll/ll2.sl,
	* programs/benchmarks/ll/ll4.sl: Implement some more benchmarks.

	* tools/bin/spp (pppalpha.remdefaults): Default place is now 0 as
	per [svp27], not 1.

2009-06-27  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* tools/lib/t-pppalpha/include/sl_support.h: Update PLACE_LOCAL
	with definition from [svp27].

	* tools/lib/t-utc0/slimpl.m4: Replace definition of `sl_decl' to
	avoid emitting a dangling brace after the declaration, as would
	happen when reusing `sl_def' blindly.

2009-06-24  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* tools/bin/Makefile.am (cce.1 slc.1 slr.1 slt.1): Revert previous
	change since the temporary files are different anyways. Give
	absolute pathname to help2man.

2009-06-24  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* tools/bin/Makefile.am (cce.1 slc.1 slr.1 slt.1): Use different
	temporary file names to avoid race condition with script build
	rule.

2009-06-24  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* programs/benchmarks/nas/Makefile.am
	* programs/benchmarks/nas/is/Makefile.am
	* programs/benchmarks/blas/Makefile.am
	* programs/benchmarks/quicksort/Makefile.am
	* tools/lib/mtalpha.mk
	* tools/lib/seqc.mk
	* tools/lib/ptl.mk
	* tools/lib/Makefile.am
	* tools/Makefile.am: Add files missing from previous commit.

2009-06-24  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Change source tree layout.

	* sl.mk,
	* tests.mk,
	* Makefile.am,
	* bootstrap,
	* configure.ac: Update accordingly.

	* bin/Makefile.am,
	* bin/cce.in,
	* bin/sag,
	* bin/scu,
	* bin/slc.in,
	* bin/slr.in,
	* bin/slt.in,
	* bin/spp,
	* bin/timeout.in: Rename to...

	* tools/bin/Makefile.am,
	* tools/bin/cce.in,
	* tools/bin/sag,
	* tools/bin/scu,
	* tools/bin/slc.in,
	* tools/bin/slr.in,
	* tools/bin/slt.in,
	* tools/bin/spp,
	* tools/bin/timeout.in: here.

	* demo/10threads.sl,
	* demo/Makefile.am,
	* demo/answer.sl,
	* demo/fibonacci.sl,
	* demo/helloworld.sl,
	* demo/roman.sl: Rename to...

	* programs/demo/10threads.sl,
	* programs/demo/Makefile.am,
	* programs/demo/answer.sl,
	* programs/demo/fibonacci.sl,
	* programs/demo/helloworld.sl,
	* programs/demo/roman.sl: here.
	
	* demo/blas-test-saxpy.sl,
	* demo/blas/caxpy.sl,
	* demo/blas/cdotc.sl,
	* demo/blas/cdotu.sl,
	* demo/blas/complex.slh,
	* demo/blas/daxpy.sl,
	* demo/blas/ddot.sl,
	* demo/blas/saxpy.sl,
	* demo/blas/sdot.sl,
	* demo/blas/templates/xaxpy.sl,
	* demo/blas/templates/xaxpyc.sl,
	* demo/blas/templates/xdot.sl,
	* demo/blas/templates/xdotc.sl,
	* demo/blas/zaxpy.sl,
	* demo/blas/zdotc.sl,
	* demo/blas/zdotu.sl,
	* demo/fft/Makefile.am,
	* demo/fft/README,
	* demo/fft/fft.slh,
	* demo/fft/fft_bench.sl,
	* demo/fft/fft_bench1.sl,
	* demo/fft/fft_bench2.sl,
	* demo/fft/fft_extra.sl,
	* demo/fft/fft_impl1.sl,
	* demo/fft/fft_impl2.sl,
	* demo/fft/fft_test.sl,
	* demo/fft/fft_test1.sl,
	* demo/fft/fft_test2.sl,
	* demo/fft/gen_table_1.c,
	* demo/fft/gen_table_2.sh,
	* demo/fft/testfft.sh: Rename to...

	* programs/benchmarks/blas/Makefile.am,
	* programs/benchmarks/blas/blas-test-saxpy.sl,
	* programs/benchmarks/blas/caxpy.sl,
	* programs/benchmarks/blas/cdotc.sl,
	* programs/benchmarks/blas/cdotu.sl,
	* programs/benchmarks/blas/complex.slh,
	* programs/benchmarks/blas/daxpy.sl,
	* programs/benchmarks/blas/ddot.sl,
	* programs/benchmarks/blas/modules.txt,
	* programs/benchmarks/blas/saxpy.sl,
	* programs/benchmarks/blas/sdot.sl,
	* programs/benchmarks/blas/templates/xaxpy.sl,
	* programs/benchmarks/blas/templates/xaxpyc.sl,
	* programs/benchmarks/blas/templates/xdot.sl,
	* programs/benchmarks/blas/templates/xdotc.sl,
	* programs/benchmarks/blas/zaxpy.sl,
	* programs/benchmarks/blas/zdotc.sl,
	* programs/benchmarks/blas/zdotu.sl,
	* programs/benchmarks/fft/Makefile.am,
	* programs/benchmarks/fft/README,
	* programs/benchmarks/fft/fft.slh,
	* programs/benchmarks/fft/fft_bench.sl,
	* programs/benchmarks/fft/fft_bench1.sl,
	* programs/benchmarks/fft/fft_bench2.sl,
	* programs/benchmarks/fft/fft_extra.sl,
	* programs/benchmarks/fft/fft_impl1.sl,
	* programs/benchmarks/fft/fft_impl2.sl,
	* programs/benchmarks/fft/fft_test.sl,
	* programs/benchmarks/fft/fft_test1.sl,
	* programs/benchmarks/fft/fft_test2.sl,
	* programs/benchmarks/fft/gen_table_1.c,
	* programs/benchmarks/fft/gen_table_2.sh,
	* programs/benchmarks/fft/testfft.sh: here.

	* programs/benchmarks/fft/fft_impl1.sl,
	* programs/benchmarks/fft/fft_impl2.sl,
	* programs/benchmarks/fft/gen_table_1.c,	
	* programs/benchmarks/fft/gen_table_2.sh: Make FFT lookup table
	size configurable.
		
	* programs/benchmarks/fft/fft_bench.sl: Use size 16.
	* programs/benchmarks/fft/fft_test.sl: Use size 8.

	* programs/benchmarks/fft/Makefile.am: Update accordingly.


	* doc/Makefile.am: Move manpage rules to...
	* tools/bin/Makefile.am: here.

	* include/climits.slh,
	* include/cmalloc.slh,
	* include/cstdbool.slh,
	* include/cstddef.slh,
	* include/cstdint.slh,
	* include/sac_helpers.slh,
	* include/svp/argslot.slh,
	* include/svp/assert.slh,
	* include/svp/div.slh,
	* include/svp/io.slh,
	* include/svp/iomacros.slh,
	* include/svp/minimath.slh,
	* include/svp/perf.slh,
	* include/svp/roman.slh: Rename to...

	* lib/include/climits.slh,
	* lib/include/cmalloc.slh,
	* lib/include/cstdbool.slh,
	* lib/include/cstddef.slh,
	* lib/include/cstdint.slh,
	* lib/include/sac_helpers.slh,
	* lib/include/svp/argslot.slh,
	* lib/include/svp/assert.slh,
	* lib/include/svp/div.slh,
	* lib/include/svp/io.slh,
	* lib/include/svp/iomacros.slh,
	* lib/include/svp/minimath.slh,
	* lib/include/svp/perf.slh,
	* lib/include/svp/roman.slh: here.

	* include/fibre.slh,
	* include/m4sugar.m4,
	* include/m4sugar_foreach.m4,
	* include/m4sugar_transform.sed,
	* include/m4sugar_version.m4,
	* include/slc.m4,
	* include/slr.slh,
	* include/svp/lib.slh: Rename to...

	* tools/include/fibre.slh,
	* tools/include/m4sugar.m4,
	* tools/include/m4sugar_foreach.m4,
	* tools/include/m4sugar_transform.sed,
	* tools/include/m4sugar_version.m4,
	* tools/include/slc.m4,
	* tools/include/slr.slh,
	* tools/include/svp/lib.slh: here.

	* lib/arggen.sl, 
	* lib/host-host-ptl/include/create.tpl,
	* lib/host-host-ptl/include/ptl_config.h,
	* lib/host-host-ptl/include/ptl_debug.h,
	* lib/host-host-ptl/include/ptl_deps.h,
	* lib/host-host-ptl/include/ptl_svp.h,
	* lib/host-host-ptl/include/ptl_vars.h,
	* lib/host-host-ptl/include/template.pl,
	* lib/host-host-ptl/ptl_debug.cc,
	* lib/host-host-ptl/ptl_svp.cc,
	* lib/host-host-ptl/ptl_vars.cc,
	* lib/host-host-ptl/slrt.c,
	* lib/host-host-seqc/load.c,
	* lib/host-host-seqc/slrt.c,
	* lib/mtalpha-sim/callgate.s,
	* lib/mtalpha-sim/slrt.s,
	* lib/r-host/run.sh,
	* lib/r-mtalpha-sim/run.sh.in,
	* lib/r-mtsparc-sim/run.sh.in,
	* lib/t-pppalpha/include/sl_support.h,
	* lib/t-pppalpha/slimpl.m4,
	* lib/t-ptl/include/sl_support.h,
	* lib/t-ptl/slimpl.m4,
	* lib/t-seqc/include/sl_support.h,
	* lib/t-seqc/slimpl.m4,
	* lib/t-utc/slimpl.m4,
	* lib/t-utc0/include/sl_support.h,
	* lib/t-utc0/slimpl.m4: Rename to...

	* tools/lib/arggen.sl,
	* tools/lib/host-host-ptl/include/create.tpl,
	* tools/lib/host-host-ptl/include/ptl_config.h,
	* tools/lib/host-host-ptl/include/ptl_debug.h,
	* tools/lib/host-host-ptl/include/ptl_deps.h,
	* tools/lib/host-host-ptl/include/ptl_svp.h,
	* tools/lib/host-host-ptl/include/ptl_vars.h,
	* tools/lib/host-host-ptl/include/template.pl,
	* tools/lib/host-host-ptl/ptl_debug.cc,
	* tools/lib/host-host-ptl/ptl_svp.cc,
	* tools/lib/host-host-ptl/ptl_vars.cc,
	* tools/lib/host-host-ptl/slrt.c,
	* tools/lib/host-host-seqc/load.c,
	* tools/lib/host-host-seqc/slrt.c,
	* tools/lib/mtalpha-sim/callgate.s,
	* tools/lib/mtalpha-sim/slrt.s,
	* tools/lib/r-host/run.sh,
	* tools/lib/r-mtalpha-sim/run.sh.in,
	* tools/lib/r-mtsparc-sim/run.sh.in,
	* tools/lib/t-pppalpha/include/sl_support.h,
	* tools/lib/t-pppalpha/slimpl.m4,
	* tools/lib/t-ptl/include/sl_support.h,
	* tools/lib/t-ptl/slimpl.m4,
	* tools/lib/t-seqc/include/sl_support.h,
	* tools/lib/t-seqc/slimpl.m4,
	* tools/lib/t-utc/slimpl.m4,
	* tools/lib/t-utc0/include/sl_support.h,
	* tools/lib/t-utc0/slimpl.m4: here.

	* lib/Makefile.am,
	* lib/mtalpha.mk,
	* lib/ptl.mk,
	* lib/seqc.mk: Extract tool-specific rules to...

	* tools/lib/Makefile.am,
	* tools/lib/mtalpha.mk,
	* tools/lib/ptl.mk,
	* tools/lib/seqc.mk: here.

	* lib/mtalpha-sim/divide.S,
	* lib/mtalpha-sim/malloc.c,
	* lib/mtalpha-sim/malloc_intrinsics.c,
	* lib/mtalpha-sim/malloc_intrinsics.h,
	* lib/mtalpha-sim/memcpy.s,
	* lib/mtalpha-sim/memset.S,
	* lib/mtalpha-sim/mtdiv.s,
	* lib/mtalpha-sim/strlib.c,
	* lib/svplib/div.sl,
	* lib/svplib/io.sl,
	* lib/svplib/roman.sl: Rename to...

	* lib/src/mtalpha/divide.S,
	* lib/src/malloc.c,
	* lib/src/malloc_intrinsics.c,
	* lib/src/malloc_intrinsics.h,
	* lib/src/mtalpha/memcpy.s,
	* lib/src/mtalpha/memset.S,
	* lib/src/mtalpha/mtdiv.s,
	* lib/src/strlib.c,
	* lib/src/div.sl,
	* lib/src/io.sl,
	* lib/src/roman.sl: here.
	
	* lib/Makefile.am,
	* lib/mtalpha.mk,
	* lib/ptl.mk,
	* lib/seqc.mk: Update accordingly.
	
	* tests/0_minimal/0_trivial/emptymain.sl,
	* tests/0_minimal/0_trivial/if.sl,
	* tests/0_minimal/0_trivial/if2.sl,
	* tests/0_minimal/0_trivial/nop.sl,
	* tests/0_minimal/0_trivial/x_abort.sl,
	* tests/0_minimal/0_trivial/x_empty.sl,
	* tests/0_minimal/0_trivial/x_illinsn.sl,
	* tests/0_minimal/0_trivial/x_infloop.sl,
	* tests/0_minimal/0_trivial/x_invcpp.sl,
	* tests/0_minimal/0_trivial/x_invm4.sl,
	* tests/0_minimal/0_trivial/x_invsyntax.sl,
	* tests/0_minimal/0_trivial/x_undefsym.sl,
	* tests/0_minimal/1_create/cr1.sl,
	* tests/0_minimal/1_create/crif.sl,
	* tests/0_minimal/1_create/crif2.sl,
	* tests/0_minimal/1_create/crif3.sl,
	* tests/0_minimal/1_create/crnop.sl,
	* tests/0_minimal/1_create/crnop2.sl,
	* tests/0_minimal/1_create/crnop3.sl,
	* tests/0_minimal/1_create/crnopdefs.sl,
	* tests/0_minimal/1_create/endth.sl,
	* tests/0_minimal/1_create/fididreuse.sl,
	* tests/0_minimal/1_create/x_crnosync.sl,
	* tests/0_minimal/1_create/x_crnotstm.sl,
	* tests/0_minimal/1_create/x_extcreate.sl,
	* tests/0_minimal/1_create/x_extcreatedefs.sl,
	* tests/0_minimal/1_create/x_inffamily.sl,
	* tests/0_minimal/1_create/x_invsync.sl,
	* tests/0_minimal/1_create/x_nested.sl,
	* tests/0_minimal/1_create/x_nocreate.sl,
	* tests/0_minimal/1_create/x_nothread.sl,
	* tests/0_minimal/2_args/args1.sl,
	* tests/0_minimal/2_args/argshadow.sl,
	* tests/0_minimal/2_args/delayshared.sl,
	* tests/0_minimal/2_args/sum.sl,
	* tests/0_minimal/2_args/useafter.sl,
	* tests/0_minimal/2_args/useafter2.sl,
	* tests/0_minimal/2_args/useafter3.sl,
	* tests/0_minimal/2_args/useafter4.sl,
	* tests/0_minimal/2_args/useexit2.sl,
	* tests/0_minimal/2_args/x_addrarg.sl,
	* tests/0_minimal/2_args/x_addrparm.sl,
	* tests/0_minimal/2_args/x_addrparm2.sl,
	* tests/0_minimal/2_args/x_argnr.sl,
	* tests/0_minimal/2_args/x_argnr2.sl,
	* tests/0_minimal/2_args/x_argscope.sl,
	* tests/0_minimal/2_args/x_deadlock.sl,
	* tests/0_minimal/2_args/x_dupdecl.sl,
	* tests/0_minimal/2_args/x_dupdecl2.sl,
	* tests/0_minimal/2_args/x_glnoinit.sl,
	* tests/0_minimal/2_args/x_invinit.sl,
	* tests/0_minimal/2_args/x_invinit2.sl,
	* tests/0_minimal/2_args/x_invsh1.sl,
	* tests/0_minimal/2_args/x_invsh2.sl,
	* tests/0_minimal/2_args/x_invsh3.sl,
	* tests/0_minimal/2_args/x_invsh4.sl,
	* tests/0_minimal/2_args/x_nothread.sl,
	* tests/0_minimal/2_args/x_wrglarg.sl,
	* tests/0_minimal/2_args/x_wrglparm.sl,
	* tests/0_minimal/3_mem/crdefaults.sl,
	* tests/0_minimal/3_mem/floatsh.sl,
	* tests/0_minimal/3_mem/floatsh1.sl,
	* tests/0_minimal/3_mem/floatsh2.sl,
	* tests/0_minimal/3_mem/if.sl,
	* tests/0_minimal/3_mem/indcreate.sl,
	* tests/0_minimal/3_mem/sideeffect.sl,
	* tests/0_minimal/4_index/indexdecl.sl: Rename to...

	* tools/tests/0_trivial/emptymain.sl,
	* tools/tests/0_trivial/if.sl,
	* tools/tests/0_trivial/if2.sl,
	* tools/tests/0_trivial/nop.sl,
	* tools/tests/0_trivial/x_abort.sl,
	* tools/tests/0_trivial/x_empty.sl,
	* tools/tests/0_trivial/x_illinsn.sl,
	* tools/tests/0_trivial/x_infloop.sl,
	* tools/tests/0_trivial/x_invcpp.sl,
	* tools/tests/0_trivial/x_invm4.sl,
	* tools/tests/0_trivial/x_invsyntax.sl,
	* tools/tests/0_trivial/x_undefsym.sl,
	* tools/tests/1_create/cr1.sl,
	* tools/tests/1_create/crif.sl,
	* tools/tests/1_create/crif2.sl,
	* tools/tests/1_create/crif3.sl,
	* tools/tests/1_create/crnop.sl,
	* tools/tests/1_create/crnop2.sl,
	* tools/tests/1_create/crnop3.sl,
	* tools/tests/1_create/crnopdefs.sl,
	* tools/tests/1_create/endth.sl,
	* tools/tests/1_create/fididreuse.sl,
	* tools/tests/1_create/x_crnosync.sl,
	* tools/tests/1_create/x_crnotstm.sl,
	* tools/tests/1_create/x_extcreate.sl,
	* tools/tests/1_create/x_extcreatedefs.sl,
	* tools/tests/1_create/x_inffamily.sl,
	* tools/tests/1_create/x_invsync.sl,
	* tools/tests/1_create/x_nested.sl,
	* tools/tests/1_create/x_nocreate.sl,
	* tools/tests/1_create/x_nothread.sl,
	* tools/tests/2_args/args1.sl,
	* tools/tests/2_args/argshadow.sl,
	* tools/tests/2_args/delayshared.sl,
	* tools/tests/2_args/sum.sl,
	* tools/tests/2_args/useafter.sl,
	* tools/tests/2_args/useafter2.sl,
	* tools/tests/2_args/useafter3.sl,
	* tools/tests/2_args/useafter4.sl,
	* tools/tests/2_args/useexit2.sl,
	* tools/tests/2_args/x_addrarg.sl,
	* tools/tests/2_args/x_addrparm.sl,
	* tools/tests/2_args/x_addrparm2.sl,
	* tools/tests/2_args/x_argnr.sl,
	* tools/tests/2_args/x_argnr2.sl,
	* tools/tests/2_args/x_argscope.sl,
	* tools/tests/2_args/x_deadlock.sl,
	* tools/tests/2_args/x_dupdecl.sl,
	* tools/tests/2_args/x_dupdecl2.sl,
	* tools/tests/2_args/x_glnoinit.sl,
	* tools/tests/2_args/x_invinit.sl,
	* tools/tests/2_args/x_invinit2.sl,
	* tools/tests/2_args/x_invsh1.sl,
	* tools/tests/2_args/x_invsh2.sl,
	* tools/tests/2_args/x_invsh3.sl,
	* tools/tests/2_args/x_invsh4.sl,
	* tools/tests/2_args/x_nothread.sl,
	* tools/tests/2_args/x_wrglarg.sl,
	* tools/tests/2_args/x_wrglparm.sl,
	* tools/tests/3_mem/crdefaults.sl,
	* tools/tests/3_mem/floatsh.sl,
	* tools/tests/3_mem/floatsh1.sl,
	* tools/tests/3_mem/floatsh2.sl,
	* tools/tests/3_mem/if.sl,
	* tools/tests/3_mem/indcreate.sl,
	* tools/tests/3_mem/sideeffect.sl,
	* tools/tests/4_index/indexdecl.sl: here.

	* tests/1_basic/0_slr_args/args.sl,
	* tests/1_basic/1_index/common.slh,
	* tests/1_basic/1_index/defaults.sl,
	* tests/1_basic/1_index/inf1.sl,
	* tests/1_basic/1_index/inf2.sl,
	* tests/1_basic/1_index/inf3.sl,
	* tests/1_basic/1_index/inf4.sl,
	* tests/1_basic/1_index/inf5.sl,
	* tests/1_basic/1_index/neg1.sl,
	* tests/1_basic/1_index/neg2.sl,
	* tests/1_basic/1_index/neg3.sl,
	* tests/1_basic/1_index/neg4.sl,
	* tests/1_basic/1_index/neg5.sl,
	* tests/1_basic/1_index/neg6.sl,
	* tests/1_basic/1_index/neg7.sl,
	* tests/1_basic/1_index/neg8.sl,
	* tests/1_basic/1_index/neg9.sl,
	* tests/1_basic/1_index/pos1.sl,
	* tests/1_basic/1_index/pos2.sl,
	* tests/1_basic/1_index/pos3.sl,
	* tests/1_basic/1_index/pos4.sl,
	* tests/1_basic/1_index/pos5.sl,
	* tests/1_basic/1_index/pos6.sl,
	* tests/1_basic/1_index/pos7.sl,
	* tests/1_basic/1_index/pos8.sl,
	* tests/1_basic/1_index/pos9.sl: Rename to...
	
	* tools/tests/0_slr_args/args.sl,
	* tools/tests/4_index/common.slh,
	* tools/tests/4_index/defaults.sl,
	* tools/tests/4_index/inf1.sl,
	* tools/tests/4_index/inf2.sl,
	* tools/tests/4_index/inf3.sl,
	* tools/tests/4_index/inf4.sl,
	* tools/tests/4_index/inf5.sl,
	* tools/tests/4_index/neg1.sl,
	* tools/tests/4_index/neg2.sl,
	* tools/tests/4_index/neg3.sl,
	* tools/tests/4_index/neg4.sl,
	* tools/tests/4_index/neg5.sl,
	* tools/tests/4_index/neg6.sl,
	* tools/tests/4_index/neg7.sl,
	* tools/tests/4_index/neg8.sl,
	* tools/tests/4_index/neg9.sl,
	* tools/tests/4_index/pos1.sl,
	* tools/tests/4_index/pos2.sl,
	* tools/tests/4_index/pos3.sl,
	* tools/tests/4_index/pos4.sl,
	* tools/tests/4_index/pos5.sl,
	* tools/tests/4_index/pos6.sl,
	* tools/tests/4_index/pos7.sl,
	* tools/tests/4_index/pos8.sl,
	* tools/tests/4_index/pos9.sl: here.

	* tests/1_basic/2_div/div.sl,
	* tests/1_basic/2_div/div2.sl,
	* tests/1_basic/2_div/div3.sl,
	* tests/2_lib/1_malloc/m1.sl,
	* tests/2_lib/1_malloc/m2.sl,
	* tests/3_sachelpers/sac1.sl: Rename to...

	* lib/tests/div/div.sl,
	* lib/tests/div/div2.sl,
	* lib/tests/div/div3.sl,
	* lib/tests/malloc/m1.sl,
	* lib/tests/malloc/m2.sl,
	* lib/tests/sac1.sl: here.

	* tests/Makefile.am: Rename to...
	* lib/tests/Makefile.am: here, and duplicate to...
	* tools/tests/Makefile.am: here.
	
	* tests/mkalltests.sh: Rename to...
	* lib/tests/mkalltests.sh: here, and duplicate to...
	* tools/tests/mkalltests.sh: here.

	* tests/1_basic/3_args/gencall.py,
	* tests/1_basic/4_funs/add.sl,
	* tests/1_basic/4_funs/f1.sl,
	* tests/1_basic/4_funs/f2.sl,
	* tests/1_basic/4_funs/f3.sl,
	* tests/1_basic/4_funs/f4.sl,
	* tests/1_basic/4_funs/f5.sl,
	* tests/1_basic/4_funs/f6.sl,
	* tests/1_basic/4_funs/f7.sl,
	* tests/1_basic/4_funs/f8.sl,
	* tests/1_basic/4_funs/f9.sl: Rename to...
	
	* tools/tests/7_args/gencall.py,
	* tools/tests/8_funs/add.sl,
	* tools/tests/8_funs/f1.sl,
	* tools/tests/8_funs/f2.sl,
	* tools/tests/8_funs/f3.sl,
	* tools/tests/8_funs/f4.sl,
	* tools/tests/8_funs/f5.sl,
	* tools/tests/8_funs/f6.sl,
	* tools/tests/8_funs/f7.sl,
	* tools/tests/8_funs/f8.sl,
	* tools/tests/8_funs/f9.sl: here.

	* tests/livermore8.sl: Rename to...
	* tools/tests/livermore8.sl: here.

	* tools/tests/m-problem.sl: Add.

	* tools/Makefile.am,
	* programs/Makefile.am,
	* programs/benchmarks/Makefile.am,
	* programs/benchmarks/nas/Makefile.am,
	* programs/benchmarks/nas/is/Makefile.am,
	* programs/benchmarks/quicksort/Makefile.am: Add.

	* programs/benchmarks/nas/is/IS.sl,
	* programs/benchmarks/nas/is/numbers.11.7.in,
	* programs/benchmarks/nas/is/random.sl,
	* programs/benchmarks/quicksort/am-quicksort-iterative.sl,
	* programs/benchmarks/quicksort/am-quicksort.sl,
	* programs/benchmarks/quicksort/sah-quicksort.sl: Add.

2009-06-22  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Bug fixes in Fibre handling.
	
	* bin/sag (FibreGenerator): Properly compute the dimensions of
	complex array shapes. Properly fill with zeros for these complex
	shapes.

	* bin/slr.in: Properly report when no program is specified. Add
	missing exit status codes to uses of `die'.

2009-06-22  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Implement Fibre input.

	* include/fibre.slh: Add.

	* bin/sag: Encapsulate existing code as class SlrVarGenerator. Add
	new class FibreGenerator.	
	* bin/slr.in: Use it. Rename -w and -r to -wd and -rd. Implement
	-wf, -rf, -wo. Document KEEP.
	
	* lib/arggen.sl: Include either "data.c" or "fdata.c".
	
	* lib/r-mtsparc-sim/run.sh.in,
	* lib/r-mtalpha-sim/run.sh.in: Give Fibre data via -L17.	
	* lib/mtalpha-sim/slrt.s: Save $l17 to __fibre_data. Fix loading
	of pointer addresses via GP (use 'ldq ... !literal' instead of
	'lda').
	
	* lib/host-host-seqc/load.c: Give target pointer to set as
	parameter to support loading multiple files.
	* lib/host-host-seqc/slrt.c,
	* lib/host-host-ptl/slrt.c: Use it to load both SLR vars data and
	Fibre data.

	* lib/r-host/run.sh: Give both data files on the command line.

	* doc/NEWS.txt: Mention the new feature.

2009-06-22  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Simplify tests.

	* demo/fft/fft_test1.sl,
	* demo/fft/fft_test2.sl,
	* demo/fft/fft_bench1.sl,
	* demo/fft/fft_bench2.sl,
	* bin/slt.in,
	* tests.mk: Use the new "-n" instead of "-Ws,-o -Ws,NumProcessors".

	* demo/fibonacci.sl: Remove use of -n since tests.mk specifies
	multiple settings anyways.	
	
2009-06-19  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* bin/cce.in (slc_cflags): Use IEEE-compliant math compile flags.

	* lib/svplib/io.sl (svp_io_putf): Fix printing of exponents when
	there are more than two digits.

2009-06-18  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* lib/t-pppalpha/include/sl_support.h (__sl_setshp): Do not render
	the expression value as a comment; this allows to use more complex
	expressions potentially containing newlines in the second operand
	to `sl_setp'.

2009-06-16  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Add new feature to SL: sl_end_thread which causes the current
	thread to terminate. 
	
	* lib/t-utc0/slimpl.m4,
	* lib/t-utc/slimpl.m4,
	* lib/t-ptl/slimpl.m4,
	* lib/t-pppalpha/slimpl.m4,
	* lib/t-pppalpha/include/sl_support.h: Implement sl_end_thread.

	* tests/0_minimal/1_create/endth.sl: Test it.

	* doc/NEWS.txt: Announce it.
	
	* bin/spp: Ignore labels in function prologues; these appear when
  	using sl_end_thread.

2009-06-15  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Cosmetic fixes.
	
	* bin/slr.in: Fix initialization of data file when program takes
	no argument. Log recursive invocation of `slc' and `slr' to
	standard error. Warn if both -r and -d are used.

	* sl.mk: Pop up a menu to select executable in .x wrappers.
	
	* demos/Makefile.am,
	* demos/fft/Makefile.am: Update accordingly.


2009-06-15  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve interface of SL runner.
	
	* bin/slr.in: Reinstate use of -x to select runner. Use -t for
	trace instead of -x.
	* bin/slt.in: Update accordingly.

	* bin/slr.in: Support new options -r and -w to load/save the data
	file from a file. This allows to cache an input data file between
	runs. 

	* bin/slr.in: Support new option -n as shorthand for the number of
	cores.
	* lib/r-mtalpha-sim/run.sh.in,
	* lib/r-mtsparc-sim/run.sh.in: Update accordingly.

	* bin/slc.in,
	* bin/slr.in: Update documentation for TMPDIR.
	
2009-06-09  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Import deployment facilities from the CSA server. Doc updates.
	
	* Makefile-reqs.mk: Rename to...	
	* deploy/reqs.mk: here. Update to separate dependencies from SL
	toolchain.

	* Makefile-reqs.orig: Rename to...	
	* deploy/Makefile-reqs.orig: here. Mention SVN revisions
	explicitly.

	* deploy/slenv: Add.

	* deploy/README: Document some more.

	* Makefile.am,
	* doc/requirements.txt: Update accordingly. 

	* doc/NEWS.txt: Update for new version number.	
	* doc/Makefile.am: Put dependency on configure since the man pages
	contain version information.

	

2009-06-08  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix major bug found by Mike H. in "alternate compiler".
	
	* bin/spp: Fix bug where special registers (GP etc) would be
	renamed to non-used local registers outside of the allowable
	range. Avoid renaming if all the allowable locals are already
	used.

	* tests/livermore8.sl: Add regression test for this fix.

	* configure.ac: Bump version number.

2009-06-08  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* demo/fft/fft_bench1.sl: Reinstate multiple test runs.

2009-06-04  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* configure.ac: Bump version number.

	* doc/NEWS.txt: Document major changes since development version.
	
2009-06-04  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Add support for function calls and malloc.

	* lib/t-pppalpha/slimpl.m4,
	* lib/t-pppalpha/include/sl_support.h: Implement function calls
	through the wrapper thread function implemented in
	`lib/mtalpha-sim/callgate.s'.

	* lib/t-utc/slimpl.m4,
	* lib/t-seqc/slimpl.m4,
	* lib/t-ptl/slimpl.m4,	
	* lib/t-utc0/slimpl.m4: Allow the same syntax in all
	implementations.
	
	* tests/1_basic/4_funs/f1.sl,
	* tests/1_basic/4_funs/f2.sl,
	* tests/1_basic/4_funs/f3.sl,
	* tests/1_basic/4_funs/add.sl,
	* tests/1_basic/4_funs/f4.sl,
	* tests/1_basic/4_funs/f5.sl,
	* tests/1_basic/4_funs/f6.sl,
	* tests/1_basic/4_funs/f7.sl,
	* tests/1_basic/4_funs/f8.sl,	
	* tests/1_basic/4_funs/f9.sl: Add test code for the new feature.

	
	* lib/mtalpha-sim/malloc.c: Import Doug Lea's malloc into the
	library. Replace uses of fprintf(3) by custom print functions; remove
	the dependency on time(2).

	* lib/mtalpha-sim/malloc_intrinsics.h,
	* lib/mtalpha-sim/malloc_intrinsics.c,	
	* lib/mtalpha-sim/divide.S,
	* lib/mtalpha-sim/memset.S,
	* lib/mtalpha-sim/memcpy.s: Provide the dependencies for DLmalloc.
	* lib/mtalpha.mk: Update accordingly.
		
	* include/cmalloc.slh: Declare the new service.
	* Makefile.am: Update accordingly.
	
	* lib/mtalpha.mk: Update accordingly.

	* tests/2_lib/1_malloc/m1.sl,
	* tests/2_lib/1_malloc/m2.sl: Add tests for the new feature.
	
	The SAC team then really pushed for the following kludge:
	
	* lib/mtalpha-sim/strlib.c: Implement strncpy. 
	* include/sac_helpers.slh: Add alias macros for some services.
	* tests/3_sachelpers/sac1.sl: Test them.

	Packaging & distribution:
	
	* lib/mtalpha-sim/slrt.s: Update licensing.

2009-06-03  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Update licensing info and bump version numbers.
	
	* Makefile-reqs.mk (GCC_VERSION): Bump to 4.4.0 which we now support.

	* Makefile.am (EXTRA_DIST): Do not mention README and NEWS are
	they are picked up by Automake automatically.

	* bin/spp,
	* bin/sag,
	* bin/slr.in,
	* bin/cce.in,
	* bin/slt.in,
	* bin/slc.in,
	* bin/Makefile.am: Update licensing info.

	* bin/timeout.in: Cleanup.
	
	* COPYING: Add.

	* configure.ac: Bump to 2.0.1a.
	
2009-06-03  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Update licensing info (some more).
	
	* Makefile.am,
	* doc/Makefile.am,
	* doc/Makefile.am.tmp,
	* doc/tests.txt,
	* include/slc.m4,
	* lib/Makefile.am,
	* lib/Makefile.am.tmp,
	* lib/arggen.sl,
	* lib/host-host-ptl/include/ptl_config.h,
	* lib/host-host-ptl/include/ptl_debug.h,
	* lib/host-host-ptl/include/ptl_deps.h,
	* lib/host-host-ptl/include/ptl_svp.h,
	* lib/host-host-ptl/include/ptl_vars.h,
	* lib/host-host-ptl/include/svp_os.h,
	* lib/host-host-ptl/ptl_debug.cc,
	* lib/host-host-ptl/ptl_svp.cc,
	* lib/host-host-ptl/ptl_vars.cc,
	* lib/host-host-ptl/slrt.c,
	* lib/host-host-seqc/include/svp_os.h,
	* lib/host-host-seqc/load.c,
	* lib/host-host-seqc/slrt.c,
	* lib/mtalpha-sim/.dirstamp,
	* lib/mtalpha-sim/include/svp_asmdiv.h,
	* lib/mtalpha-sim/include/svp_os.h,
	* lib/svplib/div.sl,
	* lib/svplib/io.sl,
	* lib/svplib/roman.sl,
	* lib/t-pppalpha/include/sl_support.h,
	* lib/t-pppalpha/slimpl.m4,
	* lib/t-ptl/include/sl_support.h,
	* lib/t-ptl/slimpl.m4,
	* lib/t-seqc/include/sl_support.h,
	* lib/t-seqc/slimpl.m4,
	* lib/t-utc/slimpl.m4,
	* lib/t-utc0/include/sl_support.h,
	* lib/t-utc0/slimpl.m4,
	* tests.mk: Update licensing info.

	* include/climits.slh,
	* include/create.slh,
	* include/cstdbool.slh,
	* include/cstddef.slh,
	* include/cstdint.slh,
	* include/slr.slh,
	* include/svp/argslot.slh,
	* include/svp/assert.slh,
	* include/svp/div.slh,
	* include/svp/io.slh,
	* include/svp/iomacros.slh,
	* include/svp/iomacros.slh.init,
	* include/svp/lib.slh,
	* include/svp/minimath.slh,
	* include/svp/perf.slh,
	* include/svp/roman.slh: Update licensing info. Also protect
	properly for multiple inclusion.
	

2009-06-03  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Cleanup demo directory.
	
	* sl.mk: Create a single SL compile rule which wraps multiple
	binaries with a script. This is what demo/Makefile.am now
	uses. Update licensing.

	* demo/fft.sl,
	* demo/testfft.sh,
	* demo/fft_gentable.c: Remove (was renamed in previous commit).

	* demo/blas/caxpy.sl,
	* demo/blas/zaxpy.sl: Add more BLAS primitives.

	* demo/10threads.sl,
	* demo/helloworld.sl,
	* demo/roman.sl,
	* demo/fibonacci.sl,
	* demo/answer.sl,
	* demo/test.sl: Update licensing.

2009-06-03  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Isolate FFT demo code in own directory and compile with two
	different FFT implementations.

	* demo/fft/README: Add.
	
	* demo/testfft.sh: Rename to...
	* demo/fft/testfft.sh: here.

	* demo/fft.sl: Rename to...
	* demo/fft/fft_impl1.sl: here, and split to...
	* demo/fft/fft_test.sl: here and...
	* demo/fft/fft_extra.sl: here.

	* demo/fft_gentable.c: Rename to...
	* demo/fft/gen_table_1.c: here.

	* demo/fft/fft_impl2.sl,
	* demo/fft/gen_table_2.sh,
	* demo/fft/fft_bench.sl,
	* demo/fft/fft_test1.sl,
	* demo/fft/fft_test2.sl,
	* demo/fft/fft_bench1.sl,
	* demo/fft/fft_bench2.sl: Add.

	* demo/fft/Makefile.am: Add.
	* demo/Makefile.am,
	* configure.ac: Update accordingly. Update licensing.

2009-06-02  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Start licensing changes. 

	* tests/0_minimal/0_trivial/emptymain.sl,
	* tests/0_minimal/0_trivial/if.sl,
	* tests/0_minimal/0_trivial/if2.sl,
	* tests/0_minimal/0_trivial/nop.sl,
	* tests/0_minimal/0_trivial/x_abort.sl,
	* tests/0_minimal/0_trivial/x_empty.sl,
	* tests/0_minimal/0_trivial/x_illinsn.sl,
	* tests/0_minimal/0_trivial/x_infloop.sl,
	* tests/0_minimal/0_trivial/x_invcpp.sl,
	* tests/0_minimal/0_trivial/x_invm4.sl,
	* tests/0_minimal/0_trivial/x_invsyntax.sl,
	* tests/0_minimal/0_trivial/x_undefsym.sl,
	* tests/0_minimal/1_create/cr1.sl,
	* tests/0_minimal/1_create/crif.sl,
	* tests/0_minimal/1_create/crif2.sl,
	* tests/0_minimal/1_create/crif3.sl,
	* tests/0_minimal/1_create/crnop.sl,
	* tests/0_minimal/1_create/crnop2.sl,
	* tests/0_minimal/1_create/crnop3.sl,
	* tests/0_minimal/1_create/crnopdefs.sl,
	* tests/0_minimal/1_create/fididreuse.sl,
	* tests/0_minimal/1_create/x_crnosync.sl,
	* tests/0_minimal/1_create/x_crnotstm.sl,
	* tests/0_minimal/1_create/x_extcreate.sl,
	* tests/0_minimal/1_create/x_extcreatedefs.sl,
	* tests/0_minimal/1_create/x_inffamily.sl,
	* tests/0_minimal/1_create/x_invsync.sl,
	* tests/0_minimal/1_create/x_nested.sl,
	* tests/0_minimal/1_create/x_nocreate.sl,
	* tests/0_minimal/1_create/x_nothread.sl,
	* tests/0_minimal/2_args/args1.sl,
	* tests/0_minimal/2_args/argshadow.sl,
	* tests/0_minimal/2_args/delayshared.sl,
	* tests/0_minimal/2_args/sum.sl,
	* tests/0_minimal/2_args/useafter.sl,
	* tests/0_minimal/2_args/useafter2.sl,
	* tests/0_minimal/2_args/useafter3.sl,
	* tests/0_minimal/2_args/useafter4.sl,
	* tests/0_minimal/2_args/useexit2.sl,
	* tests/0_minimal/2_args/x_addrarg.sl,
	* tests/0_minimal/2_args/x_addrparm.sl,
	* tests/0_minimal/2_args/x_addrparm2.sl,
	* tests/0_minimal/2_args/x_argnr.sl,
	* tests/0_minimal/2_args/x_argnr2.sl,
	* tests/0_minimal/2_args/x_argscope.sl,
	* tests/0_minimal/2_args/x_deadlock.sl,
	* tests/0_minimal/2_args/x_dupdecl.sl,
	* tests/0_minimal/2_args/x_dupdecl2.sl,
	* tests/0_minimal/2_args/x_glnoinit.sl,
	* tests/0_minimal/2_args/x_invinit.sl,
	* tests/0_minimal/2_args/x_invinit2.sl,
	* tests/0_minimal/2_args/x_invsh1.sl,
	* tests/0_minimal/2_args/x_invsh2.sl,
	* tests/0_minimal/2_args/x_invsh3.sl,
	* tests/0_minimal/2_args/x_invsh4.sl,
	* tests/0_minimal/2_args/x_nothread.sl,
	* tests/0_minimal/2_args/x_wrglarg.sl,
	* tests/0_minimal/2_args/x_wrglparm.sl,
	* tests/0_minimal/3_mem/crdefaults.sl,
	* tests/0_minimal/3_mem/floatsh.sl,
	* tests/0_minimal/3_mem/floatsh1.sl,
	* tests/0_minimal/3_mem/floatsh2.sl,
	* tests/0_minimal/3_mem/if.sl,
	* tests/0_minimal/3_mem/indcreate.sl,
	* tests/0_minimal/3_mem/sideeffect.sl,
	* tests/0_minimal/4_index/indexdecl.sl,
	* tests/1_basic/0_slr_args/args.sl,
	* tests/1_basic/1_index/common.slh,
	* tests/1_basic/1_index/defaults.sl,
	* tests/1_basic/1_index/inf1.sl,
	* tests/1_basic/1_index/inf2.sl,
	* tests/1_basic/1_index/inf3.sl,
	* tests/1_basic/1_index/inf4.sl,
	* tests/1_basic/1_index/inf5.sl,
	* tests/1_basic/1_index/neg1.sl,
	* tests/1_basic/1_index/neg2.sl,
	* tests/1_basic/1_index/neg3.sl,
	* tests/1_basic/1_index/neg4.sl,
	* tests/1_basic/1_index/neg5.sl,
	* tests/1_basic/1_index/neg6.sl,
	* tests/1_basic/1_index/neg7.sl,
	* tests/1_basic/1_index/neg8.sl,
	* tests/1_basic/1_index/neg9.sl,
	* tests/1_basic/1_index/pos1.sl,
	* tests/1_basic/1_index/pos2.sl,
	* tests/1_basic/1_index/pos3.sl,
	* tests/1_basic/1_index/pos4.sl,
	* tests/1_basic/1_index/pos5.sl,
	* tests/1_basic/1_index/pos6.sl,
	* tests/1_basic/1_index/pos7.sl,
	* tests/1_basic/1_index/pos8.sl,
	* tests/1_basic/1_index/pos9.sl,
	* tests/1_basic/2_div/div.sl,
	* tests/1_basic/2_div/div2.sl,
	* tests/1_basic/2_div/div3.sl,
	* tests/Makefile.am: Change licensing info.

2009-06-02  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Add some BLAS code for testing.

	* demo/blas/zdotc.sl,
	* demo/blas/saxpy.sl,
	* demo/blas/daxpy.sl,
	* demo/blas/zdotu.sl,
	* demo/blas/sdot.sl,
	* demo/blas/ddot.sl,
	* demo/blas/cdotc.sl,
	* demo/blas/cdotu.sl,
	* demo/blas/complex.slh,
	* demo/blas/templates/xaxpy.sl,
	* demo/blas/templates/xaxpyc.sl,
	* demo/blas/templates/xdot.sl,
	* demo/blas/ytemplates/xdotc.sl,
	* demo/blas-test-saxpy.sl: Demo test code.

2009-05-28  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Start implementing call gate for function calls.
	
	* lib/mtalpha-sim/callgate.s: Add.
	* lib/mtalpha.mk: Update accordingly.
	* lib/t-pppalpha/slimpl.m4: Use it.

2009-05-28  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Cosmetic fixes.
	
	* include/slc.m4: Implement new macros sl_begin_header and
	sl_end_header.

	* include/slr.slh,
	* include/cstddef.slh,
	* include/cstdbool.slh,
	* include/cstdint.slh,
	* include/climits.slh,
	* include/svp/argslot.slh,
	* include/svp/assert.slh,
	* include/svp/div.slh,
	* include/svp/io.slh,
	* include/svp/iomacros.slh,
	* include/svp/lib.slh,
	* include/svp/perf.slh,
	* include/svp/roman.slh: Use it.

	* bin/slt.in: Ensure $colspertest is initialized even when
	TEXT_ONLY is set.

2009-05-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Clean up distribution.
	
	* Makefile.am: Add missing NEWS to EXTRA_DIST, which was
	forgotten. Enable test suite during distcheck.

	* configure.ac: Add CONFIG_STATUS_DEPENDENCIES and point to
	ChangeLog to properly capture SVN commits.

	* doc/HACKING.txt: Mention Automake 1.11. Request a SVN commit
	before `make dist'.

	* doc/NEWS.txt: bump version number.
	
2009-05-22  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* configure.ac: Capture SVN version number in Autoconf.

	* bin/Makefile.am,
	* bin/cce.in,
	* bin/slc.in,
	* bin/slr.in,
	* bin/slt.in: use it. Uniformize version numbers.

2009-05-20  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Update to Automake 1.11. Cleanup build system.
	
	* Makefile.am,
	* lib/Makefile.am,
	* demo/Makefile.am,
	* tests.mk: Simplify. Move generic rules to...
	* sl.mk: here.

	* Makefile-reqs.orig, 
	* bootstrap,	
	* configure.ac: Update for latest release of Automake, and enable
	silent rules.

	* Makefile.am,
	* bin/Makefile.am,
	* lib/mtalpha.mk,
	* lib/seqc.mk,
	* lib/ptl.mk,
	* sl.mk: Use prefixes to silence custom slc build rules.

	* demo/Makefile.am: Coalesce DEMOS, EXTRA_DEMOS and ALL_DEMOS
	since no distinction exists any more.

2009-05-19  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Cosmetic changes. Reinstate support for compiling through the MG
	core compiler. Reinstate "xfail" tests.
	
	* tests/0_minimal/0_trivial/div.sl: Rename to...	
	* tests/1_basic/2_div/div3.sl: here, because div requires create
	and arguments.
	
	* bin/spp (pppalpha.create): 
	* lib/t-utc0/include/sl_support.h,
	* lib/t-pppalpha/include/sl_support.h,
	* tests/1_basic/3_args/gencall.py,		
	* tests/1_basic/2_div/div2.sl,
	* tests/1_basic/2_div/div3.sl: Use "long" instead of "long
	long" to simplify code since they are the same size on the Alpha.

	* include/svp/perf.slh,
	* include/climits.slh,
	* include/cstdint.slh,		
	* include/cstddef.slh: Test for __mtalpha__ in addition to
	__alpha__ to support the MG core compiler.

	* lib/t-utc0/slimpl.m4: Use m4_foreach instead of manual recursion
	to avoid issues with quoting. Check more for matching create/sync
	blocks, as with ptl and ppp.

	* lib/t-utc0/include/sl_support.h: Reinstate PLACE_LOCAL and
	PLACE_DEFAULT. 

	* lib/t-utc0/include/sl_support.h,
	* lib/t-pppalpha/include/sl_support.h: Use FP register for "breakf".

	* bin/spp (pppalpha.mapcall): Add warnings when arguments are
	passed using memory.
	
	* demo/Makefile.am: Compile with CFLAGS and CXXFLAGS which can be
	overridden by configure.

	* configure.ac: Make checking of muTC-ptl optional.	
	* tests.mk: Update accordingly. Test the core compiler with both
	-O0, -O1, -O2

	* tests/0_minimal/1_create/x_inffamily.sl,
	* tests/0_minimal/1_create/x_nested.sl,
	* tests/0_minimal/1_create/x_extcreate.sl,
	* tests/0_minimal/1_create/x_extcreatedefs.sl,
	* tests/0_minimal/1_create/x_invsync.sl,
	* tests/0_minimal/1_create/x_crnosync.sl,
	* tests/0_minimal/1_create/x_nocreate.sl,
	* tests/0_minimal/1_create/x_nothread.sl,
	* tests/0_minimal/1_create/x_crnotstm.sl,
	* tests/0_minimal/0_trivial/x_abort.sl,
	* tests/0_minimal/0_trivial/x_invm4.sl,
	* tests/0_minimal/0_trivial/x_empty.sl,
	* tests/0_minimal/0_trivial/x_invcpp.sl,
	* tests/0_minimal/0_trivial/x_invsyntax.sl,
	* tests/0_minimal/0_trivial/x_infloop.sl,
	* tests/0_minimal/0_trivial/x_illinsn.sl,
	* tests/0_minimal/0_trivial/x_undefsym.sl,
	* tests/0_minimal/2_args/x_dupdecl.sl,
	* tests/0_minimal/2_args/x_wrglparm.sl,
	* tests/0_minimal/2_args/x_invinit2.sl,
	* tests/0_minimal/2_args/x_argscope.sl,
	* tests/0_minimal/2_args/x_argnr.sl,
	* tests/0_minimal/2_args/x_invsh2.sl,
	* tests/0_minimal/2_args/x_invsh4.sl,
	* tests/0_minimal/2_args/x_addrparm2.sl,
	* tests/0_minimal/2_args/x_invinit.sl,
	* tests/0_minimal/2_args/x_glnoinit.sl,
	* tests/0_minimal/2_args/x_addrparm.sl,
	* tests/0_minimal/2_args/x_argnr2.sl,
	* tests/0_minimal/2_args/x_dupdecl2.sl,
	* tests/0_minimal/2_args/x_nothread.sl,
	* tests/0_minimal/2_args/x_addrarg.sl,
	* tests/0_minimal/2_args/x_wrglarg.sl,
	* tests/0_minimal/2_args/x_deadlock.sl,
	* tests/0_minimal/2_args/x_invsh1.sl,	
	* tests/0_minimal/2_args/x_invsh3.sl: Update to the new syntax for
	expected failures.

	* tests/mkalltests.sh,
	* tests/Makefile.am: Reinstate tests for expected failures.

	* configure.ac: Make option for expected failure
	tests (--enable-xfail-tests).	
	* tests/Makefile.am: Use it.
	
2009-05-18  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Allow for more debugging & more tests.

	* lib/seqc.mk,	
	* lib/ptl.mk: Compile with CFLAGS and CXXFLAGS, which can be
	overridden by configure. This also captures configure's defaults
	of -g -O2, suitable for debugging of the SVP library.

	* tests/0_minimal/3_mem/floatsh.sl,
	* tests/0_minimal/3_mem/floatsh1.sl,	
	* tests/0_minimal/3_mem/floatsh2.sl: Add, based on report by
	M. Hicks.
	
2009-05-15  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* lib/svplib/roman.sl: Simplify.

2009-05-14  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Make debugging easier.

	* bin/slr.in: Rename option -x to -c. Use -x for new "tracing"
	feature (print commands before running them). Add option -g to run
	command with debugger. Improve documentation to reflect the
	feature changes.

	* lib/r-mtalpha-sim/run.sh.in,
	* lib/r-mtsparc-sim/run.sh.in,
	* lib/r-host/run.sh: Recognize VERBOSE, DEBUG and DEBUGGER. 
	
	* bin/slt.in: Always put temporary file in a subdirectory of the
	current directory, instead of the source directory. This makes
	TEST_HERE obsolete. Give -x to `slr' for better logging.
	
	* tests.mk (TESTS_ENVIRONMENT): Simplify accordingly. 

	* bin/slr.in,
	* bin/slc.in: Better use TMPDIR and mktemp to reduce the size of
	temporary directory paths.
	
2009-05-13  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* Makefile.am: Distribute Makefile-reqs.orig and Makefile-reqs.mk.

2009-05-11  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve support for C99. Start implementing math primitives.
	
	* bin/cce.in: Define __mt_freestanding__ when cross-compiling to
	mt*-sim.
	
	* include/cstddef.h,
	* include/cstdint.h,
	* include/cstdbool.h,
	* include/climits.h,	
	* include/svp/minimath.slh: Use it. Implement more C99
	features. Implement some math.

	* bin/cce.in: Give arch-specific compiler flags to GCC-Alpha to
	make faster assembly by default, especially inline of math
	functions.	
	* lib/mtalpha.mk,
	* demo/Makefile.am: Simplify accordingly.

2009-05-07  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Cosmetic fixes.
	
	* tests.mk: Avoid testing `utc' if `ENABLE_MTALPHA' is not
	set. This avoids testing `utc' if the muTC compiler is not found.

	* configure.ac: Fix typos.
	
2009-05-07  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Cosmetic fixes.
	
	* Makefile.am (show-vars): Update PATH as well to allow using
	`slc', `slr' etc directly on the command line instead of $SLC,
	$SLR etc. Make target suitable input for a shell's `eval' builtin.

	* doc/HACKING.txt: Update accordingly.
	
	* configure.ac: Fix typo ("slr" instead of "sgr").
	* doc/README.txt: Fix typo ("demo" instead of "demos").	
	
2009-05-06  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve portability and support for degraded environments (where
	all tools are not present).
	
	* configure.ac: Refuse to configure if Python is not there.

	* bin/Makefile.am,
	* bin/slc.in: Use M4 as detected by "configure".

	* tests.mk,	
	* demo/Makefile.am: Use Automake conditionals to exclude tests
	that cannot be run due to missing tools.

2009-04-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* bin/timeout.in (usage): Fix typo, as reported by mlankamp.

2009-04-21  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Small optimization.
	
	* lib/t-pppalpha/include/sl_support.h: Avoid forcing creating a
	temporary when the incoming shared is the direct right hand side
	of an assignment to an outgoing shared. This optimizes direct
	shared assignments of the form `sl_setp(x, sl_getp(x))'.

2009-04-15  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix handling of multiple sources / objects on the command line for
	`slc'.
	
	* bin/slc.in: Fix substitution of separator in dependency list
	when processing a single step of the build chain.

2009-04-15  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Simplify use of `slr'.
	
	* bin/slr.in: Reinstate possibility to specify program variables
	directly by specifying the variable name, next to (in addition to)
	-d. Update documentation accordingly.

	* demo/fft.sl,
	* demo/fibonacci.sl,
	* demo/roman.sl,
	* tests/1_basic/0_slr_args/args.sl,
	* tests/1_basic/2_div/div.sl: Simplify accordingly.

2009-04-07  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve printf(). 

	Until now printf() would expect all integers to be passed as "long
	long", and all floats to be passed as "double", which required
	explicit casts for arguments of other types. This is now
	corrected, by having the size of each argument computed at the
	point of use and passed as argument to printf. The interface now
	looks and feels more C's native printf().

	* include/cstdint.slh,
	* include/svp/argslot.slh,
	* include/svp/io.slh,
	* include/svp/iomacros.slh,
	* lib/svplib/io.sl: Fix printf.

	* demo/answer.sl,
	* demo/10threads.sl,
	* demo/fft.sl,
	* tests/1_basic/0_slr_args/args.sl: Simplify accordingly.	

2009-04-07  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Code cleanup.
	
	* include/slr.slh: Give the type of the input data structure a
	name. This prevents a compiler warning when compiling via
	C++. Have slr_var take the type before the variable name, as is
	customary in C.

	* demo/roman.sl,
	* demo/fibonacci.sl,
	* demo/fft.sl,
	* tests/1_basic/0_slr_args/args.sl,
	* tests/1_basic/2_div/div.sl: Update accordingly.

2009-04-07  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve documentation.
	
	* bin/slr.in: Better documentation.
	
	* bin/sag: Better handle listing of program variables.

	* doc/NEWS.txt: Mention `slr'.

2009-04-06  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* lib/t-pppalpha/slimpl.m4: Mark sync as clobbering the whole
	memory, so that any variable is forcibly re-read from memory after
	the sync. This prevents the compiler from caching the memory
	values in registers across a sync.

	* tests/0_minimal/3_mem/sideeffect.sl: Add test for this bug.

2009-04-06  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Make `slr' recognize variable definitions using command line
	argument of form "-dVAR" or "-dVAR=..." as recommended by
	C. Grelck. Update documentation. Minor bug fix in `slt'.

	* bin/slr.in: Handle command line differently. Document it.

	* demo/roman.sl,
	* demo/fibonacci.sl,
	* demo/fft.sl,
	* tests/1_basic/2_div/div.sl,
	* tests/1_basic/0_slr_args/args.sl: Update accordingly.	

	* bin/slt.in (check_status): Initialize $signal to 0 to avoid a
	bad integer expression in `test' later.

2009-04-06  Raphael 'kena' Poss  <r.c.poss@uva.nl>
	Transitory fix requested by M. Hicks.
	
	* bin/spp (pppalpha.makespecial): Use "ldgp" if no gpdisp number
	is available.

2009-04-06  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Transitory fix requested by M. Hicks.
	
	* bin/spp (pppalpha.makespecial): For prologue detection,
	recognize a single "ldgp" macro as well instead of only 2
	instructions. This may allow to use GCC 4.1 as Alpha
	cross-compiler.

2009-04-06  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improvements to test engine and documentation. Minor cleanup.
	
	* bin/slt.in: Allow specifying implementation names via an
	environment variable. Provide (cleaner) mechanism to add extra
	args for compilation and execution. Properly handle runtime
	failure when a test code requires multiple test runs. Document the
	features.

	* bin/slt.in: Reorganize documentation sections so that the manual
	page looks nice.

	* configure.ac: Add new parameters --enable-check-utc and
	--disable-check-ppp that set Automake conditionals.
	
	* tests.mk: Based on conditionals set by configure, either ignore
	or use the test results for the muTC core compiler and PPP core
	compiler.

	* bin/slt.in: Take location of `slr' from Autoconf variable.
	* bin/Makefile.am: Update accordingly.
	
	* bin/cce.in: Use the regular "mtalpha-sim" back-end for the muTC
	core compiler, since the code to be run there can be compiled with
	the alternate compiler and should not use a different calling
	convention.
	
	* lib/mtalpha-sim-proto: Kill tree as is now unused.

	* bin/slr.in,
	* bin/slc.in,
	* bin/cce.in: Add warranty disclaimer.
	* bin/slt.in: Update licensing info and add warranty disclaimer.

2009-04-05  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Rename `sgr' to `slr' as suggested by C. Grelck. Minor other
	improvements.

	* bin/sgr.in: Rename to...
	* bin/slr.in: here.

	* include/sgr.slh: Rename to...
	* include/slr.slh: here.

	* tests/1_basic/0_sgr_args: Rename to...
	* tests/1_basic/0_slr_args: here.

	* Makefile.am,
	* bin/slr.in,
	* include/slr.slh,
	* bin/Makefile.am,
	* bin/sag,
	* bin/slt.in,
	* demo/fft.sl,
	* demo/fibonacci.sl,
	* demo/testfft.sh,
	* doc/HACKING.txt,
	* doc/Makefile.am,
	* doc/acronyms.txt,
	* doc/requirements.txt,
	* lib/arggen.sl,
	* lib/host-host-ptl/slrt.c,
	* lib/host-host-seqc/load.c,
	* lib/host-host-seqc/slrt.c,
	* lib/mtalpha-sim/slrt.s,
	* tests.mk,
	* tests/1_basic/2_div/div.sl,
	* tests/1_basic/0_slr_args/args.sl: Rename `sgr' to `slr'.	
	
	* demo/roman.sl: Declare number as runtime input variable.
	
	* bin/slt.in: Properly set error condition when any but the last
	run fail.

	* Makefile.am: Do not forget to distribute `include/svp/perf.slh'.

2009-04-03  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Add new performance measurement API to the SL library. Improve FFT
	demo. Fix bugs thanks to testing.
	
	* include/svp/perf.slh: Implement primitive to read the cycle
	counter.

	* include/cstdint.slh: Define some types manually when running
	Alpha, since stdint.h is not available then. This needs to be
	improved later.

	* demo/fft.sl: Use new performance measurement mechanism. Skip
	some computations when input parameter Pc is set. Separate output
	of each array for more meaningful "diff".
	
	* demo/testfft.sh: Update accordingly.
	
	* demo/fft_gentable.c: Generate more table entries (M=11).

	* demo/Makefile.am: Reinstate fft during "make check".
	
	* bin/spp (pppalpha.optprologue): Be more careful when optimizing
	FP initialization: only remove the spilling instruction, not
	potential loads from SP. (discovered when running FFT)

	* bin/spp (pppalpha.addswchll): Recognize "rpcc" as an instruction
	which overwrites its operand with no read.

	* bin/spp (pppalpha.filter): Rename more locals to squeeze window
	some more (also fp, ra, pv, rv).

	* lib/mtalpha.mk,
	* demo/Makefile.am: Set additional Alpha optimization flags.

	* bin/cce.in: Use -O2 by default, not -Os.

	* bin/sag (genasm): Emit structure names to please C++ compiler
	when running in ptl mode.

2009-04-02  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Bug fixes thanks to testing.
	
	* lib/host-host-seqc/load.c: Correctly compute the file size, so
	as to not forget to read the last byte of data.

	* lib/t-pppalpha/slimpl.m4: Remove redundant definition of
	sl_create. Fix handling of places.

2009-04-02  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improvements to unit test script (`slt'). Restore 'make distcheck'
	again.

	Make it possible to 1) set expected failures for specific
	implementations using pattern matching, 2) disregard a test phase
	regardless of its status (XIGNORE), 3) indicate to `slt' that
	there should be multiple executions of the program with different
	sets of parameters to `sgr' (SLT_RUN).

	See "slt --help" for details.
	
	* bin/slt.in: Implement extra features. Document them.
	
	* bin/sgr.in: Relax argument parsing. Can now interleave program
	variables and simulator parameters.

	* demo/10threads.sl,	
	* tests/0_minimal/2_args/delayshared.sl: use XIGNORE with ptl
	since ptl does not implement the delayed shared sets properly.

	* tests.mk: use XIGNORE for utc0 to relieve pressure on muTC core
	compiler during "make distcheck"

	* tests/1_basic/0_sgr_args/args.sl: Test the "sgr program
	variables" mechanism.
	
	* demo/fibonacci.sl,
	* tests/1_basic/2_div/div.sl: use the new SLT_RUN mechanism.

	* tests/mkalltests.mk: disable index tests for now as they require
	break and this is not properly designed in SL yet.

	* Makefile.am: Do not forget to distribute sgr.slh.

2009-03-30  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	First "working" implementation of parameter passing for SL
	programs. 

	* bin/sag: Use C syntax instead of assembly for data source
	code. Fix case where an empty list is specified as
	initializer. Print help on standard error.

	* lib/arggen.sl: Add.

	* include/sgr.slh: Add.
	
	* bin/sgr.in: Better error handling. Compute data source file
	based on command line, `sag' and the sgr specifiers in the program
	binary from `sgr.slh'. Use `sgr_datatag' in binary as arch name to
	compile data source file and `arggen.sl', then recurse to generate
	the data. Define parameter -Ws to pass arguments to simulator.
	
	* lib/host-host-seqc/slrt.c,
	* lib/host-host-ptl/slrt.c,	
	* lib/mtalpha-sim/slrt.s: Define "sgr_datatag" in output binary.
	
	* include/svp/io.slh: Declare svp_io_write, required for
	arggen.sl.
	* include/svp/iomacros.slh: Wrap it.
	* lib/svplib/io.sl: Implement it.
	* lib/Makefile.am: Update accordingly.

	* lib/r-host/run.sh,	
	* lib/mtalpha-sim/run.sh.in: Recognize data file. Better error
	handling.
	
	* bin/Makefile.am: Distribute / install `sag'.
	* tests.mk: Overload SAG during tests.
	* doc/acronyms.txt: Document `sag'.

	* lib/host-host-seqc/load.c: Add missing file from 2 previous commits.

	* demo/fibonacci.sl: Use the new parameter system.
	
	* demo/fft.sl: Use the new parameter system. Allow to skip
	printing the data after the computation based on the value of
	parameters Pi (print ints) and Pf (print floats).

	* demo/testfft.sh: Add script to benchmark the fft, based on the
	new parameter system.
	* demo/Makefile.am: Update accordingly.
	
	* lib/div: Kill, as is now unused.
	* bin/cce.in: Better handling of unknown tags.

	* bin/spp: Bug fix thanks to fibo & fft: remove FP/RA spill in
	function prologue. This provides (some) support for C99's VLAs.
	
2009-03-30  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Capture run scripts in subdirectories. Restore 'make check'
	temporarily.

	* lib/r-host: Rename to...
	* lib/r-host/run.sh: here.
	* lib/r-mtalpha-sim.in: Rename to...
	* lib/r-mtalpha-sim/run.sh.in: here.
	* lib/r-mtsparc-sim.in: Rename to...
	* lib/r-mtsparc-sim/run.sh.in: here.

	* bin/sgr.in,
	* lib/Makefile.am,
	* configure.ac: Update accordingly.

	* lib/seqc.mk,	
	* lib/ptl.mk: Capture missing dependency to host-host-seqc/load.c.

	* lib/r-mtalpha-sim/run.sh.in: Temporarily initialize argument
	pointer to 0. (will fix in later commit)
	
	* lib/host-host-seqc/load.c: Initialize argument pointer to 0 when
	no data file is specified, instead of aborting.
	
2009-03-30  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Start implementing parameter passing for SL programs.
	
	* bin/sag: Add. 

	* lib/host-host-seqc/load.c,
	* lib/host-host-seqc/slrt.c,
	* lib/host-host-ptl/slrt.c: Load data file before program startup.

	* lib/mtalpha-sim/slrt.s: Initialize pointer to data before startup.
	
2009-03-28  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve Makefile for required tools.
	
	* Makefile-reqs.mk: Reorder dependencies of "all" to build the
	sparc binutils before mgsim.

2009-03-28  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve compatibility with Ubuntu.
	
	* bin/cce.in: Add slrt.o before -lsos in link flags, since slrt
	can depend on -lsos and Ubuntu has strict linker semantics.

	* configure.ac: Lower Autoconf requirement to 2.61, which is
	reasonably recent (later than 2.60) and pleases Ubuntu users.

	* doc/requirements.txt: Document extra requirements for building
	documentation, with highlight on Debian/Ubuntu package names.

	* bin/slt.in, 
	* bin/timeout.in: Print a newline before the "interrupted by
	signal" message, to clean up terminal.

2009-03-27  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Bug fixes thanks to testing: improve portability with systems
	where /bin/sh is not bash (e.g. Ubuntu). Handle signals better
	during testing.
	
	* bin/slt: Rename to...	
	* bin/slt.in: Here. Announce dependency on bash. Better signal
	handling.
	
	* bin/timeout: Rename to...	
	* bin/timeout.in: Here. Announce dependency on bash. Better signal
	handling.
	
	* bin/Makefile.am,
	* doc/Makefile.am,
	* tests.mk: Update accordingly.

2009-03-27  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Bug fixes thanks to testing.
	
	* bin/spp: Recognize cvt*, itof* and ftoi* instructions as
	instructions that overwrite their 2nd parameter (like "mov"). This
	avoids unneeded swch annotations. Recognize "blbc" as branch
	instruction.

	* lib/svplib/io.sl: Use "const char*" instead of "char*" to please
	the compiler.
	
2009-03-27  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve compiler interface: allow linking without startup object
	or standard library.
	
	* bin/slc.in: Handle -nostdlib, -nodefaultlibs,
	-nostartfiles. Document them.
	
	* bin/cce.in: Use variables slc_use_slrt and slc_use_slos provided
	by slc.

	* lib/seqc.mk,
	* lib/mtalpha.mk,
	* lib/ptl.mk: Use -nostdlib where appropriate.

	* bin/cce.in: Require slrt.o when -nostartfiles is not specified.

2009-03-26  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix handling of long argument lists.

	* bin/spp: Add missing shared registers (df5, sf5) for FP shared
	passing. Restore original intended values for the magic
	numbers (11 and 12, resp). Strip whitespace from thread function
	parameter names, so that the m4 macro names for the
	setters/getters do not contain whitespace either. In mapcall(),
	properly double #shareds in checks. Make the structure that holds
	extra arguments "volatile" to force the compiler to emit the
	stores on time. Use "__restrict__" instead of "restrict".

	* lib/t-pppalpha/include/sl_support.h: Tell the compiler in
	__sl_getshp that the same register can be used for the dependent
	shared after the volatile asm has been reached (allows for more
	optimization).

	* tests/1_basic/3_args/gencall.py: Add test case generator. 

	* tests/mkalltests.sh: Use it to generate more tests.

2009-03-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve documentation.
	
	* doc/sl_deps.graffle,
	* doc/sl_deps.png: Remove reference to Alpha/Linux sysroot.
	
	* doc/requirements.txt: Update accordingly.
	

2009-03-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve test script to support text only output (requested by
	Simon Polstra in utcc).

	Improve requirements "Makefile" to download sparc binutils (they
	are not needed yet, this is an investment for later).
	
	* bin/slt: Add new output mode: sequential text only (no control
	codes), enabled with a non-empty environment variable
	TEXT_ONLY. Document it in --help.

	* Makefile-reqs.mk: Add rules to fetch sparc/mtsparc binutils.

2009-03-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	More bug fixes thanks to Andrei Matei.

	* bin/cce.in: Use $slc_libdir to find the slrt and library, not
	$slc_datadir.
	
	* bin/slc.in: Give a source file's directory as extra -I to m4 to
	allow m4_include's to work a bit more like CPP's #include "".
	
	* configure.ac: Search for a suitable $(LN_S).	
	* doc/Makefile.am: Use it. Fixes use of picture in document when
	building in a separate directory.

	* configure.ac: The Sparc utilities have architecture name
	mtsparc-leon-linux, not mtsparc-linux-gnu.

	* Makefile.am: Extract more rules outside of the maintainer mode,
	as suggested by Andrei.

	* tests.mk (TESTS_ENVIRONMENT): Run "slt" with $(SHELL), so that
	extra shell arguments can be passed on the command line of "make
	check".

2009-03-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Bug fixes thanks to initial feedback from Andrei Matei.
	
	* bin/Makefile.am (edit_scripts): Fix substitution of slc_incdir
	as suggested by Andrei Matei.
	
	* demo/Makefile.am: Link fft_gentable with -lm, as suggested by
	Andrei Matei.

	* Makefile.am (SUBDIRS): Build documentation last so that missing
	tools do not prevent the rest from compiling.

	* doc/requirements.txt: List requirements for building the
	documentation.
	
2009-03-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Simplify installation of prerequisites. No more Alpha/Linux
	sysroot is required.
	
	* doc/requirements.txt,
	* Makefile-reqs.orig: Remove overload of MAKEINFO, as the binutils
	now detect it properly. Remove dependency on Alpha sysroot.

	* Makefile-reqs.orig: Split and separate configuration-dependent
	rules to...
	* Makefile-reqs.mk: here. Simplify. Patch up GCC's Makefile as
	necessary to prevent failures in the absence of a sysroot.
	
2009-03-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Add Makefile to automate installation of prerequisites.

	* Makefile-reqs.orig: Add.
	
2009-03-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve documentation for external requirements.

	* doc/requirements.txt: Add new section, clarify conclusion.

2009-03-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Document external requirements.
	
	* doc/requirements.txt,
	* doc/sl_deps.graffle,
	* doc/sl_deps.png: Add.
	* doc/Makefile.am: Update accordingly.
	
	* doc/README.txt: Indicate where to find the documentation about
	requirements.

2009-03-24  Raphael 'kena' Poss  <r.c.poss@uva.nl>
	
	Fix "ppp" compiler thanks to testing. Improve FFT.
	(now FFT works from source in simulator!)
	
	* bin/spp (pppalpha.lexer): Do not remove duplicate whitespace, as
	it may be legitimate (e.g. in .ascii). Recognize FP branch
	instructions.

	* demo/fft.sl: Change algorithm, as previous algorithm was not
	thread-safe. Convert FP numbers to integers before printing, to
	work around bug in FP print function.	
	* demo/fft_gentable.c: Update for new algorithm.

	* lib/svplib/io.sl: Inline display of "nan", "+inf" and "-inf".
	
2009-03-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Minor changes for FFT testing.
	
	* demo/Makefile.am: Ship fft_table.slh with the distribution.
	* demo/fft_gentable.c: Make code a bit more generic to ease testing.

2009-03-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Code cleanup. Fix "make distcheck"
	
	* bin/cce.in: Revert use of $CC (test argument was left by mistake
	in previous commit). Only list env.vars that have an effect.

	* demo/Makefile.am: Erase fft_table.slh during clean. Cleanup
	makefile.

2009-03-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Add FFT example code. Fixes thanks to testing.
	
	* demo/fft.sl,
	* demo/fft_gentable.c: Add new demo program.
	* demo/Makefile.am: Update accordingly.

	* lib/svplib/io.sl: Fix display of FP numbers.
	
	* bin/spp (pppalpha.addswchll): Avoid adding "swch" on
	instructions that use the index/tls register just after the
	beginning of the function.

	* bin/slc.in: Fix use of mktemp (use template with X's).

2009-03-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve use of Autotools & code cleanup.
	
	* m4/m4.m4: Add.
	* configure.ac: Check for more programs. In particular, the MT
	utilities are checked explicitly. Require GNU m4. Rename
	USE_TESTSUITE into ENABLE_TESTSUITE. Use BASH instead of SBASH.

	* bin/Makefile.am,
	* bin/cce.in,
	* bin/slc.in,	
	* bin/sgr.in: Update accordingly. Simplify. Now the scripts use
	the values supplied by Autoconf for defaults. (They can still be
	overriden via variables).

	* tests.mk: Set environment variables before calling `slc' and
	`slt'. The ".local" scripts are not needed any more.

	* demo/Makefile.am,
	* tests/Makefile.am: Update accordingly.

	* lib/Makefile.am: Split into...
	* lib/mtalpha.mk: this,
	* lib/seqc.mk: this,
	* lib/ptl.mk: and this.

	* lib/r-mtalpha-sim: Rename to...
	* lib/r-mtalpha-sim.in: this. Take location of simulator from Autoconf.
	* lib/r-mtsparc-sim.in: Duplicate feature from r-mtalpha-sim.
	* configure.ac: Update accordingly.

	* Makefile.am: Add rule "show-vars" for convenience.
	* doc/HACKING.txt: Document show-vars.

2009-03-22  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix definition of places for the simulator.
	
	* lib/mtalpha-sim/include/sl_support.h: PLACE_DEFAULT is 1 on
	mt-alpha (according to simulator sources).
	
	* bin/spp (pppalpha.remdefaults): Update accordingly.

2009-03-22  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Reinstate "make distcheck" by hiding the unit test suite behind a
	configure argument.

	* configure.ac: Add conditional "USE_TESTSUITE".
	* tests/mkalltests.sh,	
	* tests/Makefile.am: Activate unit test suite only when
	USE_TESTSUITE is enabled.

	* doc/HACKING.txt: Document the change.

	* bin/slt: Clean up better after a test succeeds, especially the
	directory containing the reference output.

	* Makefile.am: Add missing reference to include/svp/roman.slh.
	
2009-03-22  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Faster (microthreaded) integer divide + improvements to demos.

	* lib/mtalpha-sim/mtdiv.s: Add, courtesy of Mike Lankamp.
	* lib/Makefile.am: Update accordingly.
	
	* include/svp/roman.slh,	
	* lib/svplib/roman.sl: Implement "roman" as a actual thread
	function instead of a macro.
	
	* lib/Makefile.am,
	* demo/roman.sl: Update accordingly.

	* demo/fibonacci.sl: Use "INT" instead of "number" for the
	preprocessor macro, to avoid substitution in the output message.

	* demo/answer.sl: Work around bug in printf (output of 64 vs. 32
	bits integers).
 	
	* demo/Makefile.am: Reinstate rules that create executables during
	"make all", so that make outputs something to try out with "sgr".

	* lib/mtalpha-sim/Makefile: Kill, as it was unused.
	
2009-03-20  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	More tests & improvements thanks to testing.	

	* bin/spp: Implement local register window compression.

	* bin/slt: Fix checking against reference output. Allow
	implementation specifiers to indicate extra env vars to set during
	testing. Change naming of output directories to a simple digit.
	
	* lib/t-pppalpha/include/sl_support.h,
	* bin/spp,
	* lib/t-pppalpha/slimpl.m4: Fix delayed shared initialization.

	* lib/r-mtalpha-sim: Allow extra simulator arguments via SIMARGS
	variable.
	
	* tests/0_minimal/2_args/delayshared.sl: Simplify.

	* tests/div.sl: Rename to...	
	* tests/1_basic/2_div/div.sl: here. Simplify to use printf.

	* demo/10threads.sl: Use printf.	

	* tests/1_basic/1_index/common.slh,
	* tests/1_basic/1_index/defaults.sl,
	* tests/1_basic/1_index/inf1.sl,
	* tests/1_basic/1_index/inf2.sl,
	* tests/1_basic/1_index/inf3.sl,
	* tests/1_basic/1_index/inf4.sl,
	* tests/1_basic/1_index/inf5.sl,
	* tests/1_basic/1_index/neg1.sl,
	* tests/1_basic/1_index/neg2.sl,
	* tests/1_basic/1_index/neg3.sl,
	* tests/1_basic/1_index/neg4.sl,
	* tests/1_basic/1_index/neg5.sl,
	* tests/1_basic/1_index/neg6.sl,
	* tests/1_basic/1_index/neg7.sl,
	* tests/1_basic/1_index/neg8.sl,
	* tests/1_basic/1_index/neg9.sl,
	* tests/1_basic/1_index/pos1.sl,
	* tests/1_basic/1_index/pos2.sl,
	* tests/1_basic/1_index/pos3.sl,
	* tests/1_basic/1_index/pos4.sl,
	* tests/1_basic/1_index/pos5.sl,
	* tests/1_basic/1_index/pos6.sl,
	* tests/1_basic/1_index/pos7.sl,
	* tests/1_basic/1_index/pos8.sl,
	* tests/1_basic/1_index/pos9.sl,
	* tests/1_basic/2_div/div2.sl: Import from utcc.

	* tests/mkalltests.sh: Remove 'x_' tests from Automake test
	suite (all failures are not properly reported by all
	implementations, but we want to ignore this for now and focus on
	the positive features).
	
	* demo/fibonacci.sl: Reduce N to fit execution time within 5
	seconds (timeout during tests).

	
2009-03-19  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	More tests & improvements thanks to testing.
	
	* bin/spp,
	* lib/t-pppalpha/include/sl_support.h,
	* lib/t-pppalpha/slimpl.m4: Declare thread arguments in a single
	namespace before the create, to catch multiple definitions of the
	same identifier. Copy the thread arguments to a new temporary
	after the sync, so that further references use the temporary
	instead of the variable shared with the child family (which could
	be reused via a register for a new family).

	* lib/t-seqc/slimpl.m4: Imitate behavior of t-pppalpha for
	arguments (useful for comparison/testing).

	* tests/0_minimal/2_args/args1.sl: Add feature check.
	* demo/10threads.sl: Remove workaround as the feature is now fixed.
	
	* lib/t-ptl/slimpl.m4: Avoid setting every family as a root for
	continuation creates (3rd create parameter in PTL).

	* bin/spp (pppalpha.addswchll): Recognize more instructions that
	cause a long latency operation (esp. FP ops). Avoid swch after
	"setempty" which does not read its register.
	
	* doc/acronyms.txt: Document 'slt'. 

	* bin/slt: Properly use TEST_HERE.
	* tests.mk: Use it.

	* tests/0_minimal/1_create/fididreuse.sl,
	* tests/0_minimal/1_create/cr1.sl,
	* tests/0_minimal/2_args/argshadow.sl: Fix use of sl_sync.

	* tests/0_minimal/2_args/x_wrglparm.sl,	
	* tests/0_minimal/2_args/x_wrglarg.sl: Announce that failure can
	possibly occur earlier than compilation proper.
	
	* tests/0_minimal/2_args/x_addrparm2.sl: Do not try to write to
	global.
	
2009-03-19  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Move language specification away from the software project.
	
	* doc/spec.txt: Remove, as is now replaced by CSA note [sl1].
	* doc/lang.txt: Remove, as is now replaced by CSA note [sl2].
	
	* doc/Makefile.am,
	* doc/README.txt: Update accordingly.	

2009-03-18  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve interface of slc.
	
	* bin/slc.in: Complain early when input files do not
	exist. Complain if there is nothing to do.

2009-03-18  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Code cleanup & copyright notice.
	
	* reheader.pl: Import from utcc. Update.	
	* Makefile.am: Add "reheader" rule to update copyright notice.
	
	* bin/cce.in,
	* bin/scu,
	* bin/sgr.in,
	* bin/slc.in,
	* bin/slt,
	* bin/spp,
	* demo/10threads.sl,
	* demo/answer.sl,
	* demo/fibonacci.sl,
	* demo/helloworld.sl,
	* demo/roman.sl,
	* demo/test.sl,
	* include/cstddef.slh,
	* include/cstdint.slh,
	* include/m4sugar_transform.sed,
	* include/slc.m4,
	* include/svp/argslot.slh,
	* include/svp/assert.slh,
	* include/svp/div.slh,
	* include/svp/io.slh,
	* include/svp/iomacros.slh,
	* include/svp/lib.slh,
	* include/svp/roman.slh,
	* lib/div/create2.h,
	* lib/div/divide.c,
	* lib/div/divmod.h,
	* lib/div/encapsulate2.h,
	* lib/div/regs2.h,
	* lib/div/test-divide.c,
	* lib/div/utc2.h,
	* lib/host-host-ptl/include/ptl_config.h,
	* lib/host-host-ptl/include/ptl_debug.h,
	* lib/host-host-ptl/include/ptl_deps.h,
	* lib/host-host-ptl/include/ptl_svp.h,
	* lib/host-host-ptl/include/ptl_vars.h,
	* lib/host-host-ptl/include/svp_os.h,
	* lib/host-host-ptl/include/template.pl,
	* lib/host-host-ptl/ptl_debug.cc,
	* lib/host-host-ptl/ptl_svp.cc,
	* lib/host-host-ptl/ptl_vars.cc,
	* lib/host-host-ptl/slrt.c,
	* lib/host-host-seqc/include/svp_os.h,
	* lib/host-host-seqc/slrt.c,
	* lib/mtalpha-sim-proto/include/sl_support.h,
	* lib/mtalpha-sim-proto/include/svp_asmdiv.h,
	* lib/mtalpha-sim-proto/include/svp_os.h,
	* lib/mtalpha-sim/include/svp_asmdiv.h,
	* lib/mtalpha-sim/include/svp_os.h,
	* lib/mtalpha-sim/slrt.s,
	* lib/svplib/div.sl,
	* lib/svplib/io.sl,
	* lib/t-pppalpha/include/sl_support.h,
	* lib/t-pppalpha/slimpl.m4,
	* lib/t-ptl/include/sl_support.h,
	* lib/t-ptl/slimpl.m4,
	* lib/t-seqc/include/sl_support.h,
	* lib/t-seqc/slimpl.m4,
	* lib/t-utc/slimpl.m4,
	* lib/t-utc0/include/sl_support.h,	
	* lib/t-utc0/slimpl.m4: Update copyright notice. Strip trailing
	whitespace.

	* configure.ac,
	* Makefile.am,
	* bin/Makefile.am,
	* demo/Makefile.am,
	* doc/Makefile.am,
	* tests/Makefile.am,
	* lib/Makefile.am,
	* tests.mk: Update copyright notice.

	* bin/slt: Fix documentation.

	* lib/t-pppalpha/protoimpl.m4: Kill, as file is now unused.

2009-03-18  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improvements to test script.
	
	* bin/slt: Remove test output when test is successful and KEEP is
	not set. Factorize output of test results. Simplify display offset
	computations. Improve documentation. Use different exit codes for
	different exit situations. Propose license. Allow to use a local
	directory to help "make distcheck" build from a directory
	different from source.

	* doc/Makefile.am: Build man page for 'slt'. Fix locations of
	dependencies of language spec to be nice with "make distcheck".
	
2009-03-17  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Update handling of family exit code.
	
	* lib/t-ptl/slimpl.m4,
	* lib/t-seqc/slimpl.m4: Fix sl_sync to follow specification.

	* tests/0_minimal/1_create/x_invsync.sl: Make structure bigger so
	that it becomes an invalid output for the exit code with the
	'alternate' compiler.
	
	* tests/0_minimal/2_args/useexit2.sl: Import from utcc.

2009-03-17  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	More tests.
	
	* tests/0_minimal/2_args/argshadow.sl,
	* tests/0_minimal/2_args/delayshared.sl,
	* tests/0_minimal/2_args/useafter.sl,
	* tests/0_minimal/2_args/useafter2.sl,
	* tests/0_minimal/2_args/useafter3.sl,
	* tests/0_minimal/2_args/useafter4.sl,
	* tests/0_minimal/2_args/x_addrarg.sl,
	* tests/0_minimal/2_args/x_addrparm.sl,
	* tests/0_minimal/2_args/x_addrparm2.sl,
	* tests/0_minimal/2_args/x_argnr.sl,
	* tests/0_minimal/2_args/x_argnr2.sl,
	* tests/0_minimal/2_args/x_argscope.sl,
	* tests/0_minimal/2_args/x_deadlock.sl,
	* tests/0_minimal/2_args/x_dupdecl.sl,
	* tests/0_minimal/2_args/x_dupdecl2.sl,
	* tests/0_minimal/2_args/x_glnoinit.sl,
	* tests/0_minimal/2_args/x_invinit.sl,
	* tests/0_minimal/2_args/x_invinit2.sl,
	* tests/0_minimal/2_args/x_invsh1.sl,
	* tests/0_minimal/2_args/x_invsh2.sl,
	* tests/0_minimal/2_args/x_invsh3.sl,
	* tests/0_minimal/2_args/x_invsh4.sl,
	* tests/0_minimal/2_args/x_nothread.sl,
	* tests/0_minimal/2_args/x_wrglarg.sl,
	* tests/0_minimal/2_args/x_wrglparm.sl: Import from utcc.

2009-03-16  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	More tests & improvements thanks to testing.
	
	* lib/t-ptl/slimpl.m4,	
	* lib/t-seqc/slimpl.m4: Simplify loops by using m4_foreach from
	m4sugar. Adopt new semantics for 1st create parameter. Check
	proper balancing of create and sync. Protect initializers that
	contain colons.

	* lib/t-ptl/slimpl.m4,
	* lib/t-ptl/include/sl_support.h,
	* lib/t-pppalpha/slimpl.m4,		
	* lib/t-pppalpha/include/sl_support.h: Use PLACE_DEFAULT as
	default 2nd create parameter instead of SVP_LOCAL, as documented.

	* bin/spp: End create with a semicolon, as it may be required for
	copy of fid afterwards.
	
	* tests/0_minimal/1_create/cr1.s,
	* tests/0_minimal/1_create/cr1.sl,
	* tests/0_minimal/1_create/crif.sl,
	* tests/0_minimal/1_create/crif2.sl,
	* tests/0_minimal/1_create/crif3.sl,
	* tests/0_minimal/1_create/crnop.sl,
	* tests/0_minimal/1_create/crnop2.sl,
	* tests/0_minimal/1_create/crnop3.sl,
	* tests/0_minimal/1_create/crnopdefs.sl,
	* tests/0_minimal/1_create/fididreuse.sl,
	* tests/0_minimal/1_create/x_crnosync.sl,
	* tests/0_minimal/1_create/x_crnotstm.sl,
	* tests/0_minimal/1_create/x_extcreate.sl,
	* tests/0_minimal/1_create/x_extcreatedefs.sl,
	* tests/0_minimal/1_create/x_inffamily.sl,
	* tests/0_minimal/1_create/x_invsync.sl,
	* tests/0_minimal/1_create/x_nested.sl,
	* tests/0_minimal/1_create/x_nocreate.sl,
	* tests/0_minimal/1_create/x_nothread.sl,
	* tests/0_minimal/2_args/sum.sl,
	* tests/0_minimal/3_mem/crdefaults.sl,
	* tests/0_minimal/3_mem/if.sl,
	* tests/0_minimal/3_mem/indcreate.sl,
	* tests/0_minimal/4_index/indexdecl.sl: Import from utcc.
	
2009-03-16  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improvements thanks to testing.
	
	* include/svp/roman.slh: Implement simple number printer which
	does not require divide.

	* include/svp/lib.slh: Expose "nop" as svp_nop.
	* doc/spec.txt: Update accordingly.

	* bin/slt: Better error handling. Try to handle signals more
	gracefully.
	
	* tests.mk: Missing from previous commit.
	
2009-03-16  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Extend test suite.

	* configure.ac,
	* Makefile.am: Add subdirectory "tests".
	
	* tests/Makefile.am: Capture TESTS_ENVIRONMENT to...	
	* tests.mk: here.

	* tests/mkalltests.sh: Generate TESTS variable automatically.
	* tests/Makefile.am: Use it.
	* bootstrap: Update accordingly.

	* tests/0_minimal/0_trivial/div.sl,
	* tests/0_minimal/0_trivial/emptymain.sl,
	* tests/0_minimal/0_trivial/if.sl,
	* tests/0_minimal/0_trivial/if2.sl,
	* tests/0_minimal/0_trivial/nop.sl,
	* tests/0_minimal/0_trivial/x_abort.sl,
	* tests/0_minimal/0_trivial/x_empty.sl,
	* tests/0_minimal/0_trivial/x_illinsn.sl,
	* tests/0_minimal/0_trivial/x_infloop.sl,
	* tests/0_minimal/0_trivial/x_invcpp.sl,
	* tests/0_minimal/0_trivial/x_invm4.sl,
	* tests/0_minimal/0_trivial/x_invsyntax.sl,
	* tests/0_minimal/0_trivial/x_undefsym.sl: Import from utcc.
	
2009-03-16  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Bug fixes thanks to testing.
	
	* demo/10threads.sl: Copy shared after sync to new temporary, to
	work around current bug in compiler.

	* include/svp/iomacros.slh: Initialize printf arguments using
	assignments instead of initializer, to prevent gcc from using
	'memset' behind the scenes. Make structure volatile so that the
	assignments are not optimized away.

	* include/svp/div.slh: Use software divide in all implementations
	by default.

	* include/svp/lib.slh: Fix definition of "unlikely".

	* lib/t-pppalpha/include/sl_support.h,	
	* bin/spp: Emit create during translation, as it needs intricate
	registers lists. Bark when "jsr" is found in the output.

	* lib/mtalpha-sim/include/svp_os.h: Insert "nop"'s before the halt
	instruction, as it causes a decode error in the pipeline and may
	cause a failure in the delay slot after a branch.

	* bin/cce.in: Use -Os by default instead of -O2.

	* bin/slt: Implement more.

	* tests/div.sl: Implement.
	
2009-03-16  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Start implementing slc test tools.
	
	* bin/timeout: Import from utcc.
	* bin/slt: Import from utcc (test1). Upgrade to slc interface.

	* bin/Makefile.am: Update accordingly.

	* demo/Makefile.am: Use the test system.

	* bin/slc.in: Document option -t.

2009-03-16  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix bug.
	
	* bin/spp: Rename zero registers after flattening, to catch them
	in prologue too.

2009-03-15  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Continue implementation of alternate "compiler". Now it can
	produce (possibly invalid) executable files. Use it for library
	and demo code.

	* bin/spp: Implement features.
	* bin/Makefile.am: Fix trailing whitespace.

	* lib/t-pppalpha/slimpl.m4,	
	* lib/t-pppalpha/include/sl_support.h: Remove swch from sync and
	create, as spp now adds it automatically.
	
	* configure.ac: Search for "ar" and "ranlib" from mtalpha
	binutils.

	* include/svp/lib.slh: Encapsulate __abort differently.

	* lib/div/divide.c: Copy to...
	* lib/svplib/div.sl: here; modify to use SL syntax.
	* lib/div/div.s: Remove, as is now compiled from source.

	* lib/mtalpha-sim/crt.s: Rename to...
	* lib/mtalpha-sim/slrt.s: here. Update to use MT register names.

	* lib/Makefile.am: Also build mtalpha library and crt; include
	div.sl into library for all targets.
	
	* demo/Makefile.am: Compile example code also using ppp compiler
	during check.

	* lib/svplib/io.sl: Let printf output the format character when it
	is unrecognized.

	* lib/r-mtalpha-sim: MGSim is now called MGAlpha.

2009-03-13  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Continue implementation of alternate "compiler".

	* bin/cce.bin: Clean up command line to "spp".
	
	* lib/t-pppalpha/slimpl.m4,
	* lib/t-pppalpha/include/sl_support.h,
	* bin/spp: Implement features.

2009-03-13  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* doc/spec.txt: Add missing reference to [utc2].

2009-03-13  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Upgrade the µTC-PTL back-end.
	
	* lib/t-ptl/include/sl_support.h: Allow to use an external PTL
	implementation.

	* lib/t-ptl/slimpl.m4,
	* lib/host-host-ptl/ptl_debug.cc,
	* lib/host-host-ptl/ptl_svp.cc,
	* lib/host-host-ptl/ptl_vars.cc,
	* lib/host-host-ptl/include/create.tpl,
	* lib/host-host-ptl/include/template.pl,
	* lib/host-host-ptl/include/ptl_debug.h,
	* lib/host-host-ptl/include/ptl_svp.h,
	* lib/host-host-ptl/include/ptl_vars.h,
	* lib/host-host-ptl/include/ptl_deps.h: Update to latest utc-ptl code.

2009-03-13  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Clean up code.
	
	* include/slc.m4: Make sl_proccall a statement, not an expression.
	
	* include/lib/iomacros.slh: Simplify wrapper macros since
	sl_proccall already encapsulate the argument declarations in a
	scope.
	
2009-03-12  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Add missing macro definitions.
	
	* lib/t-ptl/slimpl.m4,
	* lib/t-seqc/slimpl.m4,
	* lib/t-utc0/slimpl.m4,	
	* lib/t-utc/slimpl.m4: Add missing definition of "f"
	parameter/argument declarations.

2009-03-12  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Clean up code.
	
	* lib/svplib/io.sl, 
	* include/svp/io.slh,	
	* include/svp/iomacros.slh: Use the "f" parameter/argument form
	where applicable.

	* doc/spec.txt: Fix typo.

2009-03-12  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	More language specification, as requested by UH.
	
	* doc/spec.txt: List external document references. Add
	glossary. Clarify thread function type compatibility. List
	referenced CSA notes explicitly. Add missing definition of SVP
	constants. Include io.slh and iomacros.slh litterally to document
	the library. Document svp_assert better. Document svp/lib.slh.

	* doc/Makefile.am: Update accordingly.
	
	* include/std/io.slh: Document.

	* include/std/assert.slh,
	* include/std/iomacros.slh: Clean up macros.
	
	* include/std/io.slh: Move argslot definition to...
	* include/std/argslot.slh: here.
	* include/cstddef.slh,
	* include/cstdint.slh: Implement.

	* Makefile.am: Update accordingly.
	
2009-03-11  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Code cleanup. Add more svn:ignore patterns.
	
	* bin/Makefile.am (cce sgr slc): Remove extraneous use of mkdir.

2009-03-11  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	More documentation.
	
	* doc/README.txt: Update with additional references.
	
	* doc/NEWS.txt: Document last two batches of major changes.
	
	* doc/HACKING.txt: Document maintainer mode. Document additional
	requirements for developer. Document using scripts without
	installing. Document distribution.

	* doc/lang.txt: Remove section about library since this is now
	covered by the separate specification.

	* Makefile.am (NEWS): Copy from src/NEWS.txt.

2009-03-11  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Add missing directory creation in maintainer mode.
	
 	* Makefile.am (include/slc_*.m4): Create the "include" directory
	in case it was not created before.

2009-03-11  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Correct paths in included dirs.
	
	* bin/Makefile.am (edit_inst): Use $(includedir), not $(incdir).

2009-03-11  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Clarify language spec.
	
	* doc/spec.txt: Rephrase break type properly. Place restriction on
	contents of "create".
	
2009-03-11  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Add formal language specification.
	
	* doc/spec.txt: Add.
	* doc/Makefile.am: Update accordingly.

2009-03-09  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Remove the C preprocessor from the set of usable
	SL features.
	
	* doc/lang.txt: Document use of m4 preprocessor.

	* include/slc.m4: Remove definition of sl_include: since we
	officially advertise m4 there is no need to hide m4_include. Push
	definition of sl_proccall to after initialization.

	* bin/spp, 
	* lib/t-pppalpha/slimpl.m4: Escape quotes in C before sending to
	shell; be careful with extra ':' characters.

	* lib/t-ptl/slimpl.m4,
	* lib/t-seqc/slimpl.m4: Allow for global initializers containing
	":".

	* include/svp/div.slh,
	* include/svp/io.slh,
	* include/svp/assert.slh,
	* include/svp/iomacros.slh: 
	* include/svp/lib.slh: Use m4 macros instead of CPP.

	* bin/cce.in: Put -DHAVE_C_DIVIDE in tflags instead of ppflags
	since it is now used during translation.

	* include/svp/io.slh: Remove printfN macros; replace by a single
	printf macro definition which supports a variable argument list.
	
	* demo/10threads.sl,
	* demo/helloworld.sl,
	* demo/answer.sl,
	* demo/test.sl: Update accordingly. Avoid commas in text strings
	since we are not quoting macro arguments to keep code simple.	

2009-03-08  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Migrate fibonacci example to sl-apps.
	
	* demo/fibo.sl: Remove.
	* demo/fibonacci.sl: Link from sl-apps.
	* demo/Makefile.am: Update accordingly.

2009-03-08  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* bin/spp,
	* lib/t-pppalpha/slimpl.m4,	
	* lib/t-pppalpha/include/sl_support.h: Advance implementation of
	create.

2009-03-06  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Cleanup & bugfix.
	
	* configure.ac: Configure Python.
	* bin/cce.in,
	* bin/Makefile.am,
	* lib/t-pppalpha/slimpl.m4: Use configured Python.

	* lib/t-pppalpha/include/sl_support.h,
	* bin/spp: Remove family tag from argument names (they should all
	be in the same namespace).

	* bin/spp (pppalpha.makedic): Kill unused function.

2009-03-06  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Start implementing ppp "compiler".

	* lib/t-pppalpha/slimpl.m4: Add.
	* lib/t-pppalpha/include/sl_support.h: Add.
	* lib/Makefile.am (nobase_dist_pkgdata_DATA): Update accordingly.

	* bin/spp: Add.
	* bin/Makefile.am (dist_bin_SCRIPTS): Update accordingly.

2009-03-06  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Re-organize layout of sl_support.h.

	* lib/host-host-ptl/include/sl_support.h: Rename to...
	* lib/t-ptl/include/sl_support.h: ...here.

	* lib/host-host-seqc/include/sl_support.h: Rename to...
	* lib/t-seqc/include/sl_support.h: ...here.

	* lib/mtalpha-sim/include/sl_support.h: Rename to...
	* lib/t-utc0/include/sl_support.h: ...here.

	* lib/Makefile.am (nobase_dist_pkgdata_DATA): Update accordingly.

	* bin/cce.in (slc_ppflags): Add include/ subdirectory of
	translator to preprocessor search list.

	* lib/host-host-seqc/slrt.c: Update accordingly.

2009-03-06  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Complete previous commit; add bootstrap
	script to initialize the dev environment.
	
	* Makefile.am: Update after upgrade of m4sugar.
	* bootstrap: Add.

2009-03-06  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Upgrade m4sugar.
	
	* include/slc.m4: Implement m4_step. Use m4_wrap_lifo to fix
	undivert order.

	* include/m4sugar.m4: Upgrade from Autoconf 2.59.
	* include/m4sugar_version.m4: Add.
	* include/m4sugar_foreach.m4: Add.
	* include/m4sugar_transform.sed: Update accordingly.
	
2009-03-02  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Start using m4sugar.
	
	* include/m4sugar_transform.sed: Rename dnl to m4_dnl. Remove
	dependency on m4sugar's version.m4.

	* bin/slc.in: Make "cce" in charge of loading the m4 files.
	* bin/cce.in: Modify accordingly.
	
	* include/slc.m4: Modify to use m4sugar; initialize diversions
	properly. Change comment style to C++ (//). Load
	implementation-specific macros from "slimpl.m4" instead of
	"protoimpl.m4".

	* lib/t-seqc/protoimpl.m4: Rename to...
	* lib/t-seqc/slimpl.m4: here.

	* lib/t-ptl/protoimpl.m4: Rename to...
	* lib/t-ptl/slimpl.m4: here.

	* lib/t-utc/protoimpl.m4: Rename to...
	* lib/t-utc/slimpl.m4: here.

	* lib/t-utc0/protoimpl.m4: Rename to...
	* lib/t-utc0/slimpl.m4: here.

	* lib/Makefile.am: Modify accordingly.

	* lib/t-seqc/slimpl.m4,
	* lib/t-ptl/slimpl.m4,
	* lib/t-utc/slimpl.m4,	
	* lib/t-utc0/slimpl.m4: Start using m4sugar: use m4_if and
	m4_bregexp instead of m4_ifelse and m4_regexp.

2009-03-02  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* doc/lang.txt: Add.
	
	* doc/Makefile.am: Update accordingly. Set MAINTAINERCLEANFILES.

2009-03-02  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* bin/Makefile.am (edit_inst, edit_src): Substitute @incdir@.

	* bin/slc.in: Use @incdir@.
	
2009-03-02  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* lib/Makefile.am: Distribute t-utc, t-utc0,
	r-mtalpha-sim. Reorganize targets to separate data
	stuff (pkgdatadir) from libraries and objects (libdir).

	* lib/host-host-ptl/slrt.c,
	* lib/host-host-seqc/slrt.c: Prevent compiler from optimizing away
	__tag__.

	* bin/sgr.in: Kill $root (was unused). Use Bash explicitly to run
	the runner script.

	* lib/r-host: Fix handling of relative paths. 

	* bin/cce.in: Fix splitting of build dir and source dir (again).

	* bin/Makefile.am: Propagate more directory variables to scripts.
	
2009-03-02  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* configure.ac: Remove spurious reference to "include/Makefile".

2009-03-01  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* ChangeLog: initialize.

	* configure.ac: Check for CC, CXX, RANLIB, perl.

	* doc/README.txt: Add.
	* doc/Makefile.am,
	* Makefile.am: Change accordingly.

	* include/Makefile.am: move contents to...
	* Makefile.am: here, so that the include/ base is kept during
	install.

	* lib/Makefile.am: Add.
	* configure.ac: Change accordingly.
	* lib/host-host-seqc/Makefile,
	* lib/host-host-ptl/Makefile,
	* lib/host-host-ptl/include/Makefile: Remove, as is now obsolete.

	* lib/host-host-ptl/crt.c: Rename to...
	* lib/host-host-ptl/slcrt.c: here.

	* lib/host-host-seqc/crt.c: Rename to...
	* lib/host-host-seqc/slcrt.c: here.

	* demo/Makefile.am: Distribute more demos. Compile each demo for
	multiple targets.

	* bin/cce.in: Allow for includes spread over separate source dir
	and build dir.

$Rev$

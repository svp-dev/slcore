2009-03-26  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix handling of long argument lists.

	* bin/spp: Add missing shared registers (df5, sf5) for FP shared
	passing. Restore original intended values for the magic
	numbers (11 and 12, resp). Strip whitespace from thread function
	parameter names, so that the m4 macro names for the
	setters/getters do not contain whitespace either. In mapcall(),
	properly double #shareds in checks. Make the structure that holds
	extra arguments "volatile" to force the compiler to emit the
	stores on time. Use "__restrict__" instead of "restrict".

	* lib/t-pppalpha/include/sl_support.h: Tell the compiler in
	__sl_getshp that the same register can be used for the dependent
	shared after the volatile asm has been reached (allows for more
	optimization).

	* tests/1_basic/3_args/gencall.py: Add test case generator. 

	* tests/mkalltests.sh: Use it to generate more tests.

2009-03-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve documentation.
	
	* doc/sl_deps.graffle,
	* doc/sl_deps.png: Remove reference to Alpha/Linux sysroot.
	
	* doc/requirements.txt: Update accordingly.
	

2009-03-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve test script to support text only output (requested by
	Simon Polstra in utcc).

	Improve requirements "Makefile" to download sparc binutils (they
	are not needed yet, this is an investment for later).
	
	* bin/slt: Add new output mode: sequential text only (no control
	codes), enabled with a non-empty environment variable
	TEXT_ONLY. Document it in --help.

	* Makefile-reqs.mk: Add rules to fetch sparc/mtsparc binutils.

2009-03-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	More bug fixes thanks to Andrei Matei.

	* bin/cce.in: Use $slc_libdir to find the slrt and library, not
	$slc_datadir.
	
	* bin/slc.in: Give a source file's directory as extra -I to m4 to
	allow m4_include's to work a bit more like CPP's #include "".
	
	* configure.ac: Search for a suitable $(LN_S).	
	* doc/Makefile.am: Use it. Fixes use of picture in document when
	building in a separate directory.

	* configure.ac: The Sparc utilities have architecture name
	mtsparc-leon-linux, not mtsparc-linux-gnu.

	* Makefile.am: Extract more rules outside of the maintainer mode,
	as suggested by Andrei.

	* tests.mk (TESTS_ENVIRONMENT): Run "slt" with $(SHELL), so that
	extra shell arguments can be passed on the command line of "make
	check".

2009-03-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Bug fixes thanks to initial feedback from Andrei Matei.
	
	* bin/Makefile.am (edit_scripts): Fix substitution of slc_incdir
	as suggested by Andrei Matei.
	
	* demo/Makefile.am: Link fft_gentable with -lm, as suggested by
	Andrei Matei.

	* Makefile.am (SUBDIRS): Build documentation last so that missing
	tools do not prevent the rest from compiling.

	* doc/requirements.txt: List requirements for building the
	documentation.
	
2009-03-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Simplify installation of prerequisites. No more Alpha/Linux
	sysroot is required.
	
	* doc/requirements.txt,
	* Makefile-reqs.orig: Remove overload of MAKEINFO, as the binutils
	now detect it properly. Remove dependency on Alpha sysroot.

	* Makefile-reqs.orig: Split and separate configuration-dependent
	rules to...
	* Makefile-reqs.mk: here. Simplify. Patch up GCC's Makefile as
	necessary to prevent failures in the absence of a sysroot.
	
2009-03-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Add Makefile to automate installation of prerequisites.

	* Makefile-reqs.orig: Add.
	
2009-03-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve documentation for external requirements.

	* doc/requirements.txt: Add new section, clarify conclusion.

2009-03-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Document external requirements.
	
	* doc/requirements.txt,
	* doc/sl_deps.graffle,
	* doc/sl_deps.png: Add.
	* doc/Makefile.am: Update accordingly.
	
	* doc/README.txt: Indicate where to find the documentation about
	requirements.

2009-03-24  Raphael 'kena' Poss  <r.c.poss@uva.nl>
	
	Fix "ppp" compiler thanks to testing. Improve FFT.
	(now FFT works from source in simulator!)
	
	* bin/spp (pppalpha.lexer): Do not remove duplicate whitespace, as
	it may be legitimate (e.g. in .ascii). Recognize FP branch
	instructions.

	* demo/fft.sl: Change algorithm, as previous algorithm was not
	thread-safe. Convert FP numbers to integers before printing, to
	work around bug in FP print function.	
	* demo/fft_gentable.c: Update for new algorithm.

	* lib/svplib/io.sl: Inline display of "nan", "+inf" and "-inf".
	
2009-03-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Minor changes for FFT testing.
	
	* demo/Makefile.am: Ship fft_table.slh with the distribution.
	* demo/fft_gentable.c: Make code a bit more generic to ease testing.

2009-03-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Code cleanup. Fix "make distcheck"
	
	* bin/cce.in: Revert use of $CC (test argument was left by mistake
	in previous commit). Only list env.vars that have an effect.

	* demo/Makefile.am: Erase fft_table.slh during clean. Cleanup
	makefile.

2009-03-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Add FFT example code. Fixes thanks to testing.
	
	* demo/fft.sl,
	* demo/fft_gentable.c: Add new demo program.
	* demo/Makefile.am: Update accordingly.

	* lib/svplib/io.sl: Fix display of FP numbers.
	
	* bin/spp (pppalpha.addswchll): Avoid adding "swch" on
	instructions that use the index/tls register just after the
	beginning of the function.

	* bin/slc.in: Fix use of mktemp (use template with X's).

2009-03-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve use of Autotools & code cleanup.
	
	* m4/m4.m4: Add.
	* configure.ac: Check for more programs. In particular, the MT
	utilities are checked explicitly. Require GNU m4. Rename
	USE_TESTSUITE into ENABLE_TESTSUITE. Use BASH instead of SBASH.

	* bin/Makefile.am,
	* bin/cce.in,
	* bin/slc.in,	
	* bin/sgr.in: Update accordingly. Simplify. Now the scripts use
	the values supplied by Autoconf for defaults. (They can still be
	overriden via variables).

	* tests.mk: Set environment variables before calling `slc' and
	`slt'. The ".local" scripts are not needed any more.

	* demo/Makefile.am,
	* tests/Makefile.am: Update accordingly.

	* lib/Makefile.am: Split into...
	* lib/mtalpha.mk: this,
	* lib/seqc.mk: this,
	* lib/ptl.mk: and this.

	* lib/r-mtalpha-sim: Rename to...
	* lib/r-mtalpha-sim.in: this. Take location of simulator from Autoconf.
	* lib/r-mtsparc-sim.in: Duplicate feature from r-mtalpha-sim.
	* configure.ac: Update accordingly.

	* Makefile.am: Add rule "show-vars" for convenience.
	* doc/HACKING.txt: Document show-vars.

2009-03-22  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix definition of places for the simulator.
	
	* lib/mtalpha-sim/include/sl_support.h: PLACE_DEFAULT is 1 on
	mt-alpha (according to simulator sources).
	
	* bin/spp (pppalpha.remdefaults): Update accordingly.

2009-03-22  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Reinstate "make distcheck" by hiding the unit test suite behind a
	configure argument.

	* configure.ac: Add conditional "USE_TESTSUITE".
	* tests/mkalltests.sh,	
	* tests/Makefile.am: Activate unit test suite only when
	USE_TESTSUITE is enabled.

	* doc/HACKING.txt: Document the change.

	* bin/slt: Clean up better after a test succeeds, especially the
	directory containing the reference output.

	* Makefile.am: Add missing reference to include/svp/roman.slh.
	
2009-03-22  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Faster (microthreaded) integer divide + improvements to demos.

	* lib/mtalpha-sim/mtdiv.s: Add, courtesy of Mike Lankamp.
	* lib/Makefile.am: Update accordingly.
	
	* include/svp/roman.slh,	
	* lib/svplib/roman.sl: Implement "roman" as a actual thread
	function instead of a macro.
	
	* lib/Makefile.am,
	* demo/roman.sl: Update accordingly.

	* demo/fibonacci.sl: Use "INT" instead of "number" for the
	preprocessor macro, to avoid substitution in the output message.

	* demo/answer.sl: Work around bug in printf (output of 64 vs. 32
	bits integers).
 	
	* demo/Makefile.am: Reinstate rules that create executables during
	"make all", so that make outputs something to try out with "sgr".

	* lib/mtalpha-sim/Makefile: Kill, as it was unused.
	
2009-03-20  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	More tests & improvements thanks to testing.	

	* bin/spp: Implement local register window compression.

	* bin/slt: Fix checking against reference output. Allow
	implementation specifiers to indicate extra env vars to set during
	testing. Change naming of output directories to a simple digit.
	
	* lib/t-pppalpha/include/sl_support.h,
	* bin/spp,
	* lib/t-pppalpha/slimpl.m4: Fix delayed shared initialization.

	* lib/r-mtalpha-sim: Allow extra simulator arguments via SIMARGS
	variable.
	
	* tests/0_minimal/2_args/delayshared.sl: Simplify.

	* tests/div.sl: Rename to...	
	* tests/1_basic/2_div/div.sl: here. Simplify to use printf.

	* demo/10threads.sl: Use printf.	

	* tests/1_basic/1_index/common.slh,
	* tests/1_basic/1_index/defaults.sl,
	* tests/1_basic/1_index/inf1.sl,
	* tests/1_basic/1_index/inf2.sl,
	* tests/1_basic/1_index/inf3.sl,
	* tests/1_basic/1_index/inf4.sl,
	* tests/1_basic/1_index/inf5.sl,
	* tests/1_basic/1_index/neg1.sl,
	* tests/1_basic/1_index/neg2.sl,
	* tests/1_basic/1_index/neg3.sl,
	* tests/1_basic/1_index/neg4.sl,
	* tests/1_basic/1_index/neg5.sl,
	* tests/1_basic/1_index/neg6.sl,
	* tests/1_basic/1_index/neg7.sl,
	* tests/1_basic/1_index/neg8.sl,
	* tests/1_basic/1_index/neg9.sl,
	* tests/1_basic/1_index/pos1.sl,
	* tests/1_basic/1_index/pos2.sl,
	* tests/1_basic/1_index/pos3.sl,
	* tests/1_basic/1_index/pos4.sl,
	* tests/1_basic/1_index/pos5.sl,
	* tests/1_basic/1_index/pos6.sl,
	* tests/1_basic/1_index/pos7.sl,
	* tests/1_basic/1_index/pos8.sl,
	* tests/1_basic/1_index/pos9.sl,
	* tests/1_basic/2_div/div2.sl: Import from utcc.

	* tests/mkalltests.sh: Remove 'x_' tests from Automake test
	suite (all failures are not properly reported by all
	implementations, but we want to ignore this for now and focus on
	the positive features).
	
	* demo/fibonacci.sl: Reduce N to fit execution time within 5
	seconds (timeout during tests).

	
2009-03-19  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	More tests & improvements thanks to testing.
	
	* bin/spp,
	* lib/t-pppalpha/include/sl_support.h,
	* lib/t-pppalpha/slimpl.m4: Declare thread arguments in a single
	namespace before the create, to catch multiple definitions of the
	same identifier. Copy the thread arguments to a new temporary
	after the sync, so that further references use the temporary
	instead of the variable shared with the child family (which could
	be reused via a register for a new family).

	* lib/t-seqc/slimpl.m4: Imitate behavior of t-pppalpha for
	arguments (useful for comparison/testing).

	* tests/0_minimal/2_args/args1.sl: Add feature check.
	* demo/10threads.sl: Remove workaround as the feature is now fixed.
	
	* lib/t-ptl/slimpl.m4: Avoid setting every family as a root for
	continuation creates (3rd create parameter in PTL).

	* bin/spp (pppalpha.addswchll): Recognize more instructions that
	cause a long latency operation (esp. FP ops). Avoid swch after
	"setempty" which does not read its register.
	
	* doc/acronyms.txt: Document 'slt'. 

	* bin/slt: Properly use TEST_HERE.
	* tests.mk: Use it.

	* tests/0_minimal/1_create/fididreuse.sl,
	* tests/0_minimal/1_create/cr1.sl,
	* tests/0_minimal/2_args/argshadow.sl: Fix use of sl_sync.

	* tests/0_minimal/2_args/x_wrglparm.sl,	
	* tests/0_minimal/2_args/x_wrglarg.sl: Announce that failure can
	possibly occur earlier than compilation proper.
	
	* tests/0_minimal/2_args/x_addrparm2.sl: Do not try to write to
	global.
	
2009-03-19  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Move language specification away from the software project.
	
	* doc/spec.txt: Remove, as is now replaced by CSA note [sl1].
	* doc/lang.txt: Remove, as is now replaced by CSA note [sl2].
	
	* doc/Makefile.am,
	* doc/README.txt: Update accordingly.	

2009-03-18  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve interface of slc.
	
	* bin/slc.in: Complain early when input files do not
	exist. Complain if there is nothing to do.

2009-03-18  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Code cleanup & copyright notice.
	
	* reheader.pl: Import from utcc. Update.	
	* Makefile.am: Add "reheader" rule to update copyright notice.
	
	* bin/cce.in,
	* bin/scu,
	* bin/sgr.in,
	* bin/slc.in,
	* bin/slt,
	* bin/spp,
	* demo/10threads.sl,
	* demo/answer.sl,
	* demo/fibonacci.sl,
	* demo/helloworld.sl,
	* demo/roman.sl,
	* demo/test.sl,
	* include/cstddef.slh,
	* include/cstdint.slh,
	* include/m4sugar_transform.sed,
	* include/slc.m4,
	* include/svp/argslot.slh,
	* include/svp/assert.slh,
	* include/svp/div.slh,
	* include/svp/io.slh,
	* include/svp/iomacros.slh,
	* include/svp/lib.slh,
	* include/svp/roman.slh,
	* lib/div/create2.h,
	* lib/div/divide.c,
	* lib/div/divmod.h,
	* lib/div/encapsulate2.h,
	* lib/div/regs2.h,
	* lib/div/test-divide.c,
	* lib/div/utc2.h,
	* lib/host-host-ptl/include/ptl_config.h,
	* lib/host-host-ptl/include/ptl_debug.h,
	* lib/host-host-ptl/include/ptl_deps.h,
	* lib/host-host-ptl/include/ptl_svp.h,
	* lib/host-host-ptl/include/ptl_vars.h,
	* lib/host-host-ptl/include/svp_os.h,
	* lib/host-host-ptl/include/template.pl,
	* lib/host-host-ptl/ptl_debug.cc,
	* lib/host-host-ptl/ptl_svp.cc,
	* lib/host-host-ptl/ptl_vars.cc,
	* lib/host-host-ptl/slrt.c,
	* lib/host-host-seqc/include/svp_os.h,
	* lib/host-host-seqc/slrt.c,
	* lib/mtalpha-sim-proto/include/sl_support.h,
	* lib/mtalpha-sim-proto/include/svp_asmdiv.h,
	* lib/mtalpha-sim-proto/include/svp_os.h,
	* lib/mtalpha-sim/include/svp_asmdiv.h,
	* lib/mtalpha-sim/include/svp_os.h,
	* lib/mtalpha-sim/slrt.s,
	* lib/svplib/div.sl,
	* lib/svplib/io.sl,
	* lib/t-pppalpha/include/sl_support.h,
	* lib/t-pppalpha/slimpl.m4,
	* lib/t-ptl/include/sl_support.h,
	* lib/t-ptl/slimpl.m4,
	* lib/t-seqc/include/sl_support.h,
	* lib/t-seqc/slimpl.m4,
	* lib/t-utc/slimpl.m4,
	* lib/t-utc0/include/sl_support.h,	
	* lib/t-utc0/slimpl.m4: Update copyright notice. Strip trailing
	whitespace.

	* configure.ac,
	* Makefile.am,
	* bin/Makefile.am,
	* demo/Makefile.am,
	* doc/Makefile.am,
	* tests/Makefile.am,
	* lib/Makefile.am,
	* tests.mk: Update copyright notice.

	* bin/slt: Fix documentation.

	* lib/t-pppalpha/protoimpl.m4: Kill, as file is now unused.

2009-03-18  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improvements to test script.
	
	* bin/slt: Remove test output when test is successful and KEEP is
	not set. Factorize output of test results. Simplify display offset
	computations. Improve documentation. Use different exit codes for
	different exit situations. Propose license. Allow to use a local
	directory to help "make distcheck" build from a directory
	different from source.

	* doc/Makefile.am: Build man page for 'slt'. Fix locations of
	dependencies of language spec to be nice with "make distcheck".
	
2009-03-17  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Update handling of family exit code.
	
	* lib/t-ptl/slimpl.m4,
	* lib/t-seqc/slimpl.m4: Fix sl_sync to follow specification.

	* tests/0_minimal/1_create/x_invsync.sl: Make structure bigger so
	that it becomes an invalid output for the exit code with the
	'alternate' compiler.
	
	* tests/0_minimal/2_args/useexit2.sl: Import from utcc.

2009-03-17  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	More tests.
	
	* tests/0_minimal/2_args/argshadow.sl,
	* tests/0_minimal/2_args/delayshared.sl,
	* tests/0_minimal/2_args/useafter.sl,
	* tests/0_minimal/2_args/useafter2.sl,
	* tests/0_minimal/2_args/useafter3.sl,
	* tests/0_minimal/2_args/useafter4.sl,
	* tests/0_minimal/2_args/x_addrarg.sl,
	* tests/0_minimal/2_args/x_addrparm.sl,
	* tests/0_minimal/2_args/x_addrparm2.sl,
	* tests/0_minimal/2_args/x_argnr.sl,
	* tests/0_minimal/2_args/x_argnr2.sl,
	* tests/0_minimal/2_args/x_argscope.sl,
	* tests/0_minimal/2_args/x_deadlock.sl,
	* tests/0_minimal/2_args/x_dupdecl.sl,
	* tests/0_minimal/2_args/x_dupdecl2.sl,
	* tests/0_minimal/2_args/x_glnoinit.sl,
	* tests/0_minimal/2_args/x_invinit.sl,
	* tests/0_minimal/2_args/x_invinit2.sl,
	* tests/0_minimal/2_args/x_invsh1.sl,
	* tests/0_minimal/2_args/x_invsh2.sl,
	* tests/0_minimal/2_args/x_invsh3.sl,
	* tests/0_minimal/2_args/x_invsh4.sl,
	* tests/0_minimal/2_args/x_nothread.sl,
	* tests/0_minimal/2_args/x_wrglarg.sl,
	* tests/0_minimal/2_args/x_wrglparm.sl: Import from utcc.

2009-03-16  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	More tests & improvements thanks to testing.
	
	* lib/t-ptl/slimpl.m4,	
	* lib/t-seqc/slimpl.m4: Simplify loops by using m4_foreach from
	m4sugar. Adopt new semantics for 1st create parameter. Check
	proper balancing of create and sync. Protect initializers that
	contain colons.

	* lib/t-ptl/slimpl.m4,
	* lib/t-ptl/include/sl_support.h,
	* lib/t-pppalpha/slimpl.m4,		
	* lib/t-pppalpha/include/sl_support.h: Use PLACE_DEFAULT as
	default 2nd create parameter instead of SVP_LOCAL, as documented.

	* bin/spp: End create with a semicolon, as it may be required for
	copy of fid afterwards.
	
	* tests/0_minimal/1_create/cr1.s,
	* tests/0_minimal/1_create/cr1.sl,
	* tests/0_minimal/1_create/crif.sl,
	* tests/0_minimal/1_create/crif2.sl,
	* tests/0_minimal/1_create/crif3.sl,
	* tests/0_minimal/1_create/crnop.sl,
	* tests/0_minimal/1_create/crnop2.sl,
	* tests/0_minimal/1_create/crnop3.sl,
	* tests/0_minimal/1_create/crnopdefs.sl,
	* tests/0_minimal/1_create/fididreuse.sl,
	* tests/0_minimal/1_create/x_crnosync.sl,
	* tests/0_minimal/1_create/x_crnotstm.sl,
	* tests/0_minimal/1_create/x_extcreate.sl,
	* tests/0_minimal/1_create/x_extcreatedefs.sl,
	* tests/0_minimal/1_create/x_inffamily.sl,
	* tests/0_minimal/1_create/x_invsync.sl,
	* tests/0_minimal/1_create/x_nested.sl,
	* tests/0_minimal/1_create/x_nocreate.sl,
	* tests/0_minimal/1_create/x_nothread.sl,
	* tests/0_minimal/2_args/sum.sl,
	* tests/0_minimal/3_mem/crdefaults.sl,
	* tests/0_minimal/3_mem/if.sl,
	* tests/0_minimal/3_mem/indcreate.sl,
	* tests/0_minimal/4_index/indexdecl.sl: Import from utcc.
	
2009-03-16  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improvements thanks to testing.
	
	* include/svp/roman.slh: Implement simple number printer which
	does not require divide.

	* include/svp/lib.slh: Expose "nop" as svp_nop.
	* doc/spec.txt: Update accordingly.

	* bin/slt: Better error handling. Try to handle signals more
	gracefully.
	
	* tests.mk: Missing from previous commit.
	
2009-03-16  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Extend test suite.

	* configure.ac,
	* Makefile.am: Add subdirectory "tests".
	
	* tests/Makefile.am: Capture TESTS_ENVIRONMENT to...	
	* tests.mk: here.

	* tests/mkalltests.sh: Generate TESTS variable automatically.
	* tests/Makefile.am: Use it.
	* bootstrap: Update accordingly.

	* tests/0_minimal/0_trivial/div.sl,
	* tests/0_minimal/0_trivial/emptymain.sl,
	* tests/0_minimal/0_trivial/if.sl,
	* tests/0_minimal/0_trivial/if2.sl,
	* tests/0_minimal/0_trivial/nop.sl,
	* tests/0_minimal/0_trivial/x_abort.sl,
	* tests/0_minimal/0_trivial/x_empty.sl,
	* tests/0_minimal/0_trivial/x_illinsn.sl,
	* tests/0_minimal/0_trivial/x_infloop.sl,
	* tests/0_minimal/0_trivial/x_invcpp.sl,
	* tests/0_minimal/0_trivial/x_invm4.sl,
	* tests/0_minimal/0_trivial/x_invsyntax.sl,
	* tests/0_minimal/0_trivial/x_undefsym.sl: Import from utcc.
	
2009-03-16  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Bug fixes thanks to testing.
	
	* demo/10threads.sl: Copy shared after sync to new temporary, to
	work around current bug in compiler.

	* include/svp/iomacros.slh: Initialize printf arguments using
	assignments instead of initializer, to prevent gcc from using
	'memset' behind the scenes. Make structure volatile so that the
	assignments are not optimized away.

	* include/svp/div.slh: Use software divide in all implementations
	by default.

	* include/svp/lib.slh: Fix definition of "unlikely".

	* lib/t-pppalpha/include/sl_support.h,	
	* bin/spp: Emit create during translation, as it needs intricate
	registers lists. Bark when "jsr" is found in the output.

	* lib/mtalpha-sim/include/svp_os.h: Insert "nop"'s before the halt
	instruction, as it causes a decode error in the pipeline and may
	cause a failure in the delay slot after a branch.

	* bin/cce.in: Use -Os by default instead of -O2.

	* bin/slt: Implement more.

	* tests/div.sl: Implement.
	
2009-03-16  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Start implementing slc test tools.
	
	* bin/timeout: Import from utcc.
	* bin/slt: Import from utcc (test1). Upgrade to slc interface.

	* bin/Makefile.am: Update accordingly.

	* demo/Makefile.am: Use the test system.

	* bin/slc.in: Document option -t.

2009-03-16  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix bug.
	
	* bin/spp: Rename zero registers after flattening, to catch them
	in prologue too.

2009-03-15  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Continue implementation of alternate "compiler". Now it can
	produce (possibly invalid) executable files. Use it for library
	and demo code.

	* bin/spp: Implement features.
	* bin/Makefile.am: Fix trailing whitespace.

	* lib/t-pppalpha/slimpl.m4,	
	* lib/t-pppalpha/include/sl_support.h: Remove swch from sync and
	create, as spp now adds it automatically.
	
	* configure.ac: Search for "ar" and "ranlib" from mtalpha
	binutils.

	* include/svp/lib.slh: Encapsulate __abort differently.

	* lib/div/divide.c: Copy to...
	* lib/svplib/div.sl: here; modify to use SL syntax.
	* lib/div/div.s: Remove, as is now compiled from source.

	* lib/mtalpha-sim/crt.s: Rename to...
	* lib/mtalpha-sim/slrt.s: here. Update to use MT register names.

	* lib/Makefile.am: Also build mtalpha library and crt; include
	div.sl into library for all targets.
	
	* demo/Makefile.am: Compile example code also using ppp compiler
	during check.

	* lib/svplib/io.sl: Let printf output the format character when it
	is unrecognized.

	* lib/r-mtalpha-sim: MGSim is now called MGAlpha.

2009-03-13  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Continue implementation of alternate "compiler".

	* bin/cce.bin: Clean up command line to "spp".
	
	* lib/t-pppalpha/slimpl.m4,
	* lib/t-pppalpha/include/sl_support.h,
	* bin/spp: Implement features.

2009-03-13  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* doc/spec.txt: Add missing reference to [utc2].

2009-03-13  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Upgrade the µTC-PTL back-end.
	
	* lib/t-ptl/include/sl_support.h: Allow to use an external PTL
	implementation.

	* lib/t-ptl/slimpl.m4,
	* lib/host-host-ptl/ptl_debug.cc,
	* lib/host-host-ptl/ptl_svp.cc,
	* lib/host-host-ptl/ptl_vars.cc,
	* lib/host-host-ptl/include/create.tpl,
	* lib/host-host-ptl/include/template.pl,
	* lib/host-host-ptl/include/ptl_debug.h,
	* lib/host-host-ptl/include/ptl_svp.h,
	* lib/host-host-ptl/include/ptl_vars.h,
	* lib/host-host-ptl/include/ptl_deps.h: Update to latest utc-ptl code.

2009-03-13  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Clean up code.
	
	* include/slc.m4: Make sl_proccall a statement, not an expression.
	
	* include/lib/iomacros.slh: Simplify wrapper macros since
	sl_proccall already encapsulate the argument declarations in a
	scope.
	
2009-03-12  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Add missing macro definitions.
	
	* lib/t-ptl/slimpl.m4,
	* lib/t-seqc/slimpl.m4,
	* lib/t-utc0/slimpl.m4,	
	* lib/t-utc/slimpl.m4: Add missing definition of "f"
	parameter/argument declarations.

2009-03-12  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Clean up code.
	
	* lib/svplib/io.sl, 
	* include/svp/io.slh,	
	* include/svp/iomacros.slh: Use the "f" parameter/argument form
	where applicable.

	* doc/spec.txt: Fix typo.

2009-03-12  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	More language specification, as requested by UH.
	
	* doc/spec.txt: List external document references. Add
	glossary. Clarify thread function type compatibility. List
	referenced CSA notes explicitly. Add missing definition of SVP
	constants. Include io.slh and iomacros.slh litterally to document
	the library. Document svp_assert better. Document svp/lib.slh.

	* doc/Makefile.am: Update accordingly.
	
	* include/std/io.slh: Document.

	* include/std/assert.slh,
	* include/std/iomacros.slh: Clean up macros.
	
	* include/std/io.slh: Move argslot definition to...
	* include/std/argslot.slh: here.
	* include/cstddef.slh,
	* include/cstdint.slh: Implement.

	* Makefile.am: Update accordingly.
	
2009-03-11  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Code cleanup. Add more svn:ignore patterns.
	
	* bin/Makefile.am (cce sgr slc): Remove extraneous use of mkdir.

2009-03-11  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	More documentation.
	
	* doc/README.txt: Update with additional references.
	
	* doc/NEWS.txt: Document last two batches of major changes.
	
	* doc/HACKING.txt: Document maintainer mode. Document additional
	requirements for developer. Document using scripts without
	installing. Document distribution.

	* doc/lang.txt: Remove section about library since this is now
	covered by the separate specification.

	* Makefile.am (NEWS): Copy from src/NEWS.txt.

2009-03-11  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Add missing directory creation in maintainer mode.
	
 	* Makefile.am (include/slc_*.m4): Create the "include" directory
	in case it was not created before.

2009-03-11  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Correct paths in included dirs.
	
	* bin/Makefile.am (edit_inst): Use $(includedir), not $(incdir).

2009-03-11  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Clarify language spec.
	
	* doc/spec.txt: Rephrase break type properly. Place restriction on
	contents of "create".
	
2009-03-11  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Add formal language specification.
	
	* doc/spec.txt: Add.
	* doc/Makefile.am: Update accordingly.

2009-03-09  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Remove the C preprocessor from the set of usable
	SL features.
	
	* doc/lang.txt: Document use of m4 preprocessor.

	* include/slc.m4: Remove definition of sl_include: since we
	officially advertise m4 there is no need to hide m4_include. Push
	definition of sl_proccall to after initialization.

	* bin/spp, 
	* lib/t-pppalpha/slimpl.m4: Escape quotes in C before sending to
	shell; be careful with extra ':' characters.

	* lib/t-ptl/slimpl.m4,
	* lib/t-seqc/slimpl.m4: Allow for global initializers containing
	":".

	* include/svp/div.slh,
	* include/svp/io.slh,
	* include/svp/assert.slh,
	* include/svp/iomacros.slh: 
	* include/svp/lib.slh: Use m4 macros instead of CPP.

	* bin/cce.in: Put -DHAVE_C_DIVIDE in tflags instead of ppflags
	since it is now used during translation.

	* include/svp/io.slh: Remove printfN macros; replace by a single
	printf macro definition which supports a variable argument list.
	
	* demo/10threads.sl,
	* demo/helloworld.sl,
	* demo/answer.sl,
	* demo/test.sl: Update accordingly. Avoid commas in text strings
	since we are not quoting macro arguments to keep code simple.	

2009-03-08  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Migrate fibonacci example to sl-apps.
	
	* demo/fibo.sl: Remove.
	* demo/fibonacci.sl: Link from sl-apps.
	* demo/Makefile.am: Update accordingly.

2009-03-08  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* bin/spp,
	* lib/t-pppalpha/slimpl.m4,	
	* lib/t-pppalpha/include/sl_support.h: Advance implementation of
	create.

2009-03-06  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Cleanup & bugfix.
	
	* configure.ac: Configure Python.
	* bin/cce.in,
	* bin/Makefile.am,
	* lib/t-pppalpha/slimpl.m4: Use configured Python.

	* lib/t-pppalpha/include/sl_support.h,
	* bin/spp: Remove family tag from argument names (they should all
	be in the same namespace).

	* bin/spp (pppalpha.makedic): Kill unused function.

2009-03-06  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Start implementing ppp "compiler".

	* lib/t-pppalpha/slimpl.m4: Add.
	* lib/t-pppalpha/include/sl_support.h: Add.
	* lib/Makefile.am (nobase_dist_pkgdata_DATA): Update accordingly.

	* bin/spp: Add.
	* bin/Makefile.am (dist_bin_SCRIPTS): Update accordingly.

2009-03-06  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Re-organize layout of sl_support.h.

	* lib/host-host-ptl/include/sl_support.h: Rename to...
	* lib/t-ptl/include/sl_support.h: ...here.

	* lib/host-host-seqc/include/sl_support.h: Rename to...
	* lib/t-seqc/include/sl_support.h: ...here.

	* lib/mtalpha-sim/include/sl_support.h: Rename to...
	* lib/t-utc0/include/sl_support.h: ...here.

	* lib/Makefile.am (nobase_dist_pkgdata_DATA): Update accordingly.

	* bin/cce.in (slc_ppflags): Add include/ subdirectory of
	translator to preprocessor search list.

	* lib/host-host-seqc/slrt.c: Update accordingly.

2009-03-06  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Complete previous commit; add bootstrap
	script to initialize the dev environment.
	
	* Makefile.am: Update after upgrade of m4sugar.
	* bootstrap: Add.

2009-03-06  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Upgrade m4sugar.
	
	* include/slc.m4: Implement m4_step. Use m4_wrap_lifo to fix
	undivert order.

	* include/m4sugar.m4: Upgrade from Autoconf 2.59.
	* include/m4sugar_version.m4: Add.
	* include/m4sugar_foreach.m4: Add.
	* include/m4sugar_transform.sed: Update accordingly.
	
2009-03-02  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Start using m4sugar.
	
	* include/m4sugar_transform.sed: Rename dnl to m4_dnl. Remove
	dependency on m4sugar's version.m4.

	* bin/slc.in: Make "cce" in charge of loading the m4 files.
	* bin/cce.in: Modify accordingly.
	
	* include/slc.m4: Modify to use m4sugar; initialize diversions
	properly. Change comment style to C++ (//). Load
	implementation-specific macros from "slimpl.m4" instead of
	"protoimpl.m4".

	* lib/t-seqc/protoimpl.m4: Rename to...
	* lib/t-seqc/slimpl.m4: here.

	* lib/t-ptl/protoimpl.m4: Rename to...
	* lib/t-ptl/slimpl.m4: here.

	* lib/t-utc/protoimpl.m4: Rename to...
	* lib/t-utc/slimpl.m4: here.

	* lib/t-utc0/protoimpl.m4: Rename to...
	* lib/t-utc0/slimpl.m4: here.

	* lib/Makefile.am: Modify accordingly.

	* lib/t-seqc/slimpl.m4,
	* lib/t-ptl/slimpl.m4,
	* lib/t-utc/slimpl.m4,	
	* lib/t-utc0/slimpl.m4: Start using m4sugar: use m4_if and
	m4_bregexp instead of m4_ifelse and m4_regexp.

2009-03-02  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* doc/lang.txt: Add.
	
	* doc/Makefile.am: Update accordingly. Set MAINTAINERCLEANFILES.

2009-03-02  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* bin/Makefile.am (edit_inst, edit_src): Substitute @incdir@.

	* bin/slc.in: Use @incdir@.
	
2009-03-02  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* lib/Makefile.am: Distribute t-utc, t-utc0,
	r-mtalpha-sim. Reorganize targets to separate data
	stuff (pkgdatadir) from libraries and objects (libdir).

	* lib/host-host-ptl/slrt.c,
	* lib/host-host-seqc/slrt.c: Prevent compiler from optimizing away
	__tag__.

	* bin/sgr.in: Kill $root (was unused). Use Bash explicitly to run
	the runner script.

	* lib/r-host: Fix handling of relative paths. 

	* bin/cce.in: Fix splitting of build dir and source dir (again).

	* bin/Makefile.am: Propagate more directory variables to scripts.
	
2009-03-02  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* configure.ac: Remove spurious reference to "include/Makefile".

2009-03-01  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* ChangeLog: initialize.

	* configure.ac: Check for CC, CXX, RANLIB, perl.

	* doc/README.txt: Add.
	* doc/Makefile.am,
	* Makefile.am: Change accordingly.

	* include/Makefile.am: move contents to...
	* Makefile.am: here, so that the include/ base is kept during
	install.

	* lib/Makefile.am: Add.
	* configure.ac: Change accordingly.
	* lib/host-host-seqc/Makefile,
	* lib/host-host-ptl/Makefile,
	* lib/host-host-ptl/include/Makefile: Remove, as is now obsolete.

	* lib/host-host-ptl/crt.c: Rename to...
	* lib/host-host-ptl/slcrt.c: here.

	* lib/host-host-seqc/crt.c: Rename to...
	* lib/host-host-seqc/slcrt.c: here.

	* demo/Makefile.am: Distribute more demos. Compile each demo for
	multiple targets.

	* bin/cce.in: Allow for includes spread over separate source dir
	and build dir.

2009-11-06  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve `slr' to allow more debugging.
	
	* tools/bin/slr.in: New option `-gd' to debug data generation.

2009-11-04  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Minor improvements to data input via `slr' and `sag'.
	
	* tools/lib/arggen.c: Optimize by using a parallel loop (suggested
	by M. Lankamp)

	* tools/bin/sag: Define functions `v', `vu' and `vl' for uses in
	Fibre data files.

2009-11-04  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Simplify handling of C99's `restrict'.

	* tools/include/slc.m4: Move definition of `restrict' to...	
	* tools/lib/t-ptl/include/sl_support.h: ...here.

2009-11-04  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Eliminate some warnings in library code.

	* lib/src/io.c: Use the primitives from `cmath.h' to test for
	infinity.

	* lib/src/mtsep.c: Cast 0 properly to make a pointer.
	
2009-11-04  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Do not warn about `ctime.h' when including `svp/perf.h'.

	* lib/include/ctime.h: Subject warning to conditional.
	* lib/include/svp/perf.h: Set conditional accordingly.

2009-11-04  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix code generation for `-b utcx -EE'.

	* tools/bin/cce.in: Provide compiler for `-b utcx', so that `slc
	-EE' can pass preprocessing.

	* tools/lib/t-utc/include/sl_support.h: Provide (empty) since it
	is required by `-EE'.
	
	* tools/lib/t-utc/slimpl.m4: Add more whitespace to make output
	more palatable.

2009-11-04  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Optimize the `seqc' target.
	
	* tools/lib/t-seqc/slimpl.m4: Use `long' for index values.

2009-11-04  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Optimize the `ptl' target.
	
	* tools/lib/host-host-ptl/include/create.tpl,
	* tools/lib/host-host-ptl/include/ptl_svp.h,
	* tools/lib/host-host-ptl/ptl_svp.cc,
	* tools/lib/t-ptl/simpl.m4: Get rid of references to
	`squeeze'. Use `long' for index values.

2009-11-03  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix minor portability issue.
	
	* tools/include/svp/compiler.h: Rewrite definition of `use()' to
	make it portable.

2009-10-29  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Cosmetic fixes for `slt'.
	
	* tools/bin/slt.in: Improve readability of test log. 

2009-10-29  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Cosmetic fixes for `slr'.
	
	* tools/bin/slr.in: Do not complain about `-n' being used if it
	specifies multiple places. (requested by M. Hicks)

	* tools/lib/r-mtsparc-sim.sh.in, 	
	* tools/lib/r-mtsparc-sim.sh.in: Allow `SIMARGS' to override
	`-n'. (requested by M. Hicks)	

2009-10-21  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix bug in shared handling in `ppp' target.

	The latest changesets allowed the `fibonacci' demo program to fail
	by letting an alias to the incoming dependent leak to the outgoing
	write, causing no dependent read to actually occur in the location
	defined by the source program. Synchronization was thus not
	achieved properly.
	
	* tools/lib/t-pppalpha/include/sl_support.h: Clobber the dependent
	in `sl_setp', albeit at a different place than initially.

2009-10-21  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Slight optimization MT-Alpha code generation.
	
	* tools/bin/spp (pppalpha): Allow `end' immediately after a branch.

2009-10-21  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Re-optimize accesses to shareds in `ppp' target.

	The previous changeset was required to prevent incorrect code, but
	would also require a temporary register in all cases, including
	the simple `sl_setp(x, sl_getp(x) + 1)' which should instead be
	optimized to a single instruction. This changeset reintroduces
	this optimization opportunity.
	
	* tools/lib/t-pppalpha/include/sl_support.h: Remove superfluous
	clobber of the incoming shared just before a write to the
	outgoing. (but still clobber it afterwards)

2009-10-20  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix support for shareds in `ppp' target.

	Constructs of the form `sl_setp(x, (foo == 0) ? bar : 0)' would
	cause code generation to write to a shared register twice, which
	is incorrect. (reported by M. Lankamp)
	
	* tools/lib/t-pppalpha/include/sl_support.h: Use a temporary in
	the expansion of `sl_setp' and `sl_seta' to prevent computations
	and control flow between the "guard" asm statemetns.

2009-10-20  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Minor packaging fix.
	
	* lib/seqc.mk (CLEANFILES), 
	* lib/ptl.mk (CLEANFILES): Mention `perf.o'.

2009-10-16  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix `slr' breakage.
	
	* tools/bin/sag: Fix order in which `slr' variables from program
	are considered.

2009-10-15  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix `slr -g' with simulator.
	
	* tools/lib/r-mtalpha-sim.sh.in (DEBUGGER),
	* tools/lib/r-mtsparc-sim.sh.in (DEBUGGER): Fix typo (do not use
	`.gfx' by default when debugging).

2009-10-15  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Reflect latest binutils changes. (cont.)
	
	* tools/lib/mtalpha-sim/slrt.s (_start),	
	* tools/lib/mtalpha-sim/callgate.s (__sl_callgate): Move
	`.registers' to before the label.

2009-10-15  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Reflect latest binutils changes.

	* tools/bin/spp (pppalpha.xjoin2): Emit the `.registers' directive
	before the function label. This is required because the register
	word should happen before the first instruction in the output and
	assembler does not reorder them anymore.

2009-10-15  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Increase portability of the `seqc' and `ptl' targets.

	On some systems, it is needed to link with `-lm' to get access to
	math functions.
	
	* build-aux/slc.m4: Check whether `-lm' is needed to use math on
	the host C/C++.
	
	* build-aux/sl.mk: Use $(LIBS) for the host system.

2009-10-14  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Allow multiple uses of `slr_decl' in the same translation unit.

	* tools/include/svp/slr.h: Support multiple uses of `slr_decl'.
	
	* tools/bin/sag: Sort variables according to the order specified
	in the source.

2009-10-13  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	ABI change: special memory now at the start of the address space.
	
	* lib/include/svp/perf.h: Counters now start at address +4 from
	the start of the address space, instead of -256 from the end.
	
	* tools/lib/t-utc0/slimpl.m4: The `setempty' instruction now
	expands to a load from address +4 from the start of the address
	space, instead of a load from the end of the address
	space. Transform the flush of a shared accordingly.
	
2009-10-13  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Prepare for ABI change.
	
	* tools/bin/cce.in: Change the base offset for MT linking to 16Mb,
	to allow for some reserved memory with special behavior before.

2009-10-13  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Ease post-processing of the output of `slr'.
	
	* tools/bin/sag (SlrVarGenerator.dogen): Prefix `#' to warning
	messages so they can be treated as comments in text-processing
	tools.

2009-10-12  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix bug in MT-alpha code generation.

	When the legacy RA register is used as a temporary, a special
	"complete memory load" register access is emitted before the point
	a thread terminates, to ensure pending memory loads are flushed
	before the thread resources are used. This is a "required
	optimization" (to avoid pipeline stalls in the next thread that
	reuses the register). Unfortunately it is possible that the
	control flow reaches that point without using the RA register (it
	could be used only in some branches in the function body). The
	solution implemented is to conservatively initialize RA always
	when it may be used as a temporary.
	
	* tools/bin/spp (pppalpha.makeprotectspecial): New transform.
	(pppalpha.filter): Use it.

2009-10-10  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Provide support for anonymous thread arguments/parameters.
	
	* tools/include/slc.m4: Define new macro `sl_anonymous'.
	
	* tools/lib/t-ptl/slimpl.m4,
	* tools/lib/t-seqc/slimpl.m4,
	* tools/lib/t-utc0/slimpl.m4	
	* tools/lib/t-pppalpha/slimpl.m4: Use `sl_anonymous' when no
	thread parameter/argument name is provided.

2009-10-10  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix some issues with whitespace handling.
	
	* tools/include/m4sugar_regexp.patch: New.
	
	* tools/Makefile.am: Patch regexps after translating the quotes in
	m4sugar, since some regexps can contain valid single pairs of [
	and ].

	* tools/lib/t-seqc/slimpl.m4: Do not initialize thread arguments
	when the initializer is whitespace.

	* tools/bin/spp: Strip whitespace from initializer before testing
	for emptyness.

2009-10-09  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Make testsuite more resilient to long tests.

	* tools/bin/timeout.in: Increase the default timeout to 60
	seconds.

2009-10-09  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Increase support for C99.
	
	* tools/bin/cce.in: Use `-std=gnu99' when compiling for MT.

2009-10-09  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Minor fix.
	
	* build-aux/sl.mk (.c.x): Fix typo in variable expansion.

2009-10-08  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Enhance the build framework.
	
	* build-aux/sl.mk: Allow Makefiles to add flags to the `slc'
	command lines.

2009-10-08  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Enhance the performance counters library.

	* lib/include/svp/perf.h: Introduce new macro `REPORT_STREAM'.
	
	* lib/src/perf.c: Use the specified stream for output.

2009-10-08  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix bug with special characters in string constants.

	* tools/bin/cm4.in: Insert string delimiters after inserted hex
	escapes, to prevent adjacent digits from taking part in the
	character code.

2009-10-08  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Enhance `slr'.
	
	* tools/bin/slr.in: Also use `SLR_RECURSIVE' when processing the
	Fibre input.

2009-10-08  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Allow to use thread function pointers with muTC-ptl.
	
	* tools/lib/t-ptl/simpl.m4: Do not take the address of the thread
	function when invoking uTC::create.

2009-10-08  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* tools/include/svp/compiler.h (alwaysinline): Fix typo.

2009-10-08  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Extend the library.
	
	* tools/include/svp/compiler.h: Introduce new macro
	`use'. (req. by M. Lankamp)

2009-10-07  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Optimize the root SEP allocator.
	
	* lib/src/mtsep.c: Bucket places by power of 2 sizes; remove
	allocated places from their allocation pools during `alloc' and
	put them back during `free'.

2009-10-06  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Increase C99 compatibility.
	
	* tools/bin/cce.in: Append `-std=gnu99' when compiling C
	natively. (reported by A. Matei)

2009-10-06  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Enhance `slr', most notably to set up gfx output.

	The following options are introduced: `-X' enable graphics, `-Xr'
	set refresh rate, `-Xs' set scaling factors, `-Xd' set output
	dimensions.
	
	* tools/bin/slr.in: Add support for the new options. Document
	them.

	* tools/lib/r-mtalpha-sim.sh.in,	
	* tools/lib/r-mtsparc-sim.sh.in: Use the `gfx' version of the	
	simulator where needed. Also enhance to use the `dbg' version when
	-g is given to `slr'.
	
2009-10-01  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Introduce performance counters and C99's clock().

	* lib/include/ctime.h,
	* lib/src/mtclock.c: New.

	* lib/include/svp/perf.h: Deprecate `get_cycles()' in favor of
	`clock()'.

	* lib/include/svp/perf.h,
	* lib/src/perf.c: Implement the API described in note [sl8].

	* lib/Makefile.am,
	* lib/seqc.mk,
	* lib/ptl.mk,
	* lib/mtalpha.mk: List the new files.
	
2009-09-30  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Introduce a default architecture configuration with many places.
	
	* tools/bin/slr.in: Change documentation for `-n'. Force default
	to many places of varying sizes.

	* tools/bin/slt.in: Update documentation to remove uses of `-n'.

	* build-aux/slctests.mk: Do not use `-n' any more. Programs can
	request multiple tests via SLT_RUN in the source code.
	
2009-09-29  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix support for C99's float.h.

	* lib/include/bits/float.h: New. 
	* lib/Makefile.am: Update accordingly.

2009-09-29  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix build of demos that require the math library.
	
	* build-aux/sl.mk: Compile to MT alpha with `-lm' always, so that
	demo code does not need to sort out when it is needed and not.

2009-09-29  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* doc/NEWS.txt: Document latest big changes.

2009-09-29  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve command-line argument handling in `slc'.

	The script supports `-ftrace-m4' but documents `-fm4-trace'. Also
	the underlying M4 implementation has changed the parameter for the
	output file from `-o' to `--debugfile'.
	
	* tools/bin/slc.in: Align documentation with
	implementation. Update to new M4 interface.

2009-09-29  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Align API for place allocation with documentation.

	Note [sl7] was authored to document the API and introduces the
	concept of SEP. Ensure this concept exists in the implementation
	as well. Also, place sharing does not exist yet.

	* lib/include/svp/sep.h,	
	* lib/src/mtsep.c: Introduce the SEP. Remove support for place
	sharing.
	
2009-09-29  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix bug in SL macro expansion.
	
	* tools/lib/t-pppalpha/slimpl.m4: Shell-quote the thread function
	name when calling Python, so as to avoid strangeness with names of
	the form "foo->bar" etc.

2009-09-28  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Extend the graphics output library.
	
	* lib/include/svp/gfx.h: Add support for pixel output at offset
	from start of framebuffer.

2009-09-27  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Small optimization in MT-alpha code generation.

	* tools/bin/spp (pppalpha.addswchll): Properly recognize `sqrt' as
	a long-latency operation.

2009-09-27  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Minor packaging fix.

	* lib/Makefile.am: Install math headers.
	
	* lib/mtalpha.mk: Distribute math modules.

2009-09-27  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve support for C99 math.
	
	* lib/include/cmath.h: Properly define `float_t' and
	`double_t'. Set `math_errhandling' to 0 since there is actually no
	handling implemented.

2009-09-27  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* tools/bin/slt.in: Compile tests with `-lm'.

2009-09-27  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Add support for C99 math on MT-alpha.

	* lib/include/cfloat.h,
	* lib/include/cmath.h: Declare C99 math.
	
	* lib/src/missing_uclibc_math.c: New.
	
	* lib/src/mtalpha/m/acosf.o,
	* lib/src/mtalpha/m/acoshf.o,
	* lib/src/mtalpha/m/asinf.o,
	* lib/src/mtalpha/m/asinhf.o,
	* lib/src/mtalpha/m/atan2f.o,
	* lib/src/mtalpha/m/atanf.o,
	* lib/src/mtalpha/m/atanhf.o,
	* lib/src/mtalpha/m/cabsf.o,
	* lib/src/mtalpha/m/carg.o,
	* lib/src/mtalpha/m/cargf.o,
	* lib/src/mtalpha/m/cbrtf.o,
	* lib/src/mtalpha/m/ceilf.o,
	* lib/src/mtalpha/m/copysignf.o,
	* lib/src/mtalpha/m/cosf.o,
	* lib/src/mtalpha/m/coshf.o,
	* lib/src/mtalpha/m/e_acos.o,
	* lib/src/mtalpha/m/e_acosh.o,
	* lib/src/mtalpha/m/e_asin.o,
	* lib/src/mtalpha/m/e_atan2.o,
	* lib/src/mtalpha/m/e_atanh.o,
	* lib/src/mtalpha/m/e_cosh.o,
	* lib/src/mtalpha/m/e_exp.o,
	* lib/src/mtalpha/m/e_fmod.o,
	* lib/src/mtalpha/m/e_gamma.o,
	* lib/src/mtalpha/m/e_gamma_r.o,
	* lib/src/mtalpha/m/e_hypot.o,
	* lib/src/mtalpha/m/e_j0.o,
	* lib/src/mtalpha/m/e_j1.o,
	* lib/src/mtalpha/m/e_jn.o,
	* lib/src/mtalpha/m/e_lgamma.o,
	* lib/src/mtalpha/m/e_lgamma_r.o,
	* lib/src/mtalpha/m/e_log.o,
	* lib/src/mtalpha/m/e_log10.o,
	* lib/src/mtalpha/m/e_log2.o,
	* lib/src/mtalpha/m/e_pow.o,
	* lib/src/mtalpha/m/e_rem_pio2.o,
	* lib/src/mtalpha/m/e_remainder.o,
	* lib/src/mtalpha/m/e_scalb.o,
	* lib/src/mtalpha/m/e_sinh.o,
	* lib/src/mtalpha/m/e_sqrt.o,
	* lib/src/mtalpha/m/erfcf.o,
	* lib/src/mtalpha/m/erff.o,
	* lib/src/mtalpha/m/exp2f.o,
	* lib/src/mtalpha/m/expf.o,
	* lib/src/mtalpha/m/expm1f.o,
	* lib/src/mtalpha/m/fabsf.o,
	* lib/src/mtalpha/m/fdimf.o,
	* lib/src/mtalpha/m/floorf.o,
	* lib/src/mtalpha/m/fmaf.o,
	* lib/src/mtalpha/m/fmaxf.o,
	* lib/src/mtalpha/m/fminf.o,
	* lib/src/mtalpha/m/fmodf.o,
	* lib/src/mtalpha/m/frexpf.o,
	* lib/src/mtalpha/m/hypotf.o,
	* lib/src/mtalpha/m/ilogbf.o,
	* lib/src/mtalpha/m/k_cos.o,
	* lib/src/mtalpha/m/k_rem_pio2.o,
	* lib/src/mtalpha/m/k_sin.o,
	* lib/src/mtalpha/m/k_standard.o,
	* lib/src/mtalpha/m/k_tan.o,
	* lib/src/mtalpha/m/ldexpf.o,
	* lib/src/mtalpha/m/lgammaf.o,
	* lib/src/mtalpha/m/llrintf.o,
	* lib/src/mtalpha/m/llroundf.o,
	* lib/src/mtalpha/m/log10f.o,
	* lib/src/mtalpha/m/log1pf.o,
	* lib/src/mtalpha/m/log2f.o,
	* lib/src/mtalpha/m/logbf.o,
	* lib/src/mtalpha/m/logf.o,
	* lib/src/mtalpha/m/lrintf.o,
	* lib/src/mtalpha/m/lroundf.o,
	* lib/src/mtalpha/m/modff.o,
	* lib/src/mtalpha/m/nan.o,
	* lib/src/mtalpha/m/nearbyintf.o,
	* lib/src/mtalpha/m/nextafterf.o,
	* lib/src/mtalpha/m/powf.o,
	* lib/src/mtalpha/m/remainderf.o,
	* lib/src/mtalpha/m/remquof.o,
	* lib/src/mtalpha/m/rintf.o,
	* lib/src/mtalpha/m/roundf.o,
	* lib/src/mtalpha/m/s_asinh.o,
	* lib/src/mtalpha/m/s_atan.o,
	* lib/src/mtalpha/m/s_cbrt.o,
	* lib/src/mtalpha/m/s_ceil.o,
	* lib/src/mtalpha/m/s_copysign.o,
	* lib/src/mtalpha/m/s_cos.o,
	* lib/src/mtalpha/m/s_erf.o,
	* lib/src/mtalpha/m/s_expm1.o,
	* lib/src/mtalpha/m/s_fabs.o,
	* lib/src/mtalpha/m/s_fdim.o,
	* lib/src/mtalpha/m/s_finite.o,
	* lib/src/mtalpha/m/s_finitef.o,
	* lib/src/mtalpha/m/s_floor.o,
	* lib/src/mtalpha/m/s_fma.o,
	* lib/src/mtalpha/m/s_fmax.o,
	* lib/src/mtalpha/m/s_fmin.o,
	* lib/src/mtalpha/m/s_fpclassify.o,
	* lib/src/mtalpha/m/s_fpclassifyf.o,
	* lib/src/mtalpha/m/s_frexp.o,
	* lib/src/mtalpha/m/s_ilogb.o,
	* lib/src/mtalpha/m/s_isinf.o,
	* lib/src/mtalpha/m/s_isinff.o,
	* lib/src/mtalpha/m/s_isnan.o,
	* lib/src/mtalpha/m/s_isnanf.o,
	* lib/src/mtalpha/m/s_ldexp.o,
	* lib/src/mtalpha/m/s_lib_version.o,
	* lib/src/mtalpha/m/s_llrint.o,
	* lib/src/mtalpha/m/s_llround.o,
	* lib/src/mtalpha/m/s_log1p.o,
	* lib/src/mtalpha/m/s_logb.o,
	* lib/src/mtalpha/m/s_lrint.o,
	* lib/src/mtalpha/m/s_lround.o,
	* lib/src/mtalpha/m/s_matherr.o,
	* lib/src/mtalpha/m/s_modf.o,
	* lib/src/mtalpha/m/s_nearbyint.o,
	* lib/src/mtalpha/m/s_nextafter.o,
	* lib/src/mtalpha/m/s_remquo.o,
	* lib/src/mtalpha/m/s_rint.o,
	* lib/src/mtalpha/m/s_round.o,
	* lib/src/mtalpha/m/s_scalbln.o,
	* lib/src/mtalpha/m/s_scalbn.o,
	* lib/src/mtalpha/m/s_signbit.o,
	* lib/src/mtalpha/m/s_signbitf.o,
	* lib/src/mtalpha/m/s_signgam.o,
	* lib/src/mtalpha/m/s_significand.o,
	* lib/src/mtalpha/m/s_sin.o,
	* lib/src/mtalpha/m/s_tan.o,
	* lib/src/mtalpha/m/s_tanh.o,
	* lib/src/mtalpha/m/s_trunc.o,
	* lib/src/mtalpha/m/scalblnf.o,
	* lib/src/mtalpha/m/scalbnf.o,
	* lib/src/mtalpha/m/sinf.o,
	* lib/src/mtalpha/m/sinhf.o,
	* lib/src/mtalpha/m/sqrtf.o,
	* lib/src/mtalpha/m/tanf.o,
	* lib/src/mtalpha/m/tanhf.o,
	* lib/src/mtalpha/m/tgammaf.o,
	* lib/src/mtalpha/m/truncf.o,
	* lib/src/mtalpha/m/w_acos.o,
	* lib/src/mtalpha/m/w_acosh.o,
	* lib/src/mtalpha/m/w_asin.o,
	* lib/src/mtalpha/m/w_atan2.o,
	* lib/src/mtalpha/m/w_atanh.o,
	* lib/src/mtalpha/m/w_cabs.o,
	* lib/src/mtalpha/m/w_cosh.o,
	* lib/src/mtalpha/m/w_drem.o,
	* lib/src/mtalpha/m/w_exp.o,
	* lib/src/mtalpha/m/w_exp2.o,
	* lib/src/mtalpha/m/w_fmod.o,
	* lib/src/mtalpha/m/w_gamma.o,
	* lib/src/mtalpha/m/w_hypot.o,
	* lib/src/mtalpha/m/w_j0.o,
	* lib/src/mtalpha/m/w_j1.o,
	* lib/src/mtalpha/m/w_jn.o,
	* lib/src/mtalpha/m/w_lgamma.o,
	* lib/src/mtalpha/m/w_lgamma_r.o,
	* lib/src/mtalpha/m/w_log.o,
	* lib/src/mtalpha/m/w_log10.o,
	* lib/src/mtalpha/m/w_log2.o,
	* lib/src/mtalpha/m/w_pow.o,
	* lib/src/mtalpha/m/w_remainder.o,
	* lib/src/mtalpha/m/w_sinh.o,
	* lib/src/mtalpha/m/w_sqrt.o,
	* lib/src/mtalpha/m/w_tgamma.o: Import from uClibc 0.9.30.1.
	
	* lib/src/mtamathobjs.mk: List the precompiled objects.
	
	* lib/mtalpha.mk: New target `mtalpha-sim/libm.a'.	

2009-09-26  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix support for reusing `slr' parameters in `slt'.

	A previous patch introduced a new environment variable
	EXTRA_RUN_ARGS. This approach is too intrusive as it can leak
	across test cases in a shell environment.

	* tools/bin/slt.in: Remove support for EXTRA_RUN_ARGS. Introduce a
	new option `-a' with the same effect.

2009-09-26  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Add support for multiple source files per unit test.

	* tools/bin/slt.in: Recognize `--' as separator between test
	sources and the implementation list. For backward compatibility,
	if the separator is not present, only one source file is
	allowed. Handle multiple sources per test. (Requested by
	M. Lankamp)

2009-09-26  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix support for `slc -combine'.

	When using `-combine=P', multiple inclusions of `sl_support.h'
	would occur and cause multiple definitions to happen later during
	compilation.
	
	* tools/lib/t-utc0/include/sl_support.h,
	* tools/lib/t-seqc/include/sl_support.h,
	* tools/lib/t-ptl/include/sl_support.h,	
	* tools/lib/t-pppalpha/include/sl_support.h: Protect definitions
	with conditional.

2009-09-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Add support for reusing `slr' parameters.
	
	* tools/bin/slt.in: Use the variable `EXTRA_RUN_ARGS' on each run
	of `slr'. (Requested by M. Lankamp)

2009-09-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Expose the availability of place management to programs.

	* lib/include/svp/sep.h: Introduce the macro `SVP_HAS_SEP' is
	introduced which signals to program the availability of place
	management.

2009-09-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Integrate the place allocator in the library.

	* tools/lib/mtalpha-sim/slrt.s: Move the definition of the
	pointers to fibre and variable data, as well as their
	initializations, to C code in...
	
	* slc/lib/src/mtinit.c: here. Call the place allocator
	initialization as part of the library initialization.
	
	* slc/lib/Makefile.am: Mention the new files.

	* slc/lib/mtalpha.mk: Compile them into the library.

2009-09-24  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Import Joe's work on place allocation.

	An initial version of a SVP place allocator was developed by Joe
	Master using a first-fit algorithm; this was extended to provide
	multiple allocation policies.
	
	* lib/include/svp/sep.h,
	* lib/src/mtsep.c: New.

2009-09-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix symbolic place names in `seqc'.

	The `seqc' implementation was out-of-sync with the others in not
	defining `PLACE_LOCAL' and `PLACE_DEFAULT'.
	
	* tools/lib/t-seqc/include/sl_support.h: Rename `SVP_LOCAL' to
	`PLACE_LOCAL' and define `PLACE_DEFAULT'.

2009-09-24  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Small optimization in MT-alpha code generation.
	
	* tools/bin/spp (pppalpha.makerepl): Prepend the dollar signs
	early.

2009-09-23  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix bugs in MT-alpha code generation.
	
	* tools/lib/t-pppalpha/include/sl_support.h: Fix `sl_setp' for
	floating-point shared parameters.

	* tools/bin/spp (pppalpha.findusedcallregs, pppalpha.rewritejsr):
	Be (more) careful about function calls where both int and fp
	registers are used for function calls.

	* tools/bin/spp (pppalpha.fixemptyf, pppalpha.filter2): Add new
	pass to rename `setempty' to `setemptyf' is the argument is a
	floating-point register. Use it.

	* tools/lib/t-utc0/slimpl.m4: Attempt to implement empty shared
	thread arguments by emitting an explicit load from the top of the
	address space.
	
2009-09-21  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Simplify build.
	
	* lib/ptl.mk,	
	* lib/seqc.mk: Simplify by providing a generic rule %.c -> %.o.

2009-09-21  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Add support for a graphical framebuffer.

	This changeset adds support for the graphics output in the MG
	simulator introduced in r2814-r2817, and simulates a framebuffer
	using memory but no graphics when using the other SVP
	implementations.
	
	* lib/include/svp/gfx.h,
	* lib/src/gfx.c: New.

	* lib/Makefile.am: Update accordingly.
	
	* lib/seqc.mk,
	* lib/ptl.mk: Include `gfx.c' in the library.

2009-09-08  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Minor packaging fix.
	
	* tools/bin/Makefile.am: Make script generation dependent on the
	`Makefile' itself, since they need to be re-made when tools are
	reconfigured.

2009-09-15  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix bug in `slr'.

	The `raw:' input scheme would attempt to load twice too many bytes
	from the file, due to an invalid loop increment.

	* tools/bin/sag: Fix bug.
	
2009-08-31  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Minor packaging fix.
	
	* tools/bin/Makefile.am: Use unique temporary directory to build
	the scripts. This allows proper behavior when building the man
	pages in concurrent `make' invocations.

2009-08-31  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve autonomy of other packages using SLC.
	
	* build-aux/slc.m4: Also try find `slc' in PATH if not specified
	with `--with-slc' or SLC_BASE. Reject double slashes in SLC_BASE
	as this is known to cause issues with M4.

2009-08-31  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix `slr' bug.

	Under some circumstances `slr' would not be able to find which
	runner to use with an executable after it was compiled. This
	changeset addresses this issue. (reported by M. Lankamp)
	
	* tools/lib/host-host-seqc/slrt.c,	
	* tools/lib/host-host-ptl/slrt.c: Ensure that the magic strings
	are prefixed by a NUL byte so that the `strings' command can find
	them. 
	
2009-08-31  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix packaging.

	* lib/Makefile.am: Distribute and install `svp/callgate.h'.

2009-08-30  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Update documentation.

	* doc/HACKING.txt,
	* doc/NEWS.txt,
	* doc/README.txt,
	* doc/acronyms.txt,	
	* doc/requirements.txt: Update to latest software changes.

2009-08-29  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix typo in `sac_helpers.h'.

	* lib/include/sac_helpers.h (fast_safe_free): Delegate to
	`fast_free', not `safe_free'.

2009-08-28  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Add more SAC to muTC helpers.
	
	* lib/include/sac_helpers.h: Also provide `fast_safe_free'.

2009-08-28  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Packaging fix.
	
	* lib/Makefile.am: Distribute and install `calloca.h'.

2009-08-28  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Improve global memory allocation.

	This changeset introduces a set of `fast_' wrappers around memory
	allocation functions toavoid an intermediary function context to
	reach their respective algorithm. This was suggested by Chris
	Jesshope. Also increase the `malloc' pool by larger chunks, so
	that pool extension happens less often.
	
	* lib/src/callgate.h: Rename to...
	* lib/include/svp/callgate.h: ...here. Simplify.

	* lib/include/cmalloc.h: Provide wrappers.
	
	* lib/src/malloc_wrappers.c: Simplify by using the wrappers.
	
	* lib/mtalpha.mk,	
	* lib/src/malloc_intrinsics.c: Make the page size bigger, so that
	`malloc' increases its pool by bigger chunks.

2009-08-28  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Complete support for C's (non-standard) `alloca'.

	Since `alloca' is merely play on the stack pointer and the frame
	pointer everything was in place except the declaration of the name
	`alloca' itself. This changeset provides a header for this
	purpose.
	
	* lib/include/calloca.h: New.
	
	* lib/include/sac_helpers.h: Add `safe_free()', which calls
	`free()' if and only if it detects its argument is not the result
	of `alloca'. This is non-portable (Microgrid only).

2009-08-27  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	MT-Alpha ISA change: `allocate' takes the place identifier as input.

	Creates using the default place must flush the register passed to
	`allocate'. `setplace' disappears.

	* tools/lib/t-pppalpha/include/sl_support.h,
	* tools/lib/mtalpha-sim/main.c,
	* lib/src/callgate.h,
	* lib/src/mtalpha/mtdiv.s,
	* tools/bin/spp (pppalpha.create, pppalpha.remdefaults,
	pppalpha.rewritejsr): Pass the place identifier as input to
	`allocate'. Do not use `setplace' any more.

	* tools/bin/spp (pppalpha.addswchll): Recognize that `allocate'
	reads its parameter. Also recognize that `clr' and `fclr' make the
	target register immediately available for reading.
	
2009-08-26  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Fix packaging. This allows `make distcheck' to succeed.

	* build-aux/Makefile.am: Distribute `sl-init-autoconf'.

	* tools/bin/Makefile.am: Fix manpage dependencies to please
	`distcleancheck'.

2009-08-26  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Minor packaging fixes.
	
	* build-aux/slc.m4: Fail if the SL tools cannot be found. Use
	`sl-core' instead of `slc' to fetch installed files from.

2009-08-26  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Make package more reusable for other trees.

	There are two ways the parts of the source tree can be used:
	either together as sub-trees of the "base" package, or
	independently of the base package after the `sl-core' package was
	installed somewhere on the system.

	In the former case the tools and makefile rules can be picked up
	relative to the directory where they are reused; in the latter
	case they must pick them up from some agreed-upon install
	location.

	The new `sl-init-autoconf' script implements this protocol by
	fetching the aclocal and Makefile rules (.mk) from the "nearest"
	location, either a source tree "nearby" (next to the
	`sl-init-autoconf' script itself) or from the install locations.

	* build-aux/sl-init-autoconf: New.
	
	* build-aux/Makefile.am: Install `sl-init-autoconf'. Also install
	the `.mk' files to some location where `sl-init-autoconf' can find
	them.

	* Makefile.am: Recurse into `build-aux'.
	
2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	Rename the package to `sl-core'.

	* configure.ac: Change package name.

2009-08-25  Raphael 'kena' Poss  <r.c.poss@uva.nl>

	* ChangeLog: initialize.

See `ChangeLog.1' for earlier changes.

